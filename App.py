# =========================
#App.py â€” Personal Potentials Â· Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (clean rebuild)
# =========================

import os
import re
import json
import hashlib
import secrets
from datetime import datetime, date
from typing import Any, Dict, List, Optional, Tuple

import streamlit as st
from supabase import create_client

# OpenAI optional
try:
    from openai import OpenAI
except Exception:
    OpenAI = None


# -------------------------
# MUST be first Streamlit call
# -------------------------
APP_TITLE = st.secrets.get("APP_BRAND_TITLE", os.getenv("APP_BRAND_TITLE", "Personal Potentials Â· Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ"))
st.set_page_config(page_title=APP_TITLE, page_icon="ğŸ’ ", layout="wide")


# =========================
# Secrets
# =========================
SUPABASE_URL = st.secrets.get("SUPABASE_URL", os.getenv("SUPABASE_URL", ""))
SUPABASE_KEY = st.secrets.get("SUPABASE_SERVICE_ROLE_KEY", os.getenv("SUPABASE_SERVICE_ROLE_KEY", ""))
OPENAI_API_KEY = st.secrets.get("OPENAI_API_KEY", os.getenv("OPENAI_API_KEY", ""))

USERS_TABLE = "pp_users"
PROFILES_TABLE = "pp_profiles"

if not SUPABASE_URL or not SUPABASE_KEY:
    st.error("Missing SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY in Streamlit secrets")
    st.stop()

sb = create_client(SUPABASE_URL, SUPABASE_KEY)


# =========================
# Profile defaults
# =========================
def default_profile() -> Dict[str, Any]:
    action_blocks = [
        {"key": "structure", "title": "Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ½Ñ", "items": []},
        {"key": "focus", "title": "Ğ¤Ğ¾ĞºÑƒÑ Ğ½ĞµĞ´ĞµĞ»Ğ¸", "items": []},
        {"key": "growth", "title": "Ğ Ğ¾ÑÑ‚ Ğ¸ Ğ½Ğ°Ğ²Ñ‹ĞºĞ¸", "items": []},
        {"key": "energy", "title": "Ğ­Ğ½ĞµÑ€Ğ³Ğ¸Ñ Ğ¸ Ñ€ĞµÑÑƒÑ€Ñ", "items": []},
    ]
    return {
        "meta": {
            "schema": "pp.realization.v2",
            "created_at": datetime.utcnow().isoformat() + "Z",
            "updated_at": datetime.utcnow().isoformat() + "Z",
        },
        "foundation": {
            "name": "",
            "potentials_table": "",
        },
        "realization": {
            "point_a": "",
            "point_b": "",
        "focuses": {
             "focus1": {"title": "", "actions": []},
             "focus2": {"title": "", "actions": []},
             "focus3": {"title": "", "actions": []},
        },
        "hobbies_selected": [],
            "weekly_focus": "",
            "focus_explainer": "",
            "action_blocks": action_blocks,
            "week_start": "",
        },
        "today": {
            "by_date": {},
        },
        "library": {
            "extended_report_md": "",
            "extended_report_updated_at": "",
        },
    }


def ensure_profile_schema(p: dict) -> dict:
    if not isinstance(p, dict):
        return default_profile()
    p.setdefault("meta", {})
    p["meta"].setdefault("schema", "pp.realization.v2")
    p["meta"].setdefault("created_at", datetime.utcnow().isoformat() + "Z")
    p["meta"].setdefault("updated_at", datetime.utcnow().isoformat() + "Z")

    p.setdefault("foundation", {"name": "", "potentials_table": ""})
    p["foundation"].setdefault("name", "")
    p["foundation"].setdefault("potentials_table", "")

    p.setdefault("realization", {})
    p["realization"].setdefault("point_a", "")
    p["realization"].setdefault("point_b", "")
    p["realization"].setdefault("focuses", {
      "focus1": {"title": "", "actions": []},
      "focus2": {"title": "", "actions": []},
      "focus3": {"title": "", "actions": []},
    })
    p["realization"].setdefault("hobbies_selected", [])
    p["realization"].setdefault("weekly_focus", "")
    p["realization"].setdefault("focus_explainer", "")
    p["realization"].setdefault("action_blocks", [
        {"key": "structure", "title": "Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ½Ñ", "items": []},
        {"key": "focus", "title": "Ğ¤Ğ¾ĞºÑƒÑ Ğ½ĞµĞ´ĞµĞ»Ğ¸", "items": []},
        {"key": "growth", "title": "Ğ Ğ¾ÑÑ‚ Ğ¸ Ğ½Ğ°Ğ²Ñ‹ĞºĞ¸", "items": []},
        {"key": "energy", "title": "Ğ­Ğ½ĞµÑ€Ğ³Ğ¸Ñ Ğ¸ Ñ€ĞµÑÑƒÑ€Ñ", "items": []},
    ])
    p["realization"].setdefault("week_start", "")

    p.setdefault("today", {"by_date": {}})
    p["today"].setdefault("by_date", {})

    p.setdefault("library", {})
    p["library"].setdefault("extended_report_md", "")
    p["library"].setdefault("extended_report_updated_at", "")

    return p


# =========================
# Security helpers (PBKDF2)
# =========================
def _pbkdf2_hash(password: str, salt: str) -> str:
    dk = hashlib.pbkdf2_hmac("sha256", password.encode("utf-8"), salt.encode("utf-8"), 200_000)
    return dk.hex()

def make_password(password: str) -> Tuple[str, str]:
    salt = secrets.token_urlsafe(16)
    pw_hash = _pbkdf2_hash(password, salt)
    return salt, pw_hash

def verify_password(password: str, salt: str, pw_hash: str) -> bool:
    return secrets.compare_digest(_pbkdf2_hash(password, salt), pw_hash)


# =========================
# DB helpers
# =========================
def db_get_user_by_email(email: str) -> Optional[dict]:
    r = sb.table(USERS_TABLE).select("*").eq("email", email.lower().strip()).limit(1).execute()
    rows = r.data or []
    return rows[0] if rows else None

def db_create_user(email: str, password: str) -> dict:
    salt, pw_hash = make_password(password)
    r = sb.table(USERS_TABLE).insert({
        "email": email.lower().strip(),
        "salt": salt,
        "pw_hash": pw_hash,
    }).execute()
    return (r.data or [None])[0]

def db_get_profile(user_id: str) -> Optional[dict]:
    r = sb.table(PROFILES_TABLE).select("*").eq("user_id", user_id).limit(1).execute()
    rows = r.data or []
    return rows[0] if rows else None

def db_upsert_profile(user_id: str, data: dict) -> None:
    data = ensure_profile_schema(data)
    data["meta"]["updated_at"] = datetime.utcnow().isoformat() + "Z"
    sb.table(PROFILES_TABLE).upsert({
        "user_id": user_id,
        "data": data,
        "updated_at": datetime.utcnow().isoformat() + "Z",
    }).execute()
    
# =========================
# SPCH CANON (single-file, cached, NO recursion)
# =========================

def _s(x) -> str:
    return (str(x or "").strip())

def norm_pot_name(x: str) -> str:
    s = _s(x)
    s = s.replace("Ñ‘", "Ğµ").replace("Ğ", "Ğ•")
    s = re.sub(r"\s{2,}", " ", s).strip()
    # Title-ish: "Ğ³Ñ€Ğ°Ğ½Ğ°Ñ‚" -> "Ğ“Ñ€Ğ°Ğ½Ğ°Ñ‚"
    return s[:1].upper() + s[1:].lower() if s else s


@st.cache_resource
def load_spch_canon():
    """
    Ğ“Ñ€ÑƒĞ·Ğ¸Ğ¼ ĞºĞ°Ğ½Ğ¾Ğ½ Ğ¾Ğ´Ğ¸Ğ½ Ñ€Ğ°Ğ· Ğ½Ğ° Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ Streamlit.
    Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµĞ¼ 4 dict: POT_CANON_1_3, POT_4_CANON, POT_5_CANON, POT_6_CANON
    """

    # ========= Ğ’Ğ¡Ğ¢ĞĞ’Ğ¬ Ğ¡Ğ®Ğ”Ğ Ğ¢Ğ’ĞĞ˜ Ğ¡Ğ›ĞĞ’ĞĞ Ğ˜ ĞšĞĞĞĞĞ 1:1 =========
    # ĞĞ¸Ğ¶Ğµ Ñ Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ÑÑ ÑƒĞºĞ¾Ñ€Ğ¾Ñ‡ĞµĞ½Ğ½Ñ‹Ğ¹ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½. Ğ¢Ğ« Ğ²ÑÑ‚Ğ°Ğ²Ğ»ÑĞµÑˆÑŒ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ±Ğ»Ğ¾Ğº, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ñ‚Ñ‹ Ğ¿Ñ€Ğ¸ÑĞ»Ğ°Ğ»Ğ°.
    POT_CANON_1_3 = {
        "Ğ¡Ğ°Ğ¿Ñ„Ğ¸Ñ€": {
            "perception": {
                "title": "Ğ¡Ğ°Ğ¿Ñ„Ğ¸Ñ€ â€” 1 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğµ/Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·)",
                "lines": [
                    "ĞšĞ°Ğ½Ğ°Ğ» Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ñ: **Ğ·Ğ²ÑƒĞº / Ğ²Ğ¸Ğ±Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ´ĞµĞ¸**. Ğ’Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· Â«Ğ¿Ñ€Ğ¸ÑĞ»ÑƒÑˆĞ°Ñ‚ÑŒÑÑ Ğº ÑĞµĞ±ĞµÂ».",
                    "ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ **Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ¾ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¸Ğ´ĞµĞ¸/Ñ‚ĞµĞ¾Ñ€Ğ¸Ğ¸/ÑƒĞ±ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ñ/Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ñ**: Â«Ğ·Ğ²ÑƒÑ‡Ğ¸Ñ‚ / Ğ½Ğµ Ğ·Ğ²ÑƒÑ‡Ğ¸Ñ‚Â», Â«Ğ² Ğ½Ğ¾Ñ‚Ñƒ / Ğ½Ğµ Ğ² Ğ½Ğ¾Ñ‚ÑƒÂ».",
                    "Ğ§ÑƒĞ²ÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ´Ğ¸ÑĞ³Ğ°Ñ€Ğ¼Ğ¾Ğ½Ğ¸Ñ ÑĞ¼Ñ‹ÑĞ»Ğ¾Ğ² Ğ¸ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ²Ğ¸Ğ´ĞµÑ‚ÑŒ, **ĞºĞ°ĞºĞ°Ñ Ğ¼Ñ‹ÑĞ»ÑŒ Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚** Ğ¸ ĞºĞ°Ğº ĞµÑ‘ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ.",
                    "ĞŸĞ°Ğ¼ÑÑ‚ÑŒ: **Ğ»ÑƒÑ‡ÑˆĞµ Ğ²ÑĞµĞ³Ğ¾ Ğ·Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°ĞµÑ‚ Ñ‚Ğ¾, Ñ‡Ñ‚Ğ¾ ÑĞ»Ñ‹ÑˆĞ¸Ñ‚**. Ğ›ÑĞ±Ğ¸Ñ‚ Ñ‚Ğ¸ÑˆĞ¸Ğ½Ñƒ, Ğ¼Ğ¾Ğ¶ĞµÑ‚ ÑƒÑÑ‚Ğ°Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ñ‚ ÑˆÑƒĞ¼Ğ°."
                ],
                "intuition": [
                    "Ğ˜Ğ½Ñ‚ÑƒĞ¸Ñ†Ğ¸Ñ: **ÑÑĞ½Ğ¾ÑĞ»Ñ‹ÑˆĞ°Ğ½Ğ¸Ğµ** (ÑĞ»Ñ‹ÑˆĞ°Ñ‚ÑŒ ÑĞµĞ±Ñ/Ğ´ÑƒÑ…).",
                    "Ğ’Ğ°Ğ¶Ğ½Ñ‹Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ Ğ»ÑƒÑ‡ÑˆĞµ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ñ‚ÑŒ Ğ² Ñ‚Ğ¸ÑˆĞ¸Ğ½Ğµ/Ğ½Ğ° Ğ¿Ñ€Ğ¸Ñ€Ğ¾Ğ´Ğµ: Ğ¼ĞµĞ½ÑŒÑˆĞµ ÑˆÑƒĞ¼Ğ° â€” Ğ»ÑƒÑ‡ÑˆĞµ ÑĞ»Ñ‹ÑˆĞ½Ğ¾ ÑĞµĞ±Ñ.",
                ],
            },
            "motivation": {
                "title": "Ğ¡Ğ°Ğ¿Ñ„Ğ¸Ñ€ â€” 2 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ñ†ĞµĞ»ÑŒ/Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ/Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)",
                "lines": [
                    "ĞšĞ»ÑÑ‡ĞµĞ²Ğ°Ñ Ñ†ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ Ñ†ĞµĞ»Ğ¸: **ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ñ‹Ñ… ÑĞ¼Ñ‹ÑĞ»Ğ¾Ğ², Ğ¸Ğ´ĞµĞ¹, Ñ„Ğ¸Ğ»Ğ¾ÑĞ¾Ñ„Ğ¸Ğ¹, ĞºĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ğ¹, Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹ Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ñ** (Ğ¸/Ğ¸Ğ»Ğ¸ Ğ¼ÑƒĞ·Ñ‹ĞºĞ¸).",
                    "Ğ—Ğ°Ñ‡ĞµĞ¼ Ñ‚Ğ²Ğ¾Ñ€Ñ: **Ğ¸Ğ·Ğ¾Ğ±Ñ€ĞµÑÑ‚Ğ¸ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚, Ğ¸Ğ´ĞµÑ, Ñ‚ĞµĞ¾Ñ€Ğ¸Ñ**.",
                    "ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: **Ğ´ÑƒÑ…Ğ¾Ğ²Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ğ²Ğ¾Ğ´Ğ½Ğ¸Ğº / Ğ³ÑƒÑ€Ñƒ / Ğ¿Ğ¾ÑÑ‚ / Ñ„Ğ¸Ğ»Ğ¾ÑĞ¾Ñ„**."
                ]
            },
            "instrument": {
                "title": "Ğ¡Ğ°Ğ¿Ñ„Ğ¸Ñ€ â€” 3 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚/ĞºĞ°Ğº Ğ´ĞµĞ»Ğ°Ñ)",
                "lines": [
                    "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚: **ÑĞ¼Ñ‹ÑĞ»Ğ¾Ğ²Ğ¾Ğµ Ğ¸Ğ·Ğ¾Ğ±Ñ€ĞµÑ‚ĞµĞ½Ğ¸Ğµ** â€” ÑĞ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ Ğ½ĞµĞ´Ğ¾ÑÑ‚Ğ°ÑÑ‰Ğ¸Ğ¹ Ğ¿Ğ°Ğ·Ğ» ÑĞ¼Ñ‹ÑĞ»Ğ° Ğ¿Ğ¾Ğ´ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞºĞ°.",
                    "Ğ¡Ğ»ÑƒÑˆĞ°ĞµÑ‚ ÑĞ¸Ñ‚ÑƒĞ°Ñ†Ğ¸Ñ â†’ Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ½ĞµĞ´Ğ¾ÑÑ‚Ğ°ÑÑ‰ÑƒÑ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ â†’ Ğ´Ğ°Ñ‘Ñ‚ ÑÑĞ½Ğ¾ÑÑ‚ÑŒ/Ğ¸Ğ´ĞµÑ/Ğ¾Ğ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ğµ.",
                    "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹: ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ÑĞ¼Ñ‹ÑĞ»Ğ¾Ğ², ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ´ĞµĞ¹, Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ½Ğ° Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½Ğ¸Ğ¹ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº."
                ]
            }
        },

        "Ğ“ĞµĞ»Ğ¸Ğ¾Ğ´Ğ¾Ñ€": {
            "perception": {
                "title": "Ğ“ĞµĞ»Ğ¸Ğ¾Ğ´Ğ¾Ñ€ â€” 1 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğµ/Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·)",
                "lines": [
                    "ĞšĞ°Ğ½Ğ°Ğ» Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ñ: **Ğ²ĞºÑƒÑ Ğ¸Ğ´ĞµĞ¸**. Ğ’ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· **Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³, ÑĞ¿Ğ¾Ñ€, Ğ¿Ñ€Ğ¾Ğ³Ğ¾Ğ²Ğ°Ñ€Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ**.",
                    "ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ **Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑ/Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ğ¾ÑÑ‚ÑŒ ÑĞ¼Ñ‹ÑĞ»Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ°**: Ğ·Ğ°Ğ¹Ğ´Ñ‘Ñ‚/Ğ½Ğµ Ğ·Ğ°Ğ¹Ğ´Ñ‘Ñ‚, ÑĞ¼ĞµÑˆĞ½Ğ¾/Ğ½Ğµ ÑĞ¼ĞµÑˆĞ½Ğ¾, Ğ±ÑƒĞ´ĞµÑ‚ Ğ»Ğ¸ ÑĞ¿Ñ€Ğ¾Ñ.",
                    "ĞŸĞ°Ğ¼ÑÑ‚ÑŒ: Ğ·Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°ĞµÑ‚ Ñ‡ĞµÑ€ĞµĞ· **Ğ¿Ñ€Ğ¾Ğ³Ğ¾Ğ²Ğ°Ñ€Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ**, Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ĞµĞ½Ğ¸Ğµ, Ñ€Ğ°ÑÑĞºĞ°Ğ·."
                ],
                "intuition": [
                    "Ğ˜Ğ½Ñ‚ÑƒĞ¸Ñ†Ğ¸Ñ Ğ² Ğ³Ğ¾Ğ»Ğ¾ÑĞµ: Ğ¾Ğ±ÑÑƒĞ¶Ğ´Ğ°Ğ¹/Ñ€Ğ°ÑÑÑƒĞ¶Ğ´Ğ°Ğ¹ Ğ²ÑĞ»ÑƒÑ… â€” Ñ‚Ğ°Ğº Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑÑ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚.",
                    "ĞŸÑ€Ğ°ĞºÑ‚Ğ¸ĞºĞ°: Ğ·Ğ°Ğ´Ğ°Ñ‘ÑˆÑŒ Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ â†’ Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµÑˆÑŒ Ñ€Ğ°ÑÑÑƒĞ¶Ğ´Ğ°Ñ‚ÑŒ Ğ²ÑĞ»ÑƒÑ… (Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¾Ğ´Ğ¸Ğ½) â†’ Ñ‡ĞµÑ€ĞµĞ· Ğ³Ğ¾Ğ»Ğ¾Ñ Ğ¿Ñ€Ğ¸Ñ…Ğ¾Ğ´Ğ¸Ñ‚ ÑÑĞ½Ğ¾ÑÑ‚ÑŒ."
                ]
            },
            "motivation": {
                "title": "Ğ“ĞµĞ»Ğ¸Ğ¾Ğ´Ğ¾Ñ€ â€” 2 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ñ†ĞµĞ»ÑŒ/Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ/Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)",
                "lines": [
                    "ĞšĞ»ÑÑ‡ĞµĞ²Ğ°Ñ Ñ†ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ Ñ†ĞµĞ»Ğ¸: **Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ğ¾ÑÑ‚ÑŒ, Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°Ğ½Ğ¸Ğµ, Ñ€Ğ°ÑĞ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ·Ğ½Ğ°Ğ½Ğ¸Ğ¹/ÑĞ¼Ñ‹ÑĞ»Ğ¾Ğ²**.",
                    "Ğ¡Ğ¸Ğ»ÑŒĞ½Ğ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ: ÑÑ†ĞµĞ½Ğ°/ÑĞ¾Ñ†ÑĞµÑ‚Ğ¸/Ğ¾Ñ€Ğ°Ñ‚Ğ¾Ñ€ÑÑ‚Ğ²Ğ¾/Ğ¿ĞµĞ½Ğ¸Ğµ â€” ĞµÑĞ»Ğ¸ Ğ½Ğµ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·ÑƒĞµÑ‚ÑÑ, Ğ¼Ğ¾Ğ¶ĞµÑ‚ Â«Ğ²Ñ‹Ğ³Ğ¾Ğ²Ğ°Ñ€Ğ¸Ğ²Ğ°Ñ‚ÑŒÑÑÂ» Ğ½Ğ° Ğ±Ğ»Ğ¸Ğ·ĞºĞ¸Ñ….",
                    "ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: **ÑÑ€ĞºĞ¸Ğ¹ Ğ³Ğ¾Ğ»Ğ¾Ñ / Ğ´Ğ¸ĞºÑ‚Ğ¾Ñ€ / ÑĞ¼Ñ‹ÑĞ»Ğ¾Ğ²Ğ¾Ğ¹ Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ‚Ğ¾Ñ€ / Ğ¿ĞµĞ²ĞµÑ† / Ğ¾Ñ€Ğ°Ñ‚Ğ¾Ñ€**."
                ]
            },
            "instrument": {
                "title": "Ğ“ĞµĞ»Ğ¸Ğ¾Ğ´Ğ¾Ñ€ â€” 3 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚/ĞºĞ°Ğº Ğ´ĞµĞ»Ğ°Ñ)",
                "lines": [
                    "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚: **Ğ¿Ñ€Ğ¾Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ ÑĞ¼Ñ‹ÑĞ»Ğ¾Ğ² Ğ¸ Ğ·Ğ½Ğ°Ğ½Ğ¸Ğ¹ Ñ‡ĞµÑ€ĞµĞ· Ğ³Ğ¾Ğ»Ğ¾Ñ**.",
                    "ĞĞ°Ğ²Ñ‹ĞºĞ¸: Ğ¿Ñ€Ğ¸Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸, Ğ¿Ğ¾Ğ²Ñ‹ÑˆĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ¸Ğ´ĞµĞ¹, Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞºĞ° Ñ‡ĞµÑ€ĞµĞ· Ñ€ĞµÑ‡ÑŒ/Ğ¿Ğ¾Ğ´Ğ°Ñ‡Ñƒ.",
                    "ĞŸĞ¾Ğ¼Ğ¾Ğ³Ğ°ĞµÑ‚ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… Ğ±Ğ¾Ğ»ĞµĞµ Ğ·Ğ°Ğ¼ĞµÑ‚Ğ½Ñ‹Ğ¼Ğ¸: Ñ„Ğ¸ÑˆĞºĞ¸ Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ğ¾ÑÑ‚Ğ¸, Ğ²Ğ¾Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ, Ğ¸Ğ¼Ğ¿Ñ€Ğ¾Ğ²Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ."
                ]
            }
        },

        "ĞĞ¼ĞµÑ‚Ğ¸ÑÑ‚": {
            "perception": {
                "title": "ĞĞ¼ĞµÑ‚Ğ¸ÑÑ‚ â€” 1 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğµ/Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·)",
                "lines": [
                    "ĞšĞ°Ğ½Ğ°Ğ» Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ñ: **Ğ·Ğ°Ğ¿Ğ°Ñ… / Ñ…Ğ¸Ğ¼Ğ¸Ñ Ğ¸Ğ´ĞµĞ¸** (ÑÑĞ½Ğ¾Ğ·Ğ½Ğ°Ğ½Ğ¸Ğµ). Â«Ğ¯ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ·Ğ½Ğ°ÑÂ».",
                    "ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ **ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ Ğ·Ğ½Ğ°Ğ½Ğ¸Ğ¹/Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ñ/Ğ¸Ğ´ĞµĞ¸** Ğ¿Ğ¾Ğ´ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½ÑƒÑ ÑĞ¸Ñ‚ÑƒĞ°Ñ†Ğ¸Ñ, Ñ†ĞµĞ»ÑŒ, Ğ²Ñ€ĞµĞ¼Ñ.",
                    "Ğ’Ğ¸Ğ´Ğ¸Ñ‚ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹ Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸: Ğº Ñ‡ĞµĞ¼Ñƒ Ğ¿Ñ€Ğ¸Ğ²ĞµĞ´Ñ‘Ñ‚ Ğ¿ÑƒÑ‚ÑŒ Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ñ, ĞºĞ°Ğº Â«ÑƒĞ¿Ğ°ĞºĞ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸Ğ´ĞµÑÂ», Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ĞµÑ‘ ĞºÑƒĞ¿Ğ¸Ğ»Ğ¸.",
                    "ĞŸĞ°Ğ¼ÑÑ‚ÑŒ: ÑĞ¸Ğ»ÑŒĞ½Ğ°Ñ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ Ğ½Ğ° Ğ·Ğ°Ğ¿Ğ°Ñ…Ğ¸, Ğ¾Ğ±Ğ¾Ğ½ÑÑ‚ĞµĞ»ÑŒĞ½Ğ¾Ğµ Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğµ."
                ],
                "intuition": [
                    "Ğ˜Ğ½Ñ‚ÑƒĞ¸Ñ†Ğ¸Ñ = Ğ¾Ğ±Ğ¾Ğ½ÑĞ½Ğ¸Ğµ (Ñ‚Ñ€ĞµÑ‚Ğ¸Ğ¹ Ğ³Ğ»Ğ°Ğ·): Ñƒ Ğ»ÑĞ±Ğ¾Ğ¹ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸ ĞµÑÑ‚ÑŒ ÑĞ²Ğ¾Ğ¹ Â«Ğ·Ğ°Ğ¿Ğ°Ñ…Â».",
                    "ĞŸÑ€Ğ°ĞºÑ‚Ğ¸ĞºĞ°: Ğ¼ĞµÑÑ‚Ğ¾/Ğ»ÑĞ´Ğ¸/Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ â€” ĞµÑĞ»Ğ¸ Â«Ğ·Ğ°Ğ¿Ğ°Ñ… Ğ½Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑÑÂ», Ğ·Ğ½Ğ°Ñ‡Ğ¸Ñ‚ Ñ‚ÑƒĞ´Ğ°."
                ]
            },
            "motivation": {
                "title": "ĞĞ¼ĞµÑ‚Ğ¸ÑÑ‚ â€” 2 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ñ†ĞµĞ»ÑŒ/Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ/Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)",
                "lines": [
                    "ĞšĞ»ÑÑ‡ĞµĞ²Ğ°Ñ Ñ†ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ Ñ†ĞµĞ»Ğ¸: **Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ° ÑĞ¼Ñ‹ÑĞ»Ğ¾Ğ², Ñ‚Ğ°Ğ¹Ğ½Ğ¾Ğµ Ğ·Ğ½Ğ°Ğ½Ğ¸Ğµ, Ğ²Ğ»Ğ°ÑÑ‚ÑŒ Ğ½Ğ°Ğ´ Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸ĞµĞ¼/Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸ĞµĞ¼**.",
                    "ĞœĞ¾Ñ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµÑ‚: Ğ·Ğ½Ğ°Ğ½Ğ¸Ñ, ÑĞµĞºÑ€ĞµÑ‚Ğ½Ğ°Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ, Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼Ñ‹ Ğ²Ğ»Ğ¸ÑĞ½Ğ¸Ñ (Ğ² ÑĞ²ĞµÑ‚Ğ»Ğ¾Ğ¼ ĞºĞ»ÑÑ‡Ğµ â€” Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°Ñ‚ÑŒ Ğ¼ĞµĞ½ÑÑ‚ÑŒ Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ğµ).",
                    "ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: **Ğ¼Ğ¸ÑÑ‚Ğ¸ĞºĞ°/Ğ¸Ğ½Ñ‚Ñ€Ğ¸Ğ³Ğ°/Ñ‚Ğ°Ğ¹Ğ½Ñ‹/ÑĞ°ĞºÑ€Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ°Ñ‚Ğ¼Ğ¾ÑÑ„ĞµÑ€Ğ°** (ÑˆĞºĞ¾Ğ»Ğ° Ğ·Ğ½Ğ°Ğ½Ğ¸Ğ¹, ÑĞ·Ğ¾Ñ‚ĞµÑ€Ğ¸ĞºĞ° ĞºĞ°Ğº Ğ¾Ğ±Ğ¾Ğ»Ğ¾Ñ‡ĞºĞ°)."
                ]
            },
            "instrument": {
                "title": "ĞĞ¼ĞµÑ‚Ğ¸ÑÑ‚ â€” 3 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚/ĞºĞ°Ğº Ğ´ĞµĞ»Ğ°Ñ)",
                "lines": [
                    "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚: **ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸ĞµĞ¼** â€” ÑĞ»Ğ¾Ğ²Ğ°/ÑĞ¼Ñ‹ÑĞ»Ñ‹/ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹.",
                    "Ğ’Ğ¾Ñ€Ğ¾Ğ½ĞºĞ¸ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶ Ğ¸Ğ´ĞµĞ¹, Ñ€Ğ°ÑĞ¿ÑƒÑ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ ÑƒĞ·Ğ»Ğ¾Ğ² ÑƒĞ±ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğ¹, Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾Ğ´ Ñ†ĞµĞ»ÑŒ.",
                    "Ğ¡Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚/ÑĞ»Ğ¾Ğ²Ğ¾: ĞºĞ¾Ğ³Ğ´Ğ° Ğ¸ ĞºĞ°ĞºĞ¸Ğµ ÑĞ»Ğ¾Ğ²Ğ° ÑĞºĞ°Ğ·Ğ°Ñ‚ÑŒ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ñ‚Ñ€Ğ°ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ."
                ]
            }
        },

        "Ğ˜Ğ·ÑƒĞ¼Ñ€ÑƒĞ´": {
            "perception": {
                "title": "Ğ˜Ğ·ÑƒĞ¼Ñ€ÑƒĞ´ â€” 1 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğµ/Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·)",
                "lines": [
                    "ĞšĞ°Ğ½Ğ°Ğ» Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ñ: **Ğ²Ğ¸Ğ·ÑƒĞ°Ğ» + Ğ¿ĞµÑ€ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¹** (ÑĞ¼Ğ¿Ğ°Ñ‚Ğ¸Ñ).",
                    "ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ¾ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ½Ğ¾ÑÑ‚ÑŒ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¸: Ğ³Ğ°Ñ€Ğ¼Ğ¾Ğ½Ğ¸Ñ/Ğ´Ğ¸ÑĞ³Ğ°Ñ€Ğ¼Ğ¾Ğ½Ğ¸Ñ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¹, Â«ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¸ ĞºĞ°Ğº ĞºÑ€Ğ°ÑĞºĞ¸Â».",
                    "ĞŸĞ°Ğ¼ÑÑ‚ÑŒ: Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ â€” Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ·Ğ°Ğ¿Ğ¾Ğ¼Ğ½Ğ¸Ñ‚ÑŒ, Ğ½ÑƒĞ¶Ğ½Ğ¾ ÑƒĞ²Ğ¸Ğ´ĞµÑ‚ÑŒ (Ñ†Ğ²ĞµÑ‚Ğ°, ÑĞ¾Ñ‡ĞµÑ‚Ğ°Ğ½Ğ¸Ñ)."
                ],
                "intuition": [
                    "Ğ˜Ğ½Ñ‚ÑƒĞ¸Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¸: Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹ â†’ Ğ¿Ğ¾Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¸ â†’ Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°Ñ‚ÑŒ Ñ‚Ğ°Ğ¼, Ğ³Ğ´Ğµ Ğ¿Ğ¾Ğ´ÑŠÑ‘Ğ¼/Ğ¿Ñ€Ğ¸ÑÑ‚Ğ½Ğ¾."
                ]
            },
            "motivation": {
                "title": "Ğ˜Ğ·ÑƒĞ¼Ñ€ÑƒĞ´ â€” 2 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ñ†ĞµĞ»ÑŒ/Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ/Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)",
                "lines": [
                    "ĞšĞ»ÑÑ‡ĞµĞ²Ğ°Ñ Ñ†ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ Ñ†ĞµĞ»Ğ¸: **ĞºÑ€Ğ°ÑĞ¾Ñ‚Ğ°, ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ³Ğ°Ñ€Ğ¼Ğ¾Ğ½Ğ¸Ñ, ÑÑ‡Ğ°ÑÑ‚ÑŒĞµ, Ğ¸ÑÑ†ĞµĞ»ĞµĞ½Ğ¸Ğµ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¹**.",
                    "ĞœĞ¾Ñ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµÑ‚: Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ»ÑĞ´ĞµĞ¹ ÑÑ‡Ğ°ÑÑ‚Ğ»Ğ¸Ğ²ĞµĞµ, Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑÑ‚ÑŒ ĞºÑ€Ğ°ÑĞºĞ¸, ÑƒĞ»ÑƒÑ‡ÑˆĞ°Ñ‚ÑŒ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ, ÑĞ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ ÑĞºĞ¾Ğ»Ğ¾Ğ³Ğ¸Ñ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¹.",
                    "ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: Ğ½ĞµĞ¶Ğ½Ğ¾ÑÑ‚ÑŒ/Ñ€Ğ¾Ğ¼Ğ°Ğ½Ñ‚Ğ¸Ğ·Ğ¼/ÑÑÑ‚ĞµÑ‚Ğ¸ĞºĞ°, Ñ‡ÑƒĞ²ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ ĞºÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğ¹ Ğ¾Ğ±Ñ€Ğ°Ğ·."
                ]
            },
            "instrument": {
                "title": "Ğ˜Ğ·ÑƒĞ¼Ñ€ÑƒĞ´ â€” 3 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚/ĞºĞ°Ğº Ğ´ĞµĞ»Ğ°Ñ)",
                "lines": [
                    "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚: **ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¸Ğ·Ğ¾Ğ±Ñ€ĞµÑ‚ĞµĞ½Ğ¸Ğµ** â€” ÑĞ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ/Ğ¿ĞµÑ€ĞµĞ»Ğ¸Ğ²Ğ°Ñ‚ÑŒ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¸, ĞºÑ€Ğ°ÑĞ¾Ñ‚Ñƒ, Ğ°Ñ‚Ğ¼Ğ¾ÑÑ„ĞµÑ€Ñƒ.",
                    "Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ñ‹ ĞºÑ€Ğ°ÑĞ¾Ñ‚Ñ‹/ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¹, ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¹, Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ĞºÑ€Ğ°ÑĞ¾Ñ‚Ğµ/ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°Ğ¼.",
                    "ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ°: Ğ½ĞµĞ¹Ñ€Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ° (ĞµÑĞ»Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ² Ğ¼ĞµÑ‚Ğ¾Ğ´Ğµ)."
                ]
            }
        },

        "Ğ“Ñ€Ğ°Ğ½Ğ°Ñ‚": {
            "perception": {
                "title": "Ğ“Ñ€Ğ°Ğ½Ğ°Ñ‚ â€” 1 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğµ/Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·)",
                "lines": [
                    "ĞšĞ°Ğ½Ğ°Ğ» Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ñ: **Ğ¼Ğ¸Ğ¼Ğ¸ĞºĞ° / Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¹** (Ñ‚ĞµĞ»Ğ¾ Ğ¾Ñ‚Ñ€Ğ°Ğ¶Ğ°ĞµÑ‚ ÑĞ¼Ğ¾Ñ†Ğ¸Ñ).",
                    "ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑ Ğº ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¼Ñƒ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ñƒ: ÑĞ¿Ñ€Ğ¾Ñ, Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ğ¾ÑÑ‚ÑŒ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¸/ĞºÑ€Ğ°ÑĞ¾Ñ‚Ñ‹/Ğ¸ÑĞºÑƒÑÑÑ‚Ğ²Ğ°.",
                    "ĞŸĞ°Ğ¼ÑÑ‚ÑŒ: ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¸ Ğ¸ Ñ€Ğ¾Ğ»Ğ¸ â€” Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ·Ğ°Ğ¿Ğ¾Ğ¼Ğ½Ğ¸Ñ‚ÑŒ, Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ÑÑ‚ÑŒ/Ğ¾Ñ‚Ñ‹Ğ³Ñ€Ñ‹Ğ²Ğ°Ñ‚ÑŒ."
                ],
                "intuition": [
                    "Ğ˜Ğ½Ñ‚ÑƒĞ¸Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· Ğ¼Ğ¸Ğ¼Ğ¸ĞºÑƒ/Ğ¸Ğ³Ñ€Ñƒ: Ğ¿Ñ€Ğ¾Ğ¸Ğ³Ñ€Ğ°Ñ‚ÑŒ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ â†’ ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ½Ğ° Ğ¼Ğ¸Ğ¼Ğ¸Ñ‡ĞµÑĞºÑƒÑ Ñ€ĞµĞ°ĞºÑ†Ğ¸Ñ Ñ‚ĞµĞ»Ğ°."
                ]
            },
            "motivation": {
                "title": "Ğ“Ñ€Ğ°Ğ½Ğ°Ñ‚ â€” 2 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ñ†ĞµĞ»ÑŒ/Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ/Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)",
                "lines": [
                    "ĞšĞ»ÑÑ‡ĞµĞ²Ğ°Ñ Ñ†ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ Ñ†ĞµĞ»Ğ¸: **ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¸, Ñ‚ĞµĞ°Ñ‚Ñ€, ĞºÑ€Ğ°ÑĞ¾Ñ‚Ğ°, Ğ¼ĞµÑ€Ğ¾Ğ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ñ, Ñ€Ğ°ÑĞ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¹**.",
                    "Ğ“Ğ´Ğµ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ: Ğ°ĞºÑ‚Ñ‘Ñ€ÑÑ‚Ğ²Ğ¾, ÑÑ†ĞµĞ½Ñ‹, Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ ĞºÑ€Ğ°ÑĞ¾Ñ‚Ñ‹/ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¾Ğ².",
                    "ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: ÑÑ€ĞºĞ¸Ğµ Ñ€Ğ¾Ğ»Ğ¸, ÑĞºÑĞ¿Ñ€ĞµÑÑĞ¸Ñ, Ğ±Ñ€Ğ¾ÑĞºĞ¸Ğµ Ğ¾Ğ±Ñ€Ğ°Ğ·Ñ‹, ÑĞ¼Ğ¾Ñ†Ğ¸Ñ Ğ² ĞºĞ°Ğ´Ñ€Ğµ."
                ]
            },
            "instrument": {
                "title": "Ğ“Ñ€Ğ°Ğ½Ğ°Ñ‚ â€” 3 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚/ĞºĞ°Ğº Ğ´ĞµĞ»Ğ°Ñ)",
                "lines": [
                    "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚: **Ğ¼Ğ¸Ğ¼Ğ¸ĞºĞ° / Ñ€Ğ¾Ğ»ÑŒ / Ğ°ĞºÑ‚Ñ‘Ñ€ÑĞºĞ°Ñ Ğ¿Ğ¾Ğ´Ğ°Ñ‡Ğ°** â€” Ğ²Ñ‹Ñ€Ğ°Ğ¶Ğ°Ñ‚ÑŒ ÑĞ¼Ğ¾Ñ†Ğ¸Ñ Ğ¸ Ğ²Ğ¾Ğ²Ğ»ĞµĞºĞ°Ñ‚ÑŒ Ğ»ÑĞ´ĞµĞ¹.",
                    "ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¾Ğ², ÑĞ±Ğ¾Ñ€ Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸ Ğ²Ğ¾ĞºÑ€ÑƒĞ³ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¹.",
                    "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹: Ñ€ÑĞ´Ğ¾Ğ¼ Â«ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¾Â»."
                ]
            }
        },

        "Ğ ÑƒĞ±Ğ¸Ğ½": {
            "perception": {
                "title": "Ğ ÑƒĞ±Ğ¸Ğ½ â€” 1 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğµ/Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·)",
                "lines": [
                    "ĞšĞ°Ğ½Ğ°Ğ» Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ñ: **Ğ³Ğ¾Ñ€Ğ¼Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¾Ñ‚ĞºĞ»Ğ¸Ğº / Ğ²Ğ¾Ğ·Ğ±ÑƒĞ¶Ğ´Ğ°ĞµÑ‚â€“Ğ½Ğµ Ğ²Ğ¾Ğ·Ğ±ÑƒĞ¶Ğ´Ğ°ĞµÑ‚** (Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½Ğ¸Ğµ Ñ„Ğ¸Ğ·Ğ¸Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑÑ‹).",
                    "ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ²Ğ°ĞµĞ¼Ğ¾ÑÑ‚ÑŒ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¸, Ğ´Ñ€Ğ°Ğ¼Ñƒ, ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ñ€ĞµĞ°ĞºÑ†Ğ¸Ğ¹.",
                    "ĞŸĞ¾Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚, Ğ³Ğ´Ğµ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¹ Ğ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾, Ğ³Ğ´Ğµ Ğ½ÑƒĞ¶Ğ½Ğ¾ ÑƒÑĞ¸Ğ»Ğ¸Ñ‚ÑŒ."
                ],
                "intuition": [
                    "Ğ˜Ğ½Ñ‚ÑƒĞ¸Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· Ğ³Ğ¾Ñ€Ğ¼Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¾Ñ‚ĞºĞ»Ğ¸Ğº: Â«Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾ĞµÂ» Ğ´Ğ°Ñ‘Ñ‚ ÑĞ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½Ğ¸Ğ¹ Ğ²ÑĞ¿Ğ»ĞµÑĞº/Ğ°Ğ´Ñ€ĞµĞ½Ğ°Ğ»Ğ¸Ğ½/Ğ¶ĞµĞ»Ğ°Ğ½Ğ¸Ğµ."
                ]
            },
            "motivation": {
                "title": "Ğ ÑƒĞ±Ğ¸Ğ½ â€” 2 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ñ†ĞµĞ»ÑŒ/Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ/Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)",
                "lines": [
                    "ĞšĞ»ÑÑ‡ĞµĞ²Ğ°Ñ Ñ†ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ Ñ†ĞµĞ»Ğ¸: **ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¸, Ğ°Ğ´Ñ€ĞµĞ½Ğ°Ğ»Ğ¸Ğ½, ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¼Ğ¾Ñ†Ğ¸ÑĞ¼Ğ¸, ÑĞµĞºÑ/Ğ³Ğ¾Ñ€Ğ¼Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ²ÑĞ¿Ğ»ĞµÑĞºĞ¸**.",
                    "Ğ“Ğ´Ğµ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ: ÑˆĞ¾Ñƒ/Ğ¿ÑƒÑ‚ĞµÑˆĞµÑÑ‚Ğ²Ğ¸Ñ/ÑĞºÑÑ‚Ñ€Ğ¸Ğ¼/Ñ€ĞµĞ¶Ğ¸ÑÑÑƒÑ€Ğ°/ĞºĞ¸Ğ½Ğ¾/Ğ´Ñ€Ğ°Ğ¹Ğ²Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñ‹.",
                    "ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: ÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğ°, Ğ´Ñ€Ğ°Ğ¹Ğ², ÑĞµĞºÑÑƒĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ, Ğ¿ÑƒÑ‚ĞµÑˆĞµÑÑ‚Ğ²Ğ¸Ñ, ÑĞºÑÑ‚Ñ€Ğ¸Ğ¼."
                ]
            },
            "instrument": {
                "title": "Ğ ÑƒĞ±Ğ¸Ğ½ â€” 3 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚/ĞºĞ°Ğº Ğ´ĞµĞ»Ğ°Ñ)",
                "lines": [
                    "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚: **Ğ´Ñ€Ğ°Ğ¼Ğ°Ñ‚ÑƒÑ€Ğ³Ğ¸Ñ Ğ¸ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¼Ğ¾Ñ†Ğ¸ÑĞ¼Ğ¸** (ÑĞ²Ğ¾Ğ¸Ğ¼Ğ¸ Ğ¸ Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸).",
                    "Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ Ñ‚Ñ€Ğ°Ğ²Ğ¼Ğ°Ğ¼Ğ¸ (Ğ·Ğ°Ğ¼ĞµÑ‰ĞµĞ½Ğ¸Ğµ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¹), ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¹ Ñ‚Ğ¾Ğ»Ğ¿Ñ‹, Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸ Ñ‡ĞµÑ€ĞµĞ· ÑĞ¼Ğ¾Ñ†Ğ¸Ñ.",
                    "Ğ ĞµĞ¶Ğ¸ÑÑÑƒÑ€Ğ°/ÑˆĞ¾Ñƒ/Ğ²ĞµĞ±Ğ¸Ğ½Ğ°Ñ€Ñ‹/ÑÑ‚Ğ¾Ñ€Ğ¸Ñ ĞºĞ°Ğº ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¿Ğ¾Ğ´Ğ°Ñ‡Ğ°."
                ]
            }
        },

        "Ğ¯Ğ½Ñ‚Ğ°Ñ€ÑŒ": {
            "perception": {
                "title": "Ğ¯Ğ½Ñ‚Ğ°Ñ€ÑŒ â€” 1 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğµ/Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·)",
                "lines": [
                    "ĞšĞ°Ğ½Ğ°Ğ» Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ñ: **Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼ / Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½Ğ¸Ğµ Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸Ñ Ñ‚ĞµĞ»Ğ° (Ğ–ĞšĞ¢)** â€” ĞºĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚/Ğ´Ğ¸ÑĞºĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚.",
                    "ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ¾ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ½Ğ¾ÑÑ‚ÑŒ Ñ„Ğ¸Ğ·Ğ¸ĞºĞ¸: Ñ‚ĞµĞ»Ğ¾ ĞºĞ°Ğº Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼, Ñ‚ĞµÑ…Ğ½Ğ¸ĞºĞ°, ÑÑ…ĞµĞ¼Ñ‹ â€” Ñ‡Ñ‚Ğ¾ ÑĞ»Ğ¾Ğ¼Ğ°Ğ½Ğ¾ Ğ¸ ĞºĞ°Ğº Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ.",
                    "Ğ›ÑĞ±Ğ¸Ñ‚ Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº/ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ: Ñ‡Ğ¸ÑÑ‚Ğ¾/Ğ³Ñ€ÑĞ·Ğ½Ğ¾, Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚/Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚.",
                    "ĞŸĞ°Ğ¼ÑÑ‚ÑŒ: Ğ»ÑƒÑ‡ÑˆĞµ Ñ‡ĞµÑ€ĞµĞ· ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ â€” ĞºĞ¾Ğ½ÑĞ¿ĞµĞºÑ‚Ñ‹, Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹, Ñ€Ğ°Ğ·Ğ¶Ñ‘Ğ²Ğ°Ğ½Ğ½Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°."
                ],
                "intuition": [
                    "Ğ˜Ğ½Ñ‚ÑƒĞ¸Ñ†Ğ¸Ñ Ğ² Ğ¶Ğ¸Ğ²Ğ¾Ñ‚Ğµ: Ñ‚ĞµĞ»Ğ¾ Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°ĞµÑ‚ ĞºĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚Ğ¾Ğ¼/Ğ´Ğ¸ÑĞºĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚Ğ¾Ğ¼.",
                    "ĞŸÑ€Ğ°ĞºÑ‚Ğ¸ĞºĞ° Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ°: ÑÑ‚Ğ¾ÑÑ‚ÑŒ Ğ½Ğ° Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ğ°Ñ… (Ğ»Ğ¸ÑÑ‚ĞºĞ°Ñ…) Ğ¸ ÑÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ñ‚ĞµĞ»ĞµÑĞ½Ñ‹Ğ¹ Ğ¾Ñ‚ĞºĞ»Ğ¸Ğº."
                ]
            },
            "motivation": {
                "title": "Ğ¯Ğ½Ñ‚Ğ°Ñ€ÑŒ â€” 2 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ñ†ĞµĞ»ÑŒ/Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ/Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)",
                "lines": [
                    "ĞšĞ»ÑÑ‡ĞµĞ²Ğ°Ñ Ñ†ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ Ñ†ĞµĞ»Ğ¸: **ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼Ğ¾Ğ²/ÑĞ¸ÑÑ‚ĞµĞ¼** (Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ»Ğ¾ Â«ĞºĞ°Ğº Ñ‡Ğ°ÑÑ‹Â»).",
                    "Ğ¢Ğ²Ğ¾Ñ€Ñ‡ĞµÑÑ‚Ğ²Ğ¾: Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ğ¸, Ñ‚ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ»Ğ¸Ñ‚ĞµÑ€Ğ°Ñ‚ÑƒÑ€Ğ° Â«Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ Ğº Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸ÑÂ», Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ/ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹.",
                    "ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: ÑƒÑ‡Ñ‘Ğ½Ñ‹Ğ¹/Ğ½Ğ°ÑÑ‚Ğ°Ğ²Ğ½Ğ¸Ğº/Ğ¸Ğ·Ğ¾Ğ±Ñ€ĞµÑ‚Ğ°Ñ‚ĞµĞ»ÑŒ, Ğ²ÑÑ‘ Ğ¿Ğ¾ Ğ¿Ğ¾Ğ»Ğ¾Ñ‡ĞºĞ°Ğ¼."
                ]
            },
            "instrument": {
                "title": "Ğ¯Ğ½Ñ‚Ğ°Ñ€ÑŒ â€” 3 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚/ĞºĞ°Ğº Ğ´ĞµĞ»Ğ°Ñ)",
                "lines": [
                    "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚: **Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¸Ğ·Ğ¾Ğ±Ñ€ĞµÑ‚ĞµĞ½Ğ¸Ğµ** â€” Ñ€ÑƒĞºĞ¸/ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾/ÑĞ¸ÑÑ‚ĞµĞ¼.",
                    "Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ñ‹ Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼Ğ¾Ğ², Ğ´ĞµÑ‚Ğ°Ğ»ĞµĞ¹, Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ¾Ğ².",
                    "ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: Ğ¼Ğ°ÑÑĞ°Ğ¶/Ğ¾ÑÑ‚ĞµĞ¾Ğ¿Ğ°Ñ‚Ğ¸Ñ/Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ€ÑƒĞºĞ°Ğ¼Ğ¸ â€” ĞºĞ°Ğº Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ (ĞµÑĞ»Ğ¸ Ğ² Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¸ĞºĞµ Ñ‚Ğ°Ğº Ñ‚Ñ€Ğ°ĞºÑ‚ÑƒĞµÑ‚ÑÑ)."
                ]
            }
        },

        "Ğ¨ÑƒĞ½Ğ³Ğ¸Ñ‚": {
            "perception": {
                "title": "Ğ¨ÑƒĞ½Ğ³Ğ¸Ñ‚ â€” 1 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğµ/Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·)",
                "lines": [
                    "ĞšĞ°Ğ½Ğ°Ğ» Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ñ: **Ñ„Ğ¾Ñ€Ğ¼Ğ° / Ğ¿Ğ»Ğ¾Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ / Ğ¼Ñ‹ÑˆÑ†Ñ‹** (Ñ€ĞµĞ°ĞºÑ†Ğ¸Ñ Ğ¼Ñ‹ÑˆÑ†: Ğ½Ğ°Ğ¿Ñ€ÑĞ¶ĞµĞ½Ğ¸Ğµ/Ñ€Ğ°ÑÑĞ»Ğ°Ğ±Ğ»ĞµĞ½Ğ¸Ğµ).",
                    "ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ Ñ„Ğ¾Ñ€Ğ¼Ñƒ Ğ¸ Â«Ğ¾Ñ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»â€“Ğ¿Ğ¾Ğ´Ğ´ĞµĞ»ĞºĞ°Â», ÑĞ¿Ñ€Ğ¾Ñ Ğ½Ğ° Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ñ‹ (Ñ‡Ñ‚Ğ¾ Ğ·Ğ°Ğ¹Ğ´Ñ‘Ñ‚).",
                    "Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞµĞµ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğµ Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ğµ (3D/Ğ»Ğ°Ğ½Ğ´ÑˆĞ°Ñ„Ñ‚/Ñ„Ğ¾Ñ€Ğ¼Ğ°).",
                    "ĞŸĞ°Ğ¼ÑÑ‚ÑŒ: Ñ‡ĞµÑ€ĞµĞ· **Ñ„Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ** Ğ¸ Ğ¼Ğ½Ğ¾Ğ³Ğ¾ĞºÑ€Ğ°Ñ‚Ğ½Ğ¾Ğµ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ĞµĞ½Ğ¸Ğµ."
                ],
                "intuition": [
                    "Ğ˜Ğ½Ñ‚ÑƒĞ¸Ñ†Ğ¸Ñ Ğ² Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¸/Ğ¼Ñ‹ÑˆÑ†Ğ°Ñ…: Ñ‚ĞµĞ»Ğ¾ Ñ‚ÑĞ½ĞµÑ‚ Ñ‚ÑƒĞ´Ğ°, Ğ³Ğ´Ğµ Â«Ğ¼Ğ¾Ñ‘Â», Ğ¸ Ğ»ĞµĞ½Ğ¸Ñ‚ÑÑ Ñ‚Ğ°Ğ¼, Ğ³Ğ´Ğµ Ğ½Ğµ Ğ¿ÑƒÑ‚ÑŒ.",
                    "ĞŸÑ€Ğ°ĞºÑ‚Ğ¸ĞºĞ° Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ°: Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ³Ğ»Ğ°Ğ·Ğ°, Ğ¿Ñ€Ğ¾ĞºÑ€ÑƒÑ‚Ğ¸Ñ‚ÑŒÑÑ Ğ¸ Ğ¿Ğ¾Ğ¹Ñ‚Ğ¸ Ñ‚ÑƒĞ´Ğ°, ĞºÑƒĞ´Ğ° Ğ²ĞµĞ´Ñ‘Ñ‚ Ñ‚ĞµĞ»Ğ¾."
                ]
            },
            "motivation": {
                "title": "Ğ¨ÑƒĞ½Ğ³Ğ¸Ñ‚ â€” 2 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ñ†ĞµĞ»ÑŒ/Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ/Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)",
                "lines": [
                    "ĞšĞ»ÑÑ‡ĞµĞ²Ğ°Ñ Ñ†ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ Ñ†ĞµĞ»Ğ¸: **ÑĞ¾Ğ¾Ğ±Ñ‰ĞµÑÑ‚Ğ²Ğ¾ / Ğ±Ğ»Ğ¸Ğ·ĞºĞ¸Ğ¹ ĞºÑ€ÑƒĞ³ / Ñ„Ğ¾Ñ€Ğ¼Ğ°/Ñ„Ğ¸Ğ·Ğ¸ĞºĞ°/Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼Ñ‹**.",
                    "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ ĞºĞ¾Ğ¼ÑŒÑĞ½Ğ¸Ñ‚Ğ¸: ÑĞ¿Ğ¾Ñ€Ñ‚, Ğ¸Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ†Ğ¸Ğ¸, Ñ‚ĞµĞ»ĞµÑĞ½Ñ‹Ğµ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸, Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ²ĞµÑ‰ĞµĞ¹.",
                    "ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: Ğ¿Ñ€Ğ¾Ğ²Ğ¾Ğ´Ğ½Ğ¸Ğº Ğ² Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ, Ñ‚ĞµĞ»ĞµÑĞ½Ğ¾ÑÑ‚ÑŒ, Ñ„Ğ¾Ñ€Ğ¼Ğ°, ÑĞ²ÑĞ·ÑŒ Ñ Ñ€Ğ¾Ğ´Ğ¾Ğ¼/Ğ¿Ñ€Ğ¸Ñ€Ğ¾Ğ´Ğ¾Ğ¹."
                ]
            },
            "instrument": {
                "title": "Ğ¨ÑƒĞ½Ğ³Ğ¸Ñ‚ â€” 3 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚/ĞºĞ°Ğº Ğ´ĞµĞ»Ğ°Ñ)",
                "lines": [
                    "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚: **ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµÑÑ‚Ğ²** Ğ²Ğ¾ĞºÑ€ÑƒĞ³ Ñ‚ĞµĞ»ĞµÑĞ½Ğ¾Ğ³Ğ¾/Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾, Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ Ñ„Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ°.",
                    "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ Ñ„Ğ¾Ñ€Ğ¼Ñ‹ Ñ‚ĞµĞ»Ğ°, Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¼ĞµÑ€Ğ¾Ğ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ñ, Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ Ğ»ÑĞ´ĞµĞ¹.",
                    "Ğ¡Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑÑ„Ñ„ĞµĞºÑ‚: Ğ»Ğ°Ğ´ Ğ² Ğ±Ğ»Ğ¸Ğ·ĞºĞ¾Ğ¼ ĞºÑ€ÑƒĞ³Ğµ (ÑĞµĞ¼ÑŒÑ/Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€Ñ‹) Ñ‡ĞµÑ€ĞµĞ· Ğ¾Ğ±Ñ‰Ğ¸Ğµ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ†ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸."
                ]
            }
        },

        "Ğ¦Ğ¸Ñ‚Ñ€Ğ¸Ğ½": {
            "perception": {
                "title": "Ğ¦Ğ¸Ñ‚Ñ€Ğ¸Ğ½ â€” 1 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğµ/Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·)",
                "lines": [
                    "ĞšĞ°Ğ½Ğ°Ğ» Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ñ: **ĞºĞ¾Ğ¶Ğ° / Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸ĞºĞ° Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ**, Ñ‚ĞµĞ»ĞµÑĞ½Ñ‹Ğµ Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸Ñ (Ğ¿Ñ€Ğ¸ÑÑ‚Ğ½Ğ¾â€“Ğ½ĞµĞ¿Ñ€Ğ¸ÑÑ‚Ğ½Ğ¾).",
                    "ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ **ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¸ Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²**: Ğ´ĞµĞ½ÑŒĞ³Ğ¸, Ğ»Ğ¾Ğ³Ğ¸ÑÑ‚Ğ¸ĞºĞ°, Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ, Ğ¸Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ†Ğ¸Ğ¸.",
                    "Ğ’Ğ¸Ğ´Ğ¸Ñ‚, Ñ‡Ñ‚Ğ¾ Ğ¿Ñ€ĞµĞ´Ğ¿Ñ€Ğ¸Ğ½ÑÑ‚ÑŒ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ÑƒÑĞ¸Ğ»Ğ¸Ñ‚ÑŒ Ğ´Ğ¾Ñ…Ğ¾Ğ´/Ğ¿Ñ€Ğ¸Ğ±Ñ‹Ğ»ÑŒ, Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ.",
                ],
                "intuition": [
                    "Ğ˜Ğ½Ñ‚ÑƒĞ¸Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· ĞºĞ¾Ğ¶Ñƒ: Ğ¿Ñ€Ğ¸ÑÑ‚Ğ½Ñ‹Ğµ/Ğ½ĞµĞ¿Ñ€Ğ¸ÑÑ‚Ğ½Ñ‹Ğµ Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸Ñ, Ğ¼ÑƒÑ€Ğ°ÑˆĞºĞ¸.",
                    "ĞœĞ¾Ğ¶Ğ½Ğ¾ Ñ‚ĞµĞ»ĞµÑĞ½Ğ¾ Ğ¿Ñ€Ğ¾ÑĞ²Ğ¸Ñ‚ÑŒÑÑ (Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ/Ñ‚Ğ°Ğ½ĞµÑ†) Ğ¸ Ğ¿Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ, ĞºĞ°Ğº Ñ‚ĞµĞ»Ğ¾ Ñ€ĞµĞ°Ğ³Ğ¸Ñ€ÑƒĞµÑ‚ Ğ½Ğ° Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ."
                ]
            },
            "motivation": {
                "title": "Ğ¦Ğ¸Ñ‚Ñ€Ğ¸Ğ½ â€” 2 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ñ†ĞµĞ»ÑŒ/Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ/Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)",
                "lines": [
                    "ĞšĞ»ÑÑ‡ĞµĞ²Ğ°Ñ Ñ†ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ Ñ†ĞµĞ»Ğ¸: **Ğ´ĞµĞ½ÑŒĞ³Ğ¸, Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€Ğ¾ÑÑ‚, Ğ¸Ğ·Ğ¾Ğ±Ğ¸Ğ»Ğ¸Ğµ, Ğ²Ğ»Ğ°ÑÑ‚ÑŒ Ğ½Ğ°Ğ´ Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸ĞµĞ¹**.",
                    "Ğ“Ğ´Ğµ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ: Ğ±Ğ¸Ğ·Ğ½ĞµÑ/Ñ„Ğ¸Ğ½Ğ°Ğ½ÑÑ‹/Ğ¸Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ†Ğ¸Ğ¸ â€” Ñ‚Ğ°Ğ¼, Ğ³Ğ´Ğµ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑÑ‚ÑŒ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğ¼ Ñ€Ğ¾ÑÑ‚Ğ¾Ğ¼.",
                    "ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: Ğ¿Ñ€ĞµĞ´Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ñ‚ĞµĞ»ÑŒ, ÑÑ‚Ğ°Ñ‚ÑƒÑ, Ğ´ĞµĞ½ÑŒĞ³Ğ¸, Ñ€Ğ¾ÑĞºĞ¾ÑˆÑŒ (Ğ¸/Ğ¸Ğ»Ğ¸ Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚Ğ¸Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»Ğ° Ñ‚ĞµĞ»Ğ°)."
                ]
            },
            "instrument": {
                "title": "Ğ¦Ğ¸Ñ‚Ñ€Ğ¸Ğ½ â€” 3 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ» (Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚/ĞºĞ°Ğº Ğ´ĞµĞ»Ğ°Ñ)",
                "lines": [
                    "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚: **ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸ÑĞ¼Ğ¸/Ğ¿Ñ€Ğ¸Ğ²Ñ‹Ñ‡ĞºĞ°Ğ¼Ğ¸/Ñ€ĞµÑÑƒÑ€ÑĞ°Ğ¼Ğ¸/Ğ´ĞµĞ½ÑŒĞ³Ğ°Ğ¼Ğ¸**.",
                    "ĞÑ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ, Ğ»Ğ¾Ğ³Ğ¸ÑÑ‚Ğ¸ĞºĞ°, Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸ Ñ„Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¾Ğ², ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ°Ğ¼Ğ¸ Ğ¸ Ñ€ĞµÑÑƒÑ€ÑĞ°Ğ¼Ğ¸ Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… Ğ»ÑĞ´ĞµĞ¹.",
                    "Â«Ğ¡Ğ°Ğ¼Ñ‹Ğµ Ğ·Ğ°Ğ±Ğ¾Ñ‚Ğ»Ğ¸Ğ²Ñ‹ĞµÂ»: Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ, Ğ¾Ğ±ĞµÑĞ¿ĞµÑ‡Ğ¸Ñ‚ÑŒ, Ñ€Ğ°Ğ·Ğ»Ğ¾Ğ¶Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ Ğ¼ĞµÑÑ‚Ğ°Ğ¼, Ğ´Ğ°Ñ‚ÑŒ ÑĞ¸ÑÑ‚ĞµĞ¼Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ."
                ]
            }
        },
    }

    POT_4_CANON = {
        "ĞĞ¼ĞµÑ‚Ğ¸ÑÑ‚": {
            "analysis_focus": (
                "ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ñ, Ğ¸Ğ´ĞµĞ¹, ÑƒĞ±ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğ¹, ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸ĞµĞ² Ğ¿Ñ€Ğ¸Ğ½ÑÑ‚Ğ¸Ñ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹ "
                "Ğ¸ Ğ¸Ñ… ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ´Ğ»Ñ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ¹ Ñ†ĞµĞ»Ğ¸ Ğ¸ ÑĞ¸Ñ‚ÑƒĞ°Ñ†Ğ¸Ğ¸."
            ),
            "hobby": [
                "Ğ°Ñ€Ğ¾Ğ¼Ğ°Ñ‚ĞµÑ€Ğ°Ğ¿Ğ¸Ñ",
                "Ğ´ĞµÑ‚ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ ĞºĞ²ĞµÑÑ‚Ñ‹",
                "Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ñ‚Ñ€Ğ¸Ğ»Ğ»ĞµÑ€Ğ¾Ğ²"
            ]
        },
        "Ğ ÑƒĞ±Ğ¸Ğ½": {
            "analysis_focus": (
                "ĞĞ½Ğ°Ğ»Ğ¸Ğ· ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ñ€ĞµĞ°ĞºÑ†Ğ¸Ğ¹, Ğ³Ğ¾Ñ€Ğ¼Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¹ "
                "Ğ¸ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸ĞµĞ² ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ²ĞµĞ´ĞµĞ½Ğ¸Ñ."
            ),
            "hobby": [
                "ÑĞºÑÑ‚Ñ€ĞµĞ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ°Ñ‚Ñ‚Ñ€Ğ°ĞºÑ†Ğ¸Ğ¾Ğ½Ñ‹",
                "Ğ¿Ñ€Ñ‹Ğ¶ĞºĞ¸ Ñ Ğ¿Ğ°Ñ€Ğ°ÑˆÑÑ‚Ğ¾Ğ¼",
                "Ğ³Ğ²Ğ¾Ğ·Ğ´ĞµÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ",
                "Ñ„Ğ¾ĞºÑƒÑ Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑĞ½Ñ‹Ñ… Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸ÑÑ…",
                "ÑĞµĞºÑÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸ ĞºĞ°Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸ÑĞ¼Ğ¸"
            ]
        },
        "Ğ¦Ğ¸Ñ‚Ñ€Ğ¸Ğ½": {
            "analysis_focus": (
                "ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ², Ğ´ĞµĞ½ĞµĞ³, Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹ "
                "Ğ¸ ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ñ… Ğ¸ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼Ğ¾Ğ²."
            ),
            "hobby": [
                "Ğ±Ğ°Ğ½Ñ",
                "Ğ¼Ğ°ÑÑĞ°Ğ¶",
                "Ñ‚Ğ°ĞºÑ‚Ğ¸Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸",
                "ĞµĞ´Ğ° Ñ Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ñ‹Ğ¼Ğ¸ Ğ³Ğ»Ğ°Ğ·Ğ°Ğ¼Ğ¸",
                "Ñ€ĞµÑ‚Ñ€Ğ¸Ñ‚Ñ‹ Ñ ÑĞµĞ½ÑĞ¾Ñ€Ğ½Ñ‹Ğ¼ Ñ„Ğ¾ĞºÑƒÑĞ¾Ğ¼"
            ]
        },
        "Ğ“ĞµĞ»Ğ¸Ğ¾Ğ´Ğ¾Ñ€": {
            "analysis_focus": (
                "ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ¸ ÑĞ¼Ñ‹ÑĞ»Ğ¾Ğ², Ğ³Ğ¾Ğ»Ğ¾ÑĞ°, Ñ€ĞµÑ‡Ğ¸, "
                "Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ° Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸ Ğ¸ Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ¸Ğ´ĞµĞ¹."
            ),
            "hobby": [
                "Ğ´ĞµĞ³ÑƒÑÑ‚Ğ°Ñ†Ğ¸Ñ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ²ĞºÑƒÑĞ¾Ğ²",
                "Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€Ñ‹ Ğ¸ Ñ„Ğ¸Ğ»Ğ¾ÑĞ¾Ñ„ÑĞºĞ¸Ğµ Ğ¾Ğ±ÑÑƒĞ¶Ğ´ĞµĞ½Ğ¸Ñ",
                "Ğ¾Ğ±Ğ¼ĞµĞ½ Ğ¼Ğ½ĞµĞ½Ğ¸ÑĞ¼Ğ¸"
            ]
        },
        "Ğ“Ñ€Ğ°Ğ½Ğ°Ñ‚": {
            "analysis_focus": (
                "ĞĞ½Ğ°Ğ»Ğ¸Ğ· ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¹, Ğ¼Ğ¸Ğ¼Ğ¸ĞºĞ¸, ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚ĞºĞ»Ğ¸ĞºĞ° "
                "Ğ¸ Ğ²Ñ‹Ñ€Ğ°Ğ·Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸."
            ),
            "hobby": [
                "Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ¼ĞµĞ»Ğ¾Ğ´Ñ€Ğ°Ğ¼",
                "ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¿Ñ€Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ€Ğ¾Ğ»ĞµĞ¹",
                "Ğ¸Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞ°Ñ‚Ñ€"
            ]
        },
        "Ğ¨ÑƒĞ½Ğ³Ğ¸Ñ‚": {
            "analysis_focus": (
                "ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ñ„Ğ¾Ñ€Ğ¼Ñ‹, Ñ„Ğ¸Ğ·Ğ¸ĞºĞ¸, Ñ‚ĞµĞ»Ğ°, Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ° "
                "Ğ¸ Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ¾Ğ²."
            ),
            "hobby": [
                "Ñ‚Ñ€ĞµĞ½Ğ°Ğ¶Ñ‘Ñ€Ğ½Ñ‹Ğ¹ Ğ·Ğ°Ğ»",
                "Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ğ¼Ñ‹ÑˆĞµÑ‡Ğ½Ñ‹Ğ¼Ğ¸ Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸ÑĞ¼Ğ¸",
                "Ñ‚ĞµĞ»ĞµÑĞ½Ğ°Ñ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°"
            ]
        },
        "Ğ¡Ğ°Ğ¿Ñ„Ğ¸Ñ€": {
            "analysis_focus": (
                "ĞĞ½Ğ°Ğ»Ğ¸Ğ· ÑĞ¼Ñ‹ÑĞ»Ğ¾Ğ², Ğ¸Ğ´ĞµĞ¹, ÑƒĞ±ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğ¹, "
                "Ñ„Ğ¸Ğ»Ğ¾ÑĞ¾Ñ„Ğ¸Ğ¸ Ğ¸ Ñ†ĞµĞ»Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ñ."
            ),
            "hobby": [
                "Ğ¼ÑƒĞ·Ñ‹ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğµ ĞºĞ¾Ğ½Ñ†ĞµÑ€Ñ‚Ñ‹",
                "ÑĞ»ÑƒÑˆĞ°Ğ½Ğ¸Ğµ Ğ·Ğ²ÑƒĞºĞ¾Ğ²",
                "Ğ¿Ğ¾ÑÑ‰Ğ¸Ğµ Ñ‡Ğ°ÑˆĞ¸",
                "Ğ¼ĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ² Ñ‚Ğ¸ÑˆĞ¸Ğ½Ğµ",
                "Ğ°ÑÑ‚Ñ€Ğ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ"
            ]
        },
        "Ğ˜Ğ·ÑƒĞ¼Ñ€ÑƒĞ´": {
            "analysis_focus": (
                "ĞĞ½Ğ°Ğ»Ğ¸Ğ· ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¹, Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ³Ğ°Ñ€Ğ¼Ğ¾Ğ½Ğ¸Ğ¸, "
                "ĞºÑ€Ğ°ÑĞ¾Ñ‚Ñ‹ Ğ¸ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ."
            ),
            "hobby": [
                "Ñ„Ğ¾Ñ‚Ğ¾ÑĞµÑÑĞ¸Ğ¸",
                "Ğ²Ñ‹ÑÑ‚Ğ°Ğ²ĞºĞ¸",
                "Ğ¿Ñ€Ğ¸Ñ€Ğ¾Ğ´Ğ°",
                "Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ ÑÑÑ‚ĞµÑ‚Ğ¸ĞºĞ¾Ğ¹",
                "ÑĞ¼ĞµĞ½Ğ° Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²"
            ]
        },
        "Ğ¯Ğ½Ñ‚Ğ°Ñ€ÑŒ": {
            "analysis_focus": (
                "ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼Ğ¾Ğ², ÑĞ¸ÑÑ‚ĞµĞ¼, Ñ‚ĞµĞ»ĞµÑĞ½Ñ‹Ñ… "
                "Ğ¸ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ¾Ğ²."
            ),
            "hobby": [
                "Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°",
                "Ğ²Ñ‹ÑÑ‚Ğ°Ğ²ĞºĞ¸ Ğ¼Ğ°ÑˆĞ¸Ğ½",
                "Ğ¸Ğ·ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼Ğ¾Ğ²",
                "Ğ²Ñ‹ÑÑ‚Ğ°Ğ²ĞºĞ¸ Ñ€Ğ¾Ğ±Ğ¾Ñ‚Ğ¾Ğ²"
            ]
        }
    }

    POT_5_CANON = {
        "ĞĞ¼ĞµÑ‚Ğ¸ÑÑ‚": {
            "mission": [
                "Ñ€Ğ¾ÑÑ‚ Ğ² ÑĞ¼Ñ‹ÑĞ»Ğ¾Ğ²Ñ‹Ñ… Ğ¸ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ñ… Ñ€ĞµÑÑƒÑ€ÑĞ°Ñ…",
                "Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ·Ğ½Ğ°Ğ½Ğ¸Ğ¹ Ğ¸ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¹",
                "Ñ‚Ñ€Ğ°Ğ½ÑÑ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ñ",
                "Ğ²Ğ½ĞµĞ´Ñ€ĞµĞ½Ğ¸Ğµ Ğ¸Ğ´ĞµĞ¹ Ğ² Ğ¼Ğ°ÑÑÑ‹"
            ]
        },
        "Ğ ÑƒĞ±Ğ¸Ğ½": {
            "mission": [
                "Ñ€Ğ¾ÑÑ‚ Ğ² ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ñ€ĞµÑÑƒÑ€ÑĞ°Ñ…",
                "ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¼Ğ¾Ñ†Ğ¸ÑĞ¼Ğ¸ Ñ‚Ğ¾Ğ»Ğ¿Ñ‹",
                "ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ¼ĞµÑ€Ğ¾Ğ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğ¹",
                "Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ° ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¹"
            ]
        },
        "Ğ¦Ğ¸Ñ‚Ñ€Ğ¸Ğ½": {
            "mission": [
                "Ñ€Ğ¾ÑÑ‚ Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²",
                "ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ´ĞµĞ½ÑŒĞ³Ğ°Ğ¼Ğ¸ Ğ¸ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸ÑĞ¼Ğ¸",
                "ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ñ… Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¾Ğ²",
                "Ğ²Ñ‹Ñ…Ğ¾Ğ´ Ğ½Ğ° Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğ¹ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ"
            ]
        },
        "Ğ“ĞµĞ»Ğ¸Ğ¾Ğ´Ğ¾Ñ€": {
            "mission": [
                "Ñ€Ğ¾ÑÑ‚ Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ğ¾ÑÑ‚Ğ¸ ÑĞ¼Ñ‹ÑĞ»Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ°",
                "Ñ€Ğ°ÑĞ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ¸Ğ´ĞµĞ¹",
                "ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµÑÑ‚Ğ²Ğ° Ğ²Ğ¾ĞºÑ€ÑƒĞ³ Ñ„Ğ¸Ğ»Ğ¾ÑĞ¾Ñ„Ğ¸Ğ¸",
                "Ğ¼Ğ°ÑÑĞ¾Ğ²Ğ°Ñ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ° Ğ·Ğ½Ğ°Ğ½Ğ¸Ğ¹"
            ]
        },
        "Ğ“Ñ€Ğ°Ğ½Ğ°Ñ‚": {
            "mission": [
                "Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ°",
                "Ñ€Ğ°ÑĞ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ ĞºÑ€Ğ°ÑĞ¾Ñ‚Ñ‹",
                "ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ²Ğ¾Ğ²Ğ»ĞµÑ‡Ñ‘Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸"
            ]
        },
        "Ğ¨ÑƒĞ½Ğ³Ğ¸Ñ‚": {
            "mission": [
                "Ğ¼Ğ°ÑÑĞ¾Ğ²Ğ¾Ğµ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ Ñ„Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ°",
                "Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑĞ¿Ñ€Ğ¾ÑĞ° Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑĞ½Ñ‹Ğµ Ğ¸ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ",
                "ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµÑÑ‚Ğ²"
            ]
        },
        "Ğ¡Ğ°Ğ¿Ñ„Ğ¸Ñ€": {
            "mission": [
                "Ğ¸Ğ·Ğ¾Ğ±Ñ€ĞµÑ‚ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ñ‹Ñ… ÑĞ¼Ñ‹ÑĞ»Ğ¾Ğ²",
                "Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ† Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ñ",
                "ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ·Ğ½Ğ°Ğ½Ğ¸Ğ¹",
                "Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¸ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ° Ğ¾Ğ¿Ñ‹Ñ‚Ğ°"
            ]
        },
        "Ğ˜Ğ·ÑƒĞ¼Ñ€ÑƒĞ´": {
            "mission": [
                "ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ñ‹Ñ… ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¹",
                "Ğ³Ğ°Ñ€Ğ¼Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ",
                "ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ĞºÑ€Ğ°ÑĞ¾Ñ‚Ñ‹"
            ]
        },
        "Ğ¯Ğ½Ñ‚Ğ°Ñ€ÑŒ": {
            "mission": [
                "ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼Ğ¾Ğ² Ğ¸ ÑĞ¸ÑÑ‚ĞµĞ¼",
                "Ğ¸ÑÑ†ĞµĞ»ĞµĞ½Ğ¸Ğµ Ñ‚ĞµĞ»Ğ°",
                "Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¸ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ° Ğ¿Ñ€Ğ¸ĞºĞ»Ğ°Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ğ¿Ñ‹Ñ‚Ğ°"
            ]
        }
    }

    POT_6_CANON = {
        "ĞĞ¼ĞµÑ‚Ğ¸ÑÑ‚": {
            "result": "Ğ Ğ¾ÑÑ‚ ÑĞ¼Ñ‹ÑĞ»Ğ¾Ğ²Ñ‹Ñ… Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ² Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ñ",
            "collective_hobby": [
                "Ğ´ĞµÑ‚ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ğ¸Ğ³Ñ€Ñ‹",
                "Ğ¼Ğ°Ñ„Ğ¸Ñ",
                "Ğ¸Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ ĞºĞ²ĞµÑÑ‚Ñ‹",
                "ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ½Ñ‹Ğµ Ñ€Ğ°Ğ·Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ñ"
            ]
        },
        "Ğ¦Ğ¸Ñ‚Ñ€Ğ¸Ğ½": {
            "result": "Ğ Ğ¾ÑÑ‚ Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ² Ğ¸ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ğ¾Ğ¹ ÑƒÑÑ‚Ğ¾Ğ¹Ñ‡Ğ¸Ğ²Ğ¾ÑÑ‚Ğ¸",
            "collective_hobby": [
                "Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¼ĞµÑ€Ğ¾Ğ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğ¹",
                "ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ½Ğ¾Ğµ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ"
            ]
        },
        "Ğ“ĞµĞ»Ğ¸Ğ¾Ğ´Ğ¾Ñ€": {
            "result": "Ğ Ğ¾ÑÑ‚ Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ¸ Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°Ğ½Ğ¸Ñ",
            "collective_hobby": [
                "Ñ€Ğ°ÑÑĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¹",
                "Ğ¿ĞµĞ½Ğ¸Ğµ",
                "Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ Ğ¼ĞµÑ€Ğ¾Ğ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğ¹"
            ]
        },
        "Ğ“Ñ€Ğ°Ğ½Ğ°Ñ‚": {
            "result": "Ğ Ğ¾ÑÑ‚ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ²Ğ¾Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ¸ Ğ¿Ñ€Ğ¸Ğ²Ğ»ĞµĞºĞ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸",
            "collective_hobby": [
                "Ğ²ĞµÑ‡ĞµÑ€Ğ¸Ğ½ĞºĞ¸",
                "ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑˆĞ¾Ñƒ",
                "ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ½Ñ‹Ğµ Ñ€Ğ°Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ñ"
            ]
        },
        "Ğ¨ÑƒĞ½Ğ³Ğ¸Ñ‚": {
            "result": "Ğ Ğ¾ÑÑ‚ Ñ„Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… ÑĞ¾Ğ¾Ğ±Ñ‰ĞµÑÑ‚Ğ² Ğ¸ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ°",
            "collective_hobby": [
                "Ğ¿Ğ¾Ñ…Ğ¾Ğ´Ñ‹",
                "Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ´Ñ‹Ñ…"
            ]
        },
        "Ğ¡Ğ°Ğ¿Ñ„Ğ¸Ñ€": {
            "result": "ĞĞ¾Ğ²Ñ‹Ğµ Ğ¸Ğ´ĞµĞ¸ Ğ¸ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ğ¾Ğµ Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ğµ",
            "collective_hobby": [
                "Ñ„Ğ¸Ğ»Ğ¾ÑĞ¾Ñ„ÑĞºĞ¸Ğµ Ğ¾Ğ±ÑÑƒĞ¶Ğ´ĞµĞ½Ğ¸Ñ",
                "ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸ĞµĞ²",
                "Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¸Ğ³Ñ€Ñ‹"
            ]
        },
        "Ğ˜Ğ·ÑƒĞ¼Ñ€ÑƒĞ´": {
            "result": "Ğ­Ğ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ³Ğ°Ñ€Ğ¼Ğ¾Ğ½Ğ¸Ñ Ğ¸ ĞºÑ€Ğ°ÑĞ¾Ñ‚Ğ°",
            "collective_hobby": [
                "ÑÑ‚Ğ¸Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ",
                "ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ½Ğ¾Ğµ Ñ‚Ğ²Ğ¾Ñ€Ñ‡ĞµÑÑ‚Ğ²Ğ¾"
            ]
        },
        "Ğ¯Ğ½Ñ‚Ğ°Ñ€ÑŒ": {
            "result": "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼Ğ¾Ğ² Ğ¸ Ñ‚ĞµĞ»ĞµÑĞ½Ğ¾Ğµ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ",
            "collective_hobby": [
                "Ğ¼ÑƒĞ·Ñ‹ĞºĞ° Ñƒ ĞºĞ¾ÑÑ‚Ñ€Ğ°",
                "Ğ¿Ñ€Ğ¸ĞºĞ»Ğ°Ğ´Ğ½Ğ¾Ğµ Ñ‚Ğ²Ğ¾Ñ€Ñ‡ĞµÑÑ‚Ğ²Ğ¾"
            ]
        }
    }

    return POT_CANON_1_3, POT_4_CANON, POT_5_CANON, POT_6_CANON

# --- initialize canon dicts into globals (IMPORTANT) ---
POT_CANON_1_3, POT_4_CANON, POT_5_CANON, POT_6_CANON = load_spch_canon()

# =========================
# HOBBY CANON v1 (Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸ 4/5/6 + recovery + game_goal) â€” 9 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»Ğ¾Ğ²
# =========================
POT_HOBBY_CANON = {
  "ĞĞ¼ĞµÑ‚Ğ¸ÑÑ‚": {
    "pos4_personal": ["Ğ°Ñ€Ğ¾Ğ¼Ğ°Ñ‚ĞµÑ€Ğ°Ğ¿Ğ¸Ñ", "Ğ´ĞµÑ‚ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ ĞºĞ²ĞµÑÑ‚Ñ‹", "Ñ‚Ñ€Ğ¸Ğ»Ğ»ĞµÑ€Ñ‹/Ğ´ĞµÑ‚ĞµĞºÑ‚Ğ¸Ğ²Ñ‹", "Ğ¸ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿ÑĞ¸Ñ…Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¹ Ğ»ÑĞ´ĞµĞ¹"],
    "pos5_solo_expression": ["Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ñ‚ĞµĞºÑÑ‚Ñ‹/ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸", "Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ñ€Ğ°Ğ·Ğ±Ğ¾Ñ€Ñ‹/ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹", "ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸/Ğ²Ğ¾Ñ€Ğ¾Ğ½ĞºĞ¸/ÑƒĞ¿Ğ°ĞºĞ¾Ğ²ĞºĞ°", "Ñ€Ğ°ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‚ĞµĞ¼Ñƒ Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ¾"],
    "pos6_collective": ["Ğ¸Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸Ğ³Ñ€Ñ‹", "ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ½Ñ‹Ğµ Ñ€Ğ°Ğ·Ğ±Ğ¾Ñ€Ñ‹", "Ğ¼Ğ°Ñ„Ğ¸Ñ/ĞºĞ²ĞµÑÑ‚Ñ‹", "Ğ¼Ğ¾Ğ·Ğ³Ğ¾Ğ²Ñ‹Ğµ ÑˆÑ‚ÑƒÑ€Ğ¼Ñ‹"],
    "recovery": ["Ñ‚Ğ¸ÑˆĞ¸Ğ½Ğ°", "Ğ¿Ñ€Ğ¾Ğ³ÑƒĞ»ĞºĞ° Ğ±ĞµĞ· Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°", "Ğ°Ñ€Ğ¾Ğ¼Ğ°Ñ‚Ñ‹/Ğ·Ğ°Ğ¿Ğ°Ñ…Ğ¸", "Ñ‚ĞµĞ¿Ğ»Ñ‹Ğ¹ Ğ´ÑƒÑˆ"],
    "game_goal": ["Ğ¸Ğ½ÑĞ°Ğ¹Ñ‚", "Ğ²Ğ»Ğ¸ÑĞ½Ğ¸Ğµ", "Ğ²Ñ‹Ğ¸Ğ³Ñ€Ñ‹Ñˆ Ñ‡ĞµÑ€ĞµĞ· ÑƒĞ¼", "ÑÑĞ½Ğ¾Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ"]
  },

  "Ğ“Ñ€Ğ°Ğ½Ğ°Ñ‚": {
    "pos4_personal": ["Ğ¼ĞµĞ»Ğ¾Ğ´Ñ€Ğ°Ğ¼Ñ‹", "Ñ‚ĞµĞ°Ñ‚Ñ€/ÑÑ†ĞµĞ½Ğ°", "ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑÑĞ¶ĞµÑ‚Ñ‹", "Ğ½Ğ°Ğ±Ğ»ÑĞ´Ğ°Ñ‚ÑŒ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¸ Ğ»ÑĞ´ĞµĞ¹"],
    "pos5_solo_expression": ["Ñ‚Ğ°Ğ½ĞµÑ†", "Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ĞºĞ° Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²", "Ñ€ĞµĞ¿ĞµÑ‚Ğ¸Ñ†Ğ¸Ñ Ñ€Ğ¾Ğ»Ğ¸", "ÑÑŠÑ‘Ğ¼ĞºĞ° ÑĞµĞ±Ñ/ÑĞ°Ğ¼Ğ¾Ğ¿Ñ€ĞµĞ·ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ"],
    "pos6_collective": ["Ğ²ĞµÑ‡ĞµÑ€Ğ¸Ğ½ĞºĞ¸", "ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ", "ÑˆĞ¾Ñƒ/Ğ¼ĞµÑ€Ğ¾Ğ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ñ", "ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ½Ñ‹Ğµ Ñ€Ğ°Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ñ"],
    "recovery": ["ĞºÑ€Ğ°ÑĞ¾Ñ‚Ğ°/ÑƒÑ…Ğ¾Ğ´", "Ğ¼ÑƒĞ·Ñ‹ĞºĞ°", "Ñ‚ĞµĞ¿Ğ»Ğ¾/Ğ²Ğ°Ğ½Ğ½Ğ°", "ÑÑÑ‚ĞµÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ñ€Ğ¸Ñ‚ÑƒĞ°Ğ»Ñ‹"],
    "game_goal": ["ÑĞ¼Ğ¾Ñ†Ğ¸Ñ", "Ğ²Ğ¿ĞµÑ‡Ğ°Ñ‚Ğ»ĞµĞ½Ğ¸Ğµ", "Ğ²Ğ°Ñƒ-ÑÑ„Ñ„ĞµĞºÑ‚", "Ğ²Ğ¾Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ Ğ»ÑĞ´ĞµĞ¹"]
  },

  "Ğ¦Ğ¸Ñ‚Ñ€Ğ¸Ğ½": {
    "pos4_personal": ["Ğ±Ğ°Ğ½Ñ", "Ğ¼Ğ°ÑÑĞ°Ğ¶", "Ñ‚Ğ°ĞºÑ‚Ğ¸Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸", "ĞµĞ´Ğ° Ñ Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ñ‹Ğ¼Ğ¸ Ğ³Ğ»Ğ°Ğ·Ğ°Ğ¼Ğ¸", "ÑĞµĞ½ÑĞ¾Ñ€Ğ½Ñ‹Ğµ Ñ€ĞµÑ‚Ñ€Ğ¸Ñ‚Ñ‹"],
    "pos5_solo_expression": ["Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´ĞµĞ½ÑŒĞ³Ğ¸", "Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑÑ‹", "Ğ²ĞµÑÑ‚Ğ¸ Ñ‚Ñ€ĞµĞºĞµÑ€ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹", "ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ²Ğ¾Ñ€Ğ¾Ğ½ĞºÑƒ/Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚"],
    "pos6_collective": ["ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ½Ğ¾Ğµ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ", "Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¼ĞµÑ€Ğ¾Ğ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğ¹", "ĞºĞ¾-Ğ²Ğ¾Ñ€ĞºĞ¸Ğ½Ğ³", "ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ½Ñ‹Ğµ Ñ†ĞµĞ»Ğ¸"],
    "recovery": ["ÑĞ¾Ğ½/Ñ€ĞµĞ¶Ğ¸Ğ¼", "Ñ‚ĞµĞ»ĞµÑĞ½Ñ‹Ğ¹ ĞºĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚", "Ñ‚ĞµĞ¿Ğ»Ğ¾", "Ğ¿Ñ€Ğ¾ÑÑ‚Ğ°Ñ ĞµĞ´Ğ°"],
    "game_goal": ["Ğ´Ğ¾Ñ…Ğ¾Ğ´", "Ñ€Ğ¾ÑÑ‚", "Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚", "Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ"]
  },

  "Ğ¡Ğ°Ğ¿Ñ„Ğ¸Ñ€": {
    "pos4_personal": ["Ñ‚Ğ¸ÑˆĞ¸Ğ½Ğ°", "Ğ°ÑÑ‚Ñ€Ğ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ", "Ğ¿Ğ¾ÑÑ‰Ğ¸Ğµ Ñ‡Ğ°ÑˆĞ¸", "ÑĞ»ÑƒÑˆĞ°Ñ‚ÑŒ Ğ·Ğ²ÑƒĞºĞ¸", "Ğ¿Ñ€Ğ¸Ñ€Ğ¾Ğ´Ğ°"],
    "pos5_solo_expression": ["Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ ÑÑÑĞµ/Ğ¼Ñ‹ÑĞ»Ğ¸", "ÑĞ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ğ¸", "ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸/ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ ÑĞ¼Ñ‹ÑĞ»Ğ°", "Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ/ÑƒÑ‡Ğ¸Ñ‚ÑŒÑÑ Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ¾"],
    "pos6_collective": ["Ñ„Ğ¸Ğ»Ğ¾ÑĞ¾Ñ„ÑĞºĞ¸Ğµ Ğ¾Ğ±ÑÑƒĞ¶Ğ´ĞµĞ½Ğ¸Ñ", "ĞºĞ»ÑƒĞ± Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ", "Ğ»ĞµĞºÑ†Ğ¸Ğ¸", "ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ½Ñ‹Ğµ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸/Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¸Ğ³Ñ€Ñ‹"],
    "recovery": ["Ñ‚Ğ¸ÑˆĞ¸Ğ½Ğ° 20â€“40 Ğ¼Ğ¸Ğ½ÑƒÑ‚", "Ğ¿Ñ€Ğ¾Ğ³ÑƒĞ»ĞºĞ° Ğ±ĞµĞ· Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°", "Ğ¼ĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ", "Ğ¼ÑƒĞ·Ñ‹ĞºĞ° Ğ±ĞµĞ· ÑĞ»Ğ¾Ğ²"],
    "game_goal": ["Ğ½Ğ¾Ğ²Ğ°Ñ Ğ¸Ğ´ĞµÑ", "ÑĞ¼Ñ‹ÑĞ»", "ÑÑĞ½Ğ¾ÑÑ‚ÑŒ", "Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°ĞºĞ¾Ğ½Ğ¾Ğ¼ĞµÑ€Ğ½Ğ¾ÑÑ‚Ğ¸"]
  },

  "Ğ“ĞµĞ»Ğ¸Ğ¾Ğ´Ğ¾Ñ€": {
    "pos4_personal": ["Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€Ñ‹ Ğ¸ Ğ¾Ğ±ÑÑƒĞ¶Ğ´ĞµĞ½Ğ¸Ñ", "Ğ¾Ğ±Ğ¼ĞµĞ½ Ğ¼Ğ½ĞµĞ½Ğ¸ÑĞ¼Ğ¸", "Ğ´ĞµĞ³ÑƒÑÑ‚Ğ°Ñ†Ğ¸Ğ¸/Ğ½Ğ¾Ğ²Ñ‹Ğµ Ğ²ĞºÑƒÑÑ‹", "Ğ¿Ñ€Ğ¾Ğ³Ğ¾Ğ²Ğ°Ñ€Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ¼Ñ‹ÑĞ»Ğ¸ Ğ²ÑĞ»ÑƒÑ…"],
    "pos5_solo_expression": ["Ğ¿ĞµÑ‚ÑŒ", "ĞºĞ°Ñ€Ğ°Ğ¾ĞºĞµ", "Ğ¾Ğ·Ğ²ÑƒÑ‡ĞºĞ°/Ğ´Ğ¸ĞºÑ†Ğ¸Ñ", "Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ²ÑĞ»ÑƒÑ…", "ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‚ĞµĞ»Ğ»Ğ¸Ğ½Ğ³"],
    "pos6_collective": ["Ğ²ĞµÑÑ‚Ğ¸ Ğ¼ĞµÑ€Ğ¾Ğ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ñ", "ÑÑ„Ğ¸Ñ€Ñ‹/Ğ¿Ğ¾Ğ´ĞºĞ°ÑÑ‚", "ÑĞ¾Ğ¾Ğ±Ñ‰ĞµÑÑ‚Ğ²Ğ¾ Ğ²Ğ¾ĞºÑ€ÑƒĞ³ Ğ¸Ğ´ĞµĞ¸", "Ğ²Ñ‹ÑÑ‚ÑƒĞ¿Ğ»ĞµĞ½Ğ¸Ñ"],
    "recovery": ["Ñ‚Ğ¸ÑˆĞ¸Ğ½Ğ° Ğ¿Ğ¾ÑĞ»Ğµ Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ", "Ğ¿Ñ€Ğ¾Ğ³ÑƒĞ»ĞºĞ°", "Ñ‡Ğ°Ğ¹", "Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ñ‹Ğµ Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ¸ (Ğ²Ñ‹Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚ÑŒÑÑ)"],
    "game_goal": ["Ñ€ĞµĞ°ĞºÑ†Ğ¸Ñ Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸", "Ğ²Ğ¾Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ", "Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¸Ğ´ĞµĞ¸", "Ğ·Ğ°Ğ¼ĞµÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ"]
  },

  "Ğ˜Ğ·ÑƒĞ¼Ñ€ÑƒĞ´": {
    "pos4_personal": ["Ğ¿Ñ€Ğ¸Ñ€Ğ¾Ğ´Ğ°", "Ğ²Ñ‹ÑÑ‚Ğ°Ğ²ĞºĞ¸", "Ñ„Ğ¾Ñ‚Ğ¾ÑĞµÑÑĞ¸Ğ¸", "Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ ÑÑÑ‚ĞµÑ‚Ğ¸ĞºĞ°", "ÑĞ¼ĞµĞ½Ğ° Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²"],
    "pos5_solo_expression": ["ÑÑ‚Ğ¸Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ", "Ñ„Ğ¾Ñ‚Ğ¾/Ğ²Ğ¸Ğ´ĞµĞ¾ ĞºĞ°Ğº ÑÑÑ‚ĞµÑ‚Ğ¸ĞºĞ°", "ÑĞ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ Ğ°Ñ‚Ğ¼Ğ¾ÑÑ„ĞµÑ€Ñƒ Ğ´Ğ¾Ğ¼Ğ°", "Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ¾Ğ´Ğ±Ğ¾Ñ€ĞºĞ¸"],
    "pos6_collective": ["ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ½Ğ¾Ğµ Ñ‚Ğ²Ğ¾Ñ€Ñ‡ĞµÑÑ‚Ğ²Ğ¾", "ÑÑ‚Ğ¸Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ Ğ¿Ğ¾Ğ´Ñ€ÑƒĞ³Ğ°Ğ¼Ğ¸", "Ğ°Ñ€Ñ‚-Ğ¼ĞµÑ€Ğ¾Ğ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ñ", "ĞºÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğµ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ğ¸"],
    "recovery": ["ĞºÑ€Ğ°ÑĞ¸Ğ²Ğ¾Ğµ Ğ¾Ğ´Ğ¸Ğ½Ğ¾Ñ‡ĞµÑÑ‚Ğ²Ğ¾", "ÑƒÑ…Ğ¾Ğ´", "Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ³ÑƒĞ»ĞºĞ¸", "Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ‡Ğ¸ÑÑ‚Ğ¾Ñ‚Ğ° Ğ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑÑ‚Ğ²Ğ°"],
    "game_goal": ["ĞºÑ€Ğ°ÑĞ¾Ñ‚Ğ°", "Ğ³Ğ°Ñ€Ğ¼Ğ¾Ğ½Ğ¸Ñ", "Ğ»ĞµĞ³ĞºĞ¾ÑÑ‚ÑŒ", "ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ´ÑŠÑ‘Ğ¼"]
  },

  "Ğ¯Ğ½Ñ‚Ğ°Ñ€ÑŒ": {
    "pos4_personal": ["Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°", "Ğ²Ñ‹ÑÑ‚Ğ°Ğ²ĞºĞ¸ Ğ¼Ğ°ÑˆĞ¸Ğ½", "Ğ¸Ğ·ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼Ğ¾Ğ²", "Ñ€Ğ¾Ğ±Ğ¾Ñ‚Ñ‹/Ñ‚ĞµÑ…Ğ½Ğ¸ĞºĞ°"],
    "pos5_solo_expression": ["Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ğ¸", "Ğ½Ğ°Ğ²Ğ¾Ğ´Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº", "ĞºĞ¾Ğ½ÑĞ¿ĞµĞºÑ‚Ñ‹/Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹", "ÑĞ¾Ğ±Ğ¸Ñ€Ğ°Ñ‚ÑŒ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ ÑˆĞ°Ğ³Ğ¾Ğ²"],
    "pos6_collective": ["Ğ¿Ñ€Ğ¸ĞºĞ»Ğ°Ğ´Ğ½Ğ¾Ğµ Ñ‚Ğ²Ğ¾Ñ€Ñ‡ĞµÑÑ‚Ğ²Ğ¾", "Ñ€ĞµĞ¼Ğ¾Ğ½Ñ‚/ÑĞ±Ğ¾Ñ€ĞºĞ°", "Ğ¼ÑƒĞ·Ñ‹ĞºĞ° Ñƒ ĞºĞ¾ÑÑ‚Ñ€Ğ°", "ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñ‹ Ñ€ÑƒĞºĞ°Ğ¼Ğ¸"],
    "recovery": ["Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº Ğ² Ğ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑÑ‚Ğ²Ğµ", "Ğ¿Ñ€Ğ¾ÑÑ‚Ğ°Ñ Ñ€ÑƒÑ‚Ğ¸Ğ½Ğ°", "Ñ‡Ğ¸ÑÑ‚Ğ¾Ñ‚Ğ°", "Ñ€Ğ°Ğ·Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ·Ğ°Ğ´Ğ°Ñ‡ Ğ² ÑĞ¿Ğ¸ÑĞ¾Ğº"],
    "game_goal": ["ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒ", "ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°", "Ğ¿Ğ¾Ğ½ÑÑ‚Ğ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½", "ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ"]
  },

  "Ğ¨ÑƒĞ½Ğ³Ğ¸Ñ‚": {
    "pos4_personal": ["Ñ‚Ñ€ĞµĞ½Ğ°Ğ¶Ñ‘Ñ€Ğ½Ñ‹Ğ¹ Ğ·Ğ°Ğ»", "Ñ‚ĞµĞ»ĞµÑĞ½Ğ°Ñ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°", "Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ğ¼Ñ‹ÑˆÑ†Ğ°Ğ¼Ğ¸", "Ğ¿Ğ¾Ñ…Ğ¾Ğ´Ñ‹"],
    "pos5_solo_expression": ["Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ° Ñ€ÑƒĞºĞ°Ğ¼Ğ¸", "Ñ‚Ñ€ĞµĞ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸", "Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ñ„Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚", "Ğ¼Ğ¾Ğ½Ğ¾Ñ‚Ğ¾Ğ½Ğ½Ğ°Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°"],
    "pos6_collective": ["ĞºĞ¾Ğ¼ÑŒÑĞ½Ğ¸Ñ‚Ğ¸", "Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ´Ñ‹Ñ…", "ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ñ…Ğ¾Ğ´Ñ‹", "ÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹"],
    "recovery": ["ÑĞ¾Ğ½", "Ñ€Ğ°ÑÑ‚ÑĞ¶ĞºĞ°", "Ğ¼Ğ°ÑÑĞ°Ğ¶", "Ñ‚ĞµĞ¿Ğ»Ğ¾"],
    "game_goal": ["Ñ„Ğ¾Ñ€Ğ¼Ğ°", "ÑĞ¸Ğ»Ğ°", "Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸Ğµ Ñ‚ĞµĞ»Ğ°", "Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚"]
  },

  "Ğ ÑƒĞ±Ğ¸Ğ½": {
    "pos4_personal": ["ÑĞºÑÑ‚Ñ€Ğ¸Ğ¼-Ğ°Ñ‚Ñ‚Ñ€Ğ°ĞºÑ†Ğ¸Ğ¾Ğ½Ñ‹", "Ğ°Ğ´Ñ€ĞµĞ½Ğ°Ğ»Ğ¸Ğ½", "Ğ³Ğ²Ğ¾Ğ·Ğ´ĞµÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ", "Ñ‚ĞµĞ»ĞµÑĞ½Ñ‹Ğµ Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸Ñ"],
    "pos5_solo_expression": ["Ğ´Ñ€Ğ°Ğ¼Ğ°Ñ‚ÑƒÑ€Ğ³Ğ¸Ñ/ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸", "ÑĞ½ĞµÑ€Ğ³Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñ‹", "ÑĞ¼ĞµĞ»Ñ‹Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ", "ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ Ñ Ğ½Ğ°Ğ¿Ñ€ÑĞ¶ĞµĞ½Ğ¸ĞµĞ¼"],
    "pos6_collective": ["ÑˆĞ¾Ñƒ", "Ğ¿ÑƒÑ‚ĞµÑˆĞµÑÑ‚Ğ²Ğ¸Ñ", "Ğ´Ñ€Ğ°Ğ¹Ğ²Ğ¾Ğ²Ñ‹Ğµ Ğ¼ĞµÑ€Ğ¾Ğ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ñ", "ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ"],
    "recovery": ["ÑĞ±Ñ€Ğ¾Ñ Ğ½Ğ°Ğ¿Ñ€ÑĞ¶ĞµĞ½Ğ¸Ñ Ñ‚ĞµĞ»Ğ¾Ğ¼", "ÑĞ°ÑƒĞ½Ğ°/Ñ‚ĞµĞ¿Ğ»Ğ¾", "ÑĞ¾Ğ½", "Ñ‚Ğ¸Ñ…Ğ¸Ğ¹ Ğ²ĞµÑ‡ĞµÑ€ Ğ¿Ğ¾ÑĞ»Ğµ Ğ´Ñ€Ğ°Ğ¹Ğ²Ğ°"],
    "game_goal": ["Ğ´Ñ€Ğ°Ğ¹Ğ²", "ÑĞ¸Ğ»ÑŒĞ½Ğ°Ñ ÑĞ¼Ğ¾Ñ†Ğ¸Ñ", "Ñ€Ñ‹Ğ²Ğ¾Ğº", "Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞº"]
  }
}

# =========================
# OpenAI helper
# =========================
def get_openai_client():
    if not OPENAI_API_KEY or not OpenAI:
        return None
    return OpenAI(api_key=OPENAI_API_KEY)


# =========================
# Parsing potentials 1..9
# =========================
DEFAULT_NAMES = ["ĞĞ¼ĞµÑ‚Ğ¸ÑÑ‚","Ğ“Ñ€Ğ°Ğ½Ğ°Ñ‚","Ğ¦Ğ¸Ñ‚Ñ€Ğ¸Ğ½","Ğ¡Ğ°Ğ¿Ñ„Ğ¸Ñ€","Ğ“ĞµĞ»Ğ¸Ğ¾Ğ´Ğ¾Ñ€","Ğ˜Ğ·ÑƒĞ¼Ñ€ÑƒĞ´","Ğ¯Ğ½Ñ‚Ğ°Ñ€ÑŒ","Ğ¨ÑƒĞ½Ğ³Ğ¸Ñ‚","Ğ ÑƒĞ±Ğ¸Ğ½"]

def _clean_pot_name(x: str) -> str:
    return norm_pot_name((x or "").strip(" \t\r\n-â€“â€”â€¢*,:;").strip())

def parse_potentials_9(raw: str) -> List[str]:
    if not raw:
        return []
    s = raw.strip()

    # Try numbered 1..9
    numbered = []
    for i in range(1, 10):
        m = re.search(
            rf"(?:(?:^|\n|\s){i}\s*[\.\)]\s*)(.+?)(?=(?:\n|\s)(?:{i+1}\s*[\.\)]|$))",
            s, flags=re.S
        )
        if m:
            val = _clean_pot_name(m.group(1))
            if val:
                numbered.append(val)

    if len(numbered) >= 9:
        return numbered[:9]

    # Split lines/commas/semicolons/pipes
    s2 = re.sub(r"[\u2022â€¢]", "\n", s)
    s2 = s2.replace(";", "\n").replace(",", "\n").replace("|", "\n")
    lines = [ln.strip() for ln in s2.splitlines() if ln.strip()]

    cleaned = []
    for ln in lines:
        ln = re.sub(r"^\d+\s*[\.\)]\s*", "", ln).strip()
        ln = ln.split("â€”")[0].split("-")[0].strip()
        if ln:
            cleaned.append(_clean_pot_name(ln))

    flat = [x for x in cleaned if x]

    # fill to 9
    existing = {x.lower() for x in flat}
    for name in DEFAULT_NAMES:
        if len(flat) >= 9:
            break
        if name.lower() not in existing:
            flat.append(name)
            existing.add(name.lower())

    return flat[:9]


def build_matrix_md(p9: List[str]) -> str:
    if len(p9) < 9:
        return "â€”"
    pos1, pos2, pos3, pos4, pos5, pos6, pos7, pos8, pos9 = p9[:9]
    md = []
    md.append("| Ğ ÑĞ´ | Ğ’Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğµ | ĞœĞ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ | Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ |")
    md.append("|---|---|---|---|")
    md.append(f"| 1 (ÑĞ´Ñ€Ğ¾ / 60%) | {pos1} | {pos2} | {pos3} |")
    md.append(f"| 2 (Ğ½Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ / 30%) | {pos4} | {pos5} | {pos6} |")
    md.append(f"| 3 (Ñ€Ğ¸ÑĞºĞ¸ / 10%) | {pos7} | {pos8} | {pos9} |")
    return "\n".join(md)

def build_realization_focus_from_p9(p9: list[str]) -> dict:
    """
    3 Ñ„Ğ¾ĞºÑƒÑĞ° Ğ¸Ğ· 1 Ñ€ÑĞ´Ğ° (Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸ 1â€“3). Ğ–Ñ‘ÑÑ‚ĞºĞ¸Ğ¹ ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³: Ğ½Ğµ Ğ¿Ğ»Ñ‹Ğ²Ñ‘Ñ‚.
    Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚:
      {"focus1": {"title":..., "actions":[...]}, "focus2":..., "focus3":...}
    """
    pos1, pos2, pos3 = (p9[0] or "").strip(), (p9[1] or "").strip(), (p9[2] or "").strip()

    focus_map = {
        "ĞĞ¼ĞµÑ‚Ğ¸ÑÑ‚": {"title": "Ğ¡Ğ¼Ñ‹ÑĞ», ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ Ğ¸ ÑƒĞ¿Ğ°ĞºĞ¾Ğ²ĞºĞ° Ğ¸Ğ´ĞµĞ¹", "actions": [
            "Ğ¡Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ 1 ĞºĞ»ÑÑ‡ĞµĞ²ÑƒÑ Ğ¸Ğ´ĞµÑ/ĞºĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ñ Ğ¸ Ğ´ĞµÑ€Ğ¶Ğ°Ñ‚ÑŒ ĞµÑ‘ Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¹",
            "Ğ£Ğ¿Ğ°ĞºĞ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸Ğ´ĞµÑ Ğ² Ğ¿Ğ¾Ğ½ÑÑ‚Ğ½ÑƒÑ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ (Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°, ÑĞ·Ñ‹Ğº, Ñ‚ĞµĞ·Ğ¸ÑÑ‹)",
            "Ğ’Ñ‹ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ»Ğ¸Ğ½Ğ¸Ñ Â«Ğ¸Ğ´ĞµÑ â†’ Ñ†ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ â†’ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸ĞµÂ» Ğ±ĞµĞ· Ğ»Ğ¸ÑˆĞ½Ğ¸Ñ… Ñ‚ĞµĞ¼",
        ]},
        "Ğ¡Ğ°Ğ¿Ñ„Ğ¸Ñ€": {"title": "Ğ“Ğ»ÑƒĞ±Ğ¸Ğ½Ğ°, Ğ·Ğ½Ğ°Ğ½Ğ¸Ğµ Ğ¸ ÑÑĞ½Ğ¾ÑÑ‚ÑŒ Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ñ", "actions": [
            "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞ¾Ğ±ÑÑ‚Ğ²ĞµĞ½Ğ½ÑƒÑ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ ÑĞ¼Ñ‹ÑĞ»Ğ¾Ğ²/Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ (ĞºĞ°Ğº Ğ²Ñ‹ Ğ¾Ğ±ÑŠÑÑĞ½ÑĞµÑ‚Ğµ Ğ¼Ğ¸Ñ€)",
            "Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ°Ñ‚Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ·Ğ½Ğ°Ğ½Ğ¸Ñ Ğ² Ğ¿Ğ¾Ğ½ÑÑ‚Ğ½Ñ‹Ğµ Ğ±Ğ»Ğ¾ĞºĞ¸ (ÑÑ…ĞµĞ¼Ñ‹, Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹)",
            "ĞŸÑ€Ğ¾ÑĞ²Ğ»ÑÑ‚ÑŒÑÑ Ñ‡ĞµÑ€ĞµĞ· ÑĞ¼Ñ‹ÑĞ»Ñ‹: Ğ¾Ğ±ÑŠÑÑĞ½ÑÑ‚ÑŒ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ‹Ğ¼Ğ¸ ÑĞ»Ğ¾Ğ²Ğ°Ğ¼Ğ¸",
        ]},
        "Ğ“ĞµĞ»Ğ¸Ğ¾Ğ´Ğ¾Ñ€": {"title": "Ğ“Ğ¾Ğ»Ğ¾Ñ, Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¸ Ñ€Ğ¾ÑÑ‚ Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸", "actions": [
            "Ğ ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ğ¾ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚ÑŒ: Ğ²Ğ¸Ğ´ĞµĞ¾/Ğ³Ğ¾Ğ»Ğ¾Ñ/ÑÑ„Ğ¸Ñ€Ñ‹ ĞºĞ°Ğº Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ĞºĞ°Ğ½Ğ°Ğ»",
            "ĞŸÑ€Ğ¾Ğ´Ğ²Ğ¸Ğ³Ğ°Ñ‚ÑŒ 1â€“2 ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… ÑĞ¼Ñ‹ÑĞ»Ğ° Ñ‡ĞµÑ€ĞµĞ· Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ÑĞµĞ¼ÑƒÑ Ğ¿Ğ¾Ğ´Ğ°Ñ‡Ñƒ",
            "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµÑÑ‚Ğ²Ğ¾ Ğ²Ğ¾ĞºÑ€ÑƒĞ³ Ğ¸Ğ´ĞµĞ¸ (Ñ€ÑƒĞ±Ñ€Ğ¸ĞºĞ¸, Ğ¿Ğ¾Ğ²Ğ¾Ğ´Ñ‹, Ğ¿Ğ»Ğ¾Ñ‰Ğ°Ğ´ĞºĞ°)",
        ]},
        "Ğ“Ñ€Ğ°Ğ½Ğ°Ñ‚": {"title": "Ğ­Ğ¼Ğ¾Ñ†Ğ¸Ñ, Ğ¾Ğ±Ñ€Ğ°Ğ· Ğ¸ ÑÑ†ĞµĞ½Ğ°", "actions": [
            "Ğ£ÑĞ¸Ğ»Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ğ°Ñ‡Ñƒ: Ñ€Ğ¾Ğ»ÑŒ/Ğ¾Ğ±Ñ€Ğ°Ğ·/ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ²Ñ‹Ñ€Ğ°Ğ·Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ",
            "Ğ”ĞµĞ»Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚/ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ¾ Ğ¸ Ğ²Ğ¾Ğ²Ğ»ĞµĞºĞ°ĞµÑ‚",
            "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ/Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹, Ğ³Ğ´Ğµ Ğ²Ñ‹ â€” Ñ†ĞµĞ½Ñ‚Ñ€ ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸ Ğ¸ Ğ²Ğ¿ĞµÑ‡Ğ°Ñ‚Ğ»ĞµĞ½Ğ¸Ñ",
        ]},
        "Ğ˜Ğ·ÑƒĞ¼Ñ€ÑƒĞ´": {"title": "ĞšÑ€Ğ°ÑĞ¾Ñ‚Ğ°, Ğ³Ğ°Ñ€Ğ¼Ğ¾Ğ½Ğ¸Ñ Ğ¸ Ğ°Ñ‚Ğ¼Ğ¾ÑÑ„ĞµÑ€Ğ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°", "actions": [
            "Ğ¡Ğ¾Ğ±Ğ¸Ñ€Ğ°Ñ‚ÑŒ ÑÑÑ‚ĞµÑ‚Ğ¸Ñ‡ĞµÑĞºÑƒÑ ÑÑ€ĞµĞ´Ñƒ (Ğ²Ğ¸Ğ·ÑƒĞ°Ğ», ÑÑ‚Ğ¸Ğ»ÑŒ, Ğ¿Ğ¾Ğ´Ğ°Ñ‡Ğ°)",
            "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ Â«ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ ĞºÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğ¹Â» Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ´Ğ»Ñ Ğ»ÑĞ´ĞµĞ¹",
            "Ğ”ĞµÑ€Ğ¶Ğ°Ñ‚ÑŒ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾/Ğ²ĞºÑƒÑ/ÑĞºĞ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ ĞºĞ°Ğº ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚",
        ]},
        "Ğ ÑƒĞ±Ğ¸Ğ½": {"title": "Ğ”Ñ€Ğ°Ğ¹Ğ², Ğ´Ñ€Ğ°Ğ¼Ğ°Ñ‚ÑƒÑ€Ğ³Ğ¸Ñ Ğ¸ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¼Ğ¾Ñ†Ğ¸ĞµĞ¹", "actions": [
            "Ğ”ĞµĞ»Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñ‹ Ñ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸ĞºĞ¾Ğ¹: ÑÑ„Ñ„ĞµĞºÑ‚, Ğ½Ğ°Ğ¿Ñ€ÑĞ¶ĞµĞ½Ğ¸Ğµ/Ñ€Ğ°Ğ·Ñ€ÑĞ´ĞºĞ°",
            "Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑ‚ÑŒ ÑĞ¼Ğ¾Ñ†Ğ¸ĞµĞ¹ Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸ Ñ‡ĞµÑ€ĞµĞ· ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ Ğ¸ Ğ¿Ğ¾Ğ´Ğ°Ñ‡Ñƒ",
            "Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸, Ğ³Ğ´Ğµ Ğ½ÑƒĞ¶Ğ½Ğ° ÑĞ¼ĞµĞ»Ğ¾ÑÑ‚ÑŒ, ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ Ğ¸ ÑĞ½ĞµÑ€Ğ³Ğ¸Ñ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°",
        ]},
        "Ğ¦Ğ¸Ñ‚Ñ€Ğ¸Ğ½": {"title": "Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ°, Ğ´ĞµĞ½ÑŒĞ³Ğ¸ Ğ¸ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ¼", "actions": [
            "Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²ÑƒÑ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ: Ñ‡Ñ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ñ‘Ñ‚Ğµ, Ğ·Ğ° Ñ‡Ñ‚Ğ¾ Ğ¿Ğ»Ğ°Ñ‚ÑÑ‚, ĞºĞ°Ğº Ñ€Ğ°ÑÑ‚Ñ‘Ñ‚ Ñ‡ĞµĞº",
            "ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹: Ñ€Ğ¾Ğ»Ğ¸, Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑÑ‹, Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ, ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒ",
            "Ğ£Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¸Ñ‚ÑŒ Ğ¼Ğ¾Ğ½ĞµÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ: Ğ¾Ğ´Ğ¸Ğ½ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚ â†’ Ğ¾Ğ´Ğ½Ğ° Ğ²Ğ¾Ñ€Ğ¾Ğ½ĞºĞ° â†’ Ğ¾Ğ´Ğ¸Ğ½ ĞºĞ°Ğ½Ğ°Ğ»",
        ]},
        "Ğ¯Ğ½Ñ‚Ğ°Ñ€ÑŒ": {"title": "ĞŸĞ¾Ñ€ÑĞ´Ğ¾Ğº, ÑƒÑÑ‚Ğ¾Ğ¹Ñ‡Ğ¸Ğ²Ğ¾ÑÑ‚ÑŒ Ğ¸ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ", "actions": [
            "ĞĞ°Ğ²ĞµÑÑ‚Ğ¸ Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº Ğ² ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğµ: Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°, Ñ€ĞµĞ¶Ğ¸Ğ¼, Ğ¾Ğ¿Ğ¾Ñ€Ñ‹",
            "Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ½ÑÑ‚Ğ½ÑƒÑ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ: Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ğ¸, Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ Â«ĞºĞ°Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚Â»",
            "Ğ”ĞµÑ€Ğ¶Ğ°Ñ‚ÑŒ ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ: Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ÑĞµĞ¼Ğ¾ÑÑ‚ÑŒ Ğ¸ Ğ¿Ñ€ĞµĞ´ÑĞºĞ°Ğ·ÑƒĞµĞ¼Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚",
        ]},
        "Ğ¨ÑƒĞ½Ğ³Ğ¸Ñ‚": {"title": "Ğ¤Ğ¾Ñ€Ğ¼Ğ°, Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ° Ğ¸ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµÑÑ‚Ğ²Ğ¾", "actions": [
            "Ğ”ĞµĞ»Ğ°Ñ‚ÑŒ Ñ‡ĞµÑ€ĞµĞ· Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºÑƒ: Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ğ²Ğ°Ğ¶Ğ½ĞµĞµ Ñ€Ğ°Ğ·Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ğ¹",
            "Ğ¡Ğ¾Ğ±Ğ¸Ñ€Ğ°Ñ‚ÑŒ Ğ±Ğ»Ğ¸Ğ·ĞºĞ¸Ğ¹ ĞºÑ€ÑƒĞ³: ĞºĞ¾Ğ¼ÑŒÑĞ½Ğ¸Ñ‚Ğ¸, ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ½Ñ‹Ğµ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸",
            "Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¸ĞºĞ»Ğ°Ğ´Ğ½Ñ‹Ğµ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹: Ñ‚ĞµĞ»ĞµÑĞ½Ñ‹Ğ¹/Ñ„Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚",
        ]},
    }

    def pick(pot: str) -> dict:
        pot = (pot or "").strip()
        return focus_map.get(pot, {
            "title": f"Ğ¤Ğ¾ĞºÑƒÑ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»Ğ° {pot or 'â€”'}",
            "actions": [
                "Ğ¡Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ, ĞºĞ°Ğº ÑÑ‚Ğ¾ Ğ¿Ñ€Ğ¾ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ğ² Ğ²Ğ°ÑˆĞµĞ¹ Ğ¶Ğ¸Ğ·Ğ½Ğ¸",
                "Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ 1â€“2 Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ°, Ğ³Ğ´Ğµ ÑÑ‚Ğ¾ Ğ´Ğ°Ñ‘Ñ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚",
                "Ğ—Ğ°ĞºÑ€ĞµĞ¿Ğ¸Ñ‚ÑŒ Ñ€ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ±ĞµĞ· Ğ¿ĞµÑ€ĞµĞ³Ñ€ÑƒĞ·Ğ°",
            ]
        })

    return {"focus1": pick(pos1), "focus2": pick(pos2), "focus3": pick(pos3)}

# =========================
# Canon -> Unified Report (NO DUPLICATES)
# =========================

# =========================
# Canon -> Strong Unified Report (SINGLE BLOCK, NO DUPLICATES)
# =========================

def _pot_key(p: str) -> str:
    """
    ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·ÑƒĞµÑ‚ Ğ¸Ğ¼Ñ Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»Ğ° Ğ¿Ğ¾Ğ´ ĞºĞ»ÑÑ‡Ğ¸ ĞºĞ°Ğ½Ğ¾Ğ½Ğ°.
    Ğ’ĞĞ–ĞĞ: ĞºĞ»ÑÑ‡Ğ¸ Ğ² ĞºĞ°Ğ½Ğ¾Ğ½Ğµ Ñƒ Ğ²Ğ°Ñ Ğ² Title Case ("ĞĞ¼ĞµÑ‚Ğ¸ÑÑ‚"), Ğ¿Ğ¾ÑÑ‚Ğ¾Ğ¼Ñƒ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ norm_pot_name.
    """
    return norm_pot_name(str(p or "").strip())


def _canon_dict_to_md(d: dict) -> str:
    """Ğ£Ğ½Ğ¸Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ğ¾ Ğ¿Ñ€ĞµĞ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ ÑĞ»Ğ¾Ğ²Ğ°Ñ€ÑŒ ĞºĞ°Ğ½Ğ¾Ğ½Ğ° Ğ² Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼Ñ‹Ğ¹ Markdown."""
    if not d:
        return "â€”"

    lines = []
    for k, v in d.items():
        if v in (None, "", [], {}):
            continue

        title = str(k).replace("_", " ").strip().capitalize()

        if isinstance(v, str):
            lines.append(f"**{title}:** {v.strip()}")

        elif isinstance(v, list):
            items = [str(x).strip() for x in v if str(x).strip()]
            if items:
                lines.append(f"**{title}:**")
                lines.extend([f"- {x}" for x in items])

        elif isinstance(v, dict):
            lines.append(f"**{title}:**")
            for kk, vv in v.items():
                if vv in (None, "", [], {}):
                    continue
                kk_t = str(kk).replace("_", " ").strip().capitalize()
                if isinstance(vv, list):
                    vv_items = [str(x).strip() for x in vv if str(x).strip()]
                    if vv_items:
                        lines.append(f"- **{kk_t}:**")
                        lines.extend([f"  - {x}" for x in vv_items])
                else:
                    lines.append(f"- **{kk_t}:** {str(vv).strip()}")

    return "\n".join(lines).strip() or "â€”"


def _canon_1_3(pot: str, col: str) -> str:
    """
    ĞšĞ°Ğ½Ğ¾Ğ½ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹ 1-3 (Ğ¸ Ñ‚Ğ°ĞºĞ¶Ğµ 7-9) Ğ±ĞµÑ€Ñ‘Ğ¼ Ğ¸Ğ· POT_CANON_1_3[pot][col].
    col in {"perception","motivation","instrument"}
    """
    pot = _pot_key(pot)
    if not pot:
        return "â€”"
    d = (globals().get("POT_CANON_1_3") or {}).get(pot)
    if not d:
        return "â€”"

    cell = d.get(col)
    if isinstance(cell, str):
        return cell.strip() or "â€”"
    if isinstance(cell, dict):
        return _canon_dict_to_md(cell)
    return "â€”"


def _canon_pos(pot: str, dict_name: str) -> str:
    """
    ĞšĞ°Ğ½Ğ¾Ğ½ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹ 4-6 Ğ±ĞµÑ€Ñ‘Ğ¼ Ğ¸Ğ· POT_4_CANON / POT_5_CANON / POT_6_CANON.
    """
    pot = _pot_key(pot)
    if not pot:
        return "â€”"
    canon_dict = globals().get(dict_name) or {}
    d = canon_dict.get(pot)
    if isinstance(d, str):
        return d.strip() or "â€”"
    if isinstance(d, dict):
        return _canon_dict_to_md(d)
    return "â€”"


def build_canon_texts_1_9_from_p9(p9: list[str]) -> dict:
    """
    Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ CANON_TEXTS Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹ 1..9.
    1-3: POT_CANON_1_3 Ğ¿Ğ¾ ÑÑ‚Ğ¾Ğ»Ğ±Ñ†Ğ°Ğ¼
    4-6: POT_4_CANON / POT_5_CANON / POT_6_CANON
    7-9: POT_CANON_1_3 Ğ¿Ğ¾ ÑÑ‚Ğ¾Ğ»Ğ±Ñ†Ğ°Ğ¼ (Ñ‚Ğ°Ğº Ğ¶Ğµ, ĞºĞ°Ğº 1-3)
    """
    def safe(i: int) -> str:
        return _pot_key(p9[i]) if len(p9) > i else ""

    pos1, pos2, pos3 = safe(0), safe(1), safe(2)
    pos4, pos5, pos6 = safe(3), safe(4), safe(5)
    pos7, pos8, pos9 = safe(6), safe(7), safe(8)

    return {
        "pos1": _canon_1_3(pos1, "perception"),
        "pos2": _canon_1_3(pos2, "motivation"),
        "pos3": _canon_1_3(pos3, "instrument"),

        "pos4": _canon_pos(pos4, "POT_4_CANON"),
        "pos5": _canon_pos(pos5, "POT_5_CANON"),
        "pos6": _canon_pos(pos6, "POT_6_CANON"),

        "pos7": _canon_1_3(pos7, "perception"),
        "pos8": _canon_1_3(pos8, "motivation"),
        "pos9": _canon_1_3(pos9, "instrument"),
    }


def build_unified_report_system_prompt_strong() -> str:
    return "\n".join([
        "# ROLE",
        "Ğ’Ñ‹ â€” Ğ¼Ğ°ÑÑ‚ĞµÑ€-ÑĞºÑĞ¿ĞµÑ€Ñ‚ Ğ¿Ğ¾ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¸ĞºĞµ Ğ¡ĞŸĞ§ / Personal Potentials (Ğ¼Ğ°Ñ‚Ñ€Ğ¸Ñ†Ğ° 3x3).",
        "Ğ’Ñ‹ Ğ¿Ğ¸ÑˆĞµÑ‚Ğµ ÑĞ¸Ğ»ÑŒĞ½Ñ‹Ğ¹, Ñ‚Ğ¾Ñ‡Ğ½Ñ‹Ğ¹, Ğ²Ğ·Ñ€Ğ¾ÑĞ»Ñ‹Ğ¹ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ ÑƒÑ€Ğ¾Ğ²Ğ½Ñ Â«Ğ¿Ñ€ĞµĞ¼Ğ¸ÑƒĞ¼-Ğ´Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ°Â».",
        "",
        "# Ğ–ĞĞ¡Ğ¢ĞšĞ",
        "- Ğ¯Ğ·Ñ‹Ğº: Ñ€ÑƒÑÑĞºĞ¸Ğ¹.",
        "- ĞĞ±Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ½Ğ° Â«Ğ’Ğ«Â»: Â«Ñƒ Ğ²Ğ°ÑÂ», Â«Ğ²Ğ°Ğ¼Â», Â«Ğ²Ğ°ÑˆĞ° Ğ¼Ğ°Ñ‚Ñ€Ğ¸Ñ†Ğ°Â».",
        "- Ğ—Ğ°Ğ¿Ñ€ĞµÑ‰ĞµĞ½Ğ¾ Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ğ¾Ñ‚ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ³Ğ¾ Ğ»Ğ¸Ñ†Ğ° ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ° (Ñ/Ğ¼Ğ½Ğµ/Ğ¼Ğ¾Ñ‘).",
        "- ĞĞµ ÑĞ·Ğ¾Ñ‚ĞµÑ€Ğ¸ĞºĞ°. ĞĞµ Ñ‚ĞµÑ€Ğ°Ğ¿Ğ¸Ñ. ĞĞµ Ğ´Ğ¸Ğ°Ğ³Ğ½Ğ¾Ğ·Ñ‹.",
        "- ĞĞ¸ĞºĞ°ĞºĞ¸Ñ… Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ğ¹, Ğ¿Ğ»Ğ°Ğ½Ğ¾Ğ², Ñ‡ĞµĞº-Ğ»Ğ¸ÑÑ‚Ğ¾Ğ², Â«ÑĞ´ĞµĞ»Ğ°Ğ¹Ñ‚Ğµ/Ğ¿Ğ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚ĞµÂ».",
        "- ĞĞ¸ĞºĞ°ĞºĞ¸Ñ… Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğº ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñƒ.",
        "",
        "# Ğ˜Ğ¡Ğ¢ĞĞ§ĞĞ˜Ğš ĞŸĞ ĞĞ’Ğ”Ğ«",
        "- Ğ¤Ğ°ĞºÑ‚Ñ‹ Ğ¾ Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»Ğ°Ñ… Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¢ĞĞ›Ğ¬ĞšĞ Ğ¸Ğ· CANON_TEXTS.",
        "- Ğ Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ° Ğ¸Ğ½Ñ‚ĞµÑ€Ğ¿Ñ€ĞµÑ‚Ğ°Ñ†Ğ¸Ñ Ğ¸ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ¿Ñ€Ğ¾ÑĞ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¢ĞĞ›Ğ¬ĞšĞ ĞºĞ°Ğº Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ¾Ñ‚ ĞºĞ°Ğ½Ğ¾Ğ½Ğ°.",
        "- Ğ•ÑĞ»Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¼Ğ°Ğ»Ğ¾ â€” Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ: Â«Ğ² ĞºĞ°Ğ½Ğ¾Ğ½Ğµ Ğ¼Ğ°Ğ»Ğ¾ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…Â», Ğ¸ Ğ½Ğµ Ğ²Ñ‹Ğ´ÑƒĞ¼Ñ‹Ğ²Ğ°Ñ‚ÑŒ.",
        "",
        "# Ğ¡Ğ¢Ğ˜Ğ›Ğ¬",
        "- Ğ¡Ğ¸Ğ»ÑŒĞ½Ğ¾, ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾, Ñ ÑƒĞ·Ğ½Ğ°Ğ²Ğ°ĞµĞ¼Ñ‹Ğ¼Ğ¸ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°Ğ¼Ğ¸.",
        "- ĞœĞµĞ½ÑŒÑˆĞµ Ğ¾Ğ±Ñ‰Ğ¸Ñ… ÑĞ»Ğ¾Ğ². Ğ‘Ğ¾Ğ»ÑŒÑˆĞµ Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ğ½Ğ¾-ÑĞ»ĞµĞ´ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ñ… ÑĞ²ÑĞ·Ğ¾Ğº Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸ÑĞ¼Ğ¸.",
        "- Ğ’ÑÑ‚ÑƒĞ¿Ğ»ĞµĞ½Ğ¸Ğµ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾ Ğ¿Ğ¾Ğ´ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸ Ğ¼Ğ°Ñ‚Ñ€Ğ¸Ñ†Ñ‹, Ğ° Ğ½Ğµ ÑƒĞ½Ğ¸Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¾Ğ¼.",
        "",
        "# OUTPUT",
        "- ĞĞ´Ğ¸Ğ½ ĞµĞ´Ğ¸Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ Ğ² Markdown. Ğ‘ĞµĞ· JSON. Ğ‘ĞµĞ· ÑĞ»ÑƒĞ¶ĞµĞ±Ğ½Ñ‹Ñ… Ğ¼ĞµÑ‚Ğ¾Ğº.",
    ]).strip()


def build_unified_report_user_prompt_strong(name: str, matrix_md: str, p9: list[str], canon_texts_1_9: dict) -> str:
    import json

    # Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸ (Ğ´Ğ»Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ñ‚ĞµĞºÑÑ‚Ğ°)
    pos1, pos2, pos3, pos4, pos5, pos6, pos7, pos8, pos9 = [(_pot_key(x) if x else "â€”") for x in (p9[:9] or [])]

    return "\n".join([
        f"ĞšĞ»Ğ¸ĞµĞ½Ñ‚: {name}",
        "",
        "ĞœĞĞ¢Ğ Ğ˜Ğ¦Ğ 3x3 (Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°):",
        matrix_md,
        "",
        "ĞŸĞĞ—Ğ˜Ğ¦Ğ˜Ğ˜ 1..9 (Ğ´Ğ»Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ñ‚ĞµĞºÑÑ‚Ğ°):",
        f"1:{pos1} 2:{pos2} 3:{pos3} 4:{pos4} 5:{pos5} 6:{pos6} 7:{pos7} 8:{pos8} 9:{pos9}",
        "",
        "CANON_TEXTS (Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº Ğ¿Ñ€Ğ°Ğ²Ğ´Ñ‹):",
        json.dumps(canon_texts_1_9, ensure_ascii=False, indent=2),
        "",
        "Ğ¡Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ğ¡Ğ˜Ğ›Ğ¬ĞĞ•Ğ™Ğ¨Ğ˜Ğ™ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ (Markdown), Ğ³Ğ»ÑƒĞ±Ğ¶Ğµ ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ğ¾Ğ¹ Ğ´Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ¸.",
        "ĞĞ±Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ½Ğ° Â«Ğ²Ñ‹Â». ĞĞµĞ»ÑŒĞ·Ñ Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ñ/Ğ¿Ğ»Ğ°Ğ½Ñ‹/Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ğ¸. ĞĞµĞ»ÑŒĞ·Ñ Ğ·Ğ°Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹.",
        "",
        "Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ (ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾):",
        "1) Ğ’ÑÑ‚ÑƒĞ¿Ğ»ĞµĞ½Ğ¸Ğµ (8â€“12 Ğ°Ğ±Ğ·Ğ°Ñ†ĞµĞ²):",
        "   - Ğ¾Ğ±ÑŠÑÑĞ½Ğ¸Ñ‚Ğµ Ğ¼Ğ°Ñ‚Ñ€Ğ¸Ñ†Ñƒ (60/30/10 + ÑÑ‚Ğ¾Ğ»Ğ±Ñ†Ñ‹),",
        "   - Ğ¿Ğ¾ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ 2â€“4 Ñ‡Ñ‘Ñ‚ĞºĞ¸Ñ… Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ğ½Ğ¾-ÑĞ»ĞµĞ´ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ñ… ÑĞ²ÑĞ·ĞºĞ¸: ĞºĞ°Ğº Ğ’Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğµ Ğ²Ğ»Ğ¸ÑĞµÑ‚ Ğ½Ğ° ĞœĞ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ, ĞºĞ°Ğº Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ Â«Ğ¿Ñ€Ğ¸Ğ·ĞµĞ¼Ğ»ÑĞµÑ‚Â» ÑĞ´Ñ€Ğ¾, ĞºĞ°Ğº 2 Ñ€ÑĞ´ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ.",
        "",
        "2) ĞœĞ°Ñ‚Ñ€Ğ¸Ñ†Ğ° 3x3 (Ğ¾ÑÑ‚Ğ°Ğ²ÑŒÑ‚Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñƒ ĞºĞ°Ğº ĞµÑÑ‚ÑŒ).",
        "",
        "3) ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ Ñ€ÑĞ´ â€” ÑĞ´Ñ€Ğ¾ / Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ / Ğ¼Ğ¾Ğ½ĞµÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (Ğ¾Ñ‡ĞµĞ½ÑŒ Ğ¿Ğ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ¾):",
        "   3.1 ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ñ 1 (Ğ’Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğµ):",
        "       - 4â€“8 Ñ‚ĞµĞ·Ğ¸ÑĞ¾Ğ² ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ¸Ğ· CANON_TEXTS.pos1 (ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¾, ÑĞ¿Ğ¸ÑĞºĞ¾Ğ¼),",
        "       - Ğ·Ğ°Ñ‚ĞµĞ¼ 4â€“8 Ğ°Ğ±Ğ·Ğ°Ñ†ĞµĞ² Ğ¸Ğ½Ñ‚ĞµÑ€Ğ¿Ñ€ĞµÑ‚Ğ°Ñ†Ğ¸Ğ¸: ĞºĞ°Ğº Ğ²Ñ‹ ÑÑ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚Ğµ Ğ² Ğ¶Ğ¸Ğ·Ğ½Ğ¸/Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ/Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ°Ñ… (Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ½Ğ¾ Ğ¾Ñ‚ ĞºĞ°Ğ½Ğ¾Ğ½Ğ°).",
        "   3.2 ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ñ 2 (ĞœĞ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ):",
        "       - 4â€“8 Ñ‚ĞµĞ·Ğ¸ÑĞ¾Ğ² ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ¸Ğ· CANON_TEXTS.pos2,",
        "       - Ğ·Ğ°Ñ‚ĞµĞ¼ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ¿Ñ€ĞµÑ‚Ğ°Ñ†Ğ¸Ñ: Ñ‡Ñ‚Ğ¾ Ğ´Ğ°Ñ‘Ñ‚ Ñ‚Ğ¾Ğ¿Ğ»Ğ¸Ğ²Ğ¾, Ñ‡Ñ‚Ğ¾ Ğ¾Ğ±Ğ½ÑƒĞ»ÑĞµÑ‚, ĞºĞ°ĞºĞ¸Ğµ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹ Â«Ğ²ĞºĞ»ÑÑ‡Ğ°ÑÑ‚Â» (Ğ±ĞµĞ· ÑĞ¾Ğ²ĞµÑ‚Ğ¾Ğ²).",
        "   3.3 ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ñ 3 (Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚):",
        "       - 4â€“8 Ñ‚ĞµĞ·Ğ¸ÑĞ¾Ğ² ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ¸Ğ· CANON_TEXTS.pos3,",
        "       - Ğ·Ğ°Ñ‚ĞµĞ¼ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ¿Ñ€ĞµÑ‚Ğ°Ñ†Ğ¸Ñ: ĞºĞ°Ğº Ğ²Ñ‹ Ğ´ĞµĞ»Ğ°ĞµÑ‚Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚, Ğ·Ğ° ÑÑ‡Ñ‘Ñ‚ Ñ‡ĞµĞ³Ğ¾ Ñ€Ğ°ÑÑ‚Ñ‘Ñ‚ Ğ´Ğ¾Ñ…Ğ¾Ğ´, Ñ‡Ñ‚Ğ¾ Ğ²Ñ‹ Ğ´ĞµĞ»Ğ°ĞµÑ‚Ğµ Ğ»ÑƒÑ‡ÑˆĞµ Ğ¼Ğ½Ğ¾Ğ³Ğ¸Ñ… (Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ½Ğ¾).",
        "   3.4 Ğ¡Ğ²ÑĞ·ĞºĞ° 1â€“2â€“3:",
        "       - 6â€“10 Ğ°Ğ±Ğ·Ğ°Ñ†ĞµĞ²: ÑĞ¸Ğ½ĞµÑ€Ğ³Ğ¸Ñ, ÑĞ¸Ğ»ÑŒĞ½Ñ‹Ğµ Ñ€Ğ¾Ğ»Ğ¸/Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹, Ñ‚Ğ¸Ğ¿Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµĞºĞ¾ÑÑ‹ Â«Ğ¼Ğ¸Ğ¼Ğ¾ ÑĞ´Ñ€Ğ°Â», ĞºĞ°Ğº Ğ²Ñ‹Ğ³Ğ»ÑĞ´Ğ¸Ñ‚ Â«Ğ²Ğ°Ñˆ ÑÑ‚Ğ¸Ğ»ÑŒ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸Â» ĞºĞ¾Ğ³Ğ´Ğ° Ğ²Ñ‹ Ğ² ÑĞ¸Ğ»Ğµ.",
        "",
        "4) Ğ’Ñ‚Ğ¾Ñ€Ğ¾Ğ¹ Ñ€ÑĞ´ â€” Ğ½Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ / ÑĞ¾Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑĞ»Ğ¾Ğ¹ / Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ (Ğ¿Ğ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ¾):",
        "   4.1 ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ñ 4:",
        "       - 4â€“8 Ñ‚ĞµĞ·Ğ¸ÑĞ¾Ğ² ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ¸Ğ· CANON_TEXTS.pos4,",
        "       - Ğ·Ğ°Ñ‚ĞµĞ¼ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ¿Ñ€ĞµÑ‚Ğ°Ñ†Ğ¸Ñ: Ñ‡Ñ‚Ğ¾ Ğ²Ñ‹ ÑÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚Ğµ Ñƒ Ğ»ÑĞ´ĞµĞ¹/Ğ² ÑĞ¸Ñ‚ÑƒĞ°Ñ†Ğ¸ÑÑ…, Ğ³Ğ´Ğµ Ğ²Ğ°ÑˆĞ° Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¾ÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ Ğ·Ğ°Ğ¼ĞµÑ‚Ğ½Ğ°.",
        "   4.2 ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ñ 5:",
        "       - 4â€“8 Ñ‚ĞµĞ·Ğ¸ÑĞ¾Ğ² ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ¸Ğ· CANON_TEXTS.pos5,",
        "       - Ğ·Ğ°Ñ‚ĞµĞ¼ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ¿Ñ€ĞµÑ‚Ğ°Ñ†Ğ¸Ñ: Ñ‡Ñ‚Ğ¾ Ğ»ÑĞ´Ğ¸ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾ Ñ…Ğ¾Ñ‚ÑÑ‚ Ñ€ÑĞ´Ğ¾Ğ¼ Ñ Ğ²Ğ°Ğ¼Ğ¸ (Ğ±ĞµĞ· Ğ¸Ğ´ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸).",
        "   4.3 ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ñ 6:",
        "       - 4â€“8 Ñ‚ĞµĞ·Ğ¸ÑĞ¾Ğ² ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ¸Ğ· CANON_TEXTS.pos6,",
        "       - Ğ·Ğ°Ñ‚ĞµĞ¼ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ¿Ñ€ĞµÑ‚Ğ°Ñ†Ğ¸Ñ: Ñ‡Ñ‚Ğ¾ Ğ¼ĞµĞ½ÑĞµÑ‚ÑÑ Ñƒ Ğ»ÑĞ´ĞµĞ¹ Ğ¿Ğ¾ÑĞ»Ğµ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ° Ñ Ğ²Ğ°Ğ¼Ğ¸.",
        "   4.4 ĞšĞ°Ğº 2 Ñ€ÑĞ´ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ 1 Ñ€ÑĞ´:",
        "       - 6â€“10 Ğ°Ğ±Ğ·Ğ°Ñ†ĞµĞ²: Ğ¾Ğ±ÑŠÑÑĞ½Ğ¸Ñ‚ÑŒ Â«Ğ¿Ğ¾Ñ‡ĞµĞ¼Ñƒ Ğ±ĞµĞ· 2 Ñ€ÑĞ´Ğ° 1 Ñ€ÑĞ´ Ğ³Ğ»Ğ¾Ñ…Ğ½ĞµÑ‚Â» Ğ¸ ĞºĞ°Ğº ÑÑ‚Ğ¾ Ğ²Ğ¸Ğ´Ğ½Ğ¾ Ğ¿Ğ¾ Ğ¸Ñ… ÑĞ¾Ñ‡ĞµÑ‚Ğ°Ğ½Ğ¸Ñ 4â€“6 â†’ 1â€“3.",
        "",
        "5) Ğ¢Ñ€ĞµÑ‚Ğ¸Ğ¹ Ñ€ÑĞ´ â€” Ñ€Ğ¸ÑĞºĞ¸ / Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾ÑĞ²Ğ»ĞµĞ½Ğ¸Ñ / Ğ´ĞµĞ»ĞµĞ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¾, Ğ½Ğ¾ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾):",
        "   - Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° 1 Ñ„Ñ€Ğ°Ğ·Ğ°: Â«3 Ñ€ÑĞ´ â€” Ğ·Ğ¾Ğ½Ğ° Ñ€Ğ¸ÑĞºĞ°, Ğ´ĞµÑ€Ğ¶Ğ°Ñ‚ÑŒ Ğ´Ğ¾ 10% Ğ¸ Ğ¿Ğ¾ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ´ĞµĞ»ĞµĞ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒÂ».",
        "   - Ğ—Ğ°Ñ‚ĞµĞ¼ Ğ¿Ğ¾ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸ 7â€“9 Ğ”ĞĞ™Ğ¢Ğ• 2 Ğ¼Ğ¸Ğ½Ğ¸-Ğ±Ğ»Ğ¾ĞºĞ°:",
        "     A) Â«ĞšĞ°Ğº Ğ¿Ñ€Ğ¾ÑĞ²Ğ»ÑĞµÑ‚ÑÑÂ» â€” ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ½Ğ¾ Ğ¸Ğ· CANON_TEXTS.pos7/pos8/pos9 (Ğ±ĞµĞ· Ğ²Ñ‹Ğ´ÑƒĞ¼ĞºĞ¸).",
        "     B) Â«Ğ§Ñ‚Ğ¾ ÑƒĞ¼ĞµĞ½ÑŒÑˆĞ¸Ñ‚ÑŒÂ» â€” 2â€“4 Ğ¿ÑƒĞ½ĞºÑ‚Ğ°: ĞºĞ°ĞºĞ¸Ğµ Ğ¿Ñ€Ğ¾ÑĞ²Ğ»ĞµĞ½Ğ¸Ñ ÑÑ‚Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»Ğ° Ğ²Ğ°Ğ¶Ğ½Ğ¾ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡Ğ¸Ğ²Ğ°Ñ‚ÑŒ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¾Ğ½ Ğ½Ğµ ÑÑŠĞµĞ´Ğ°Ğ» 1 Ñ€ÑĞ´ (Ğ±ĞµĞ· Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ğ¹, Ğ±ĞµĞ· â€œĞ´ĞµĞ»Ğ°Ğ¹Ñ‚Ğµâ€).",
        "",
        "6) Ğ’Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½Ğ¸Ğµ ÑĞ²ÑĞ·ĞºĞ¸ Ğ¸ Ğ½Ğ°Ğ¿Ñ€ÑĞ¶ĞµĞ½Ğ¸Ñ (3-5 Ğ³Ğ¸Ğ¿Ğ¾Ñ‚ĞµĞ·):",
        "   - Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¾Ğ¹ Ğ¼Ğ°Ñ‚Ñ€Ğ¸Ñ†Ñ‹ 1 Ğ¸ 2 Ñ€ÑĞ´Ğ°, + Ñ‚ĞµĞ¼, Ñ‡Ñ‚Ğ¾ ÑƒĞ¶Ğµ ÑĞºĞ°Ğ·Ğ°Ğ½Ğ¾ Ğ¸Ğ· ĞºĞ°Ğ½Ğ¾Ğ½Ğ°.",
        "   - Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ ĞºĞ°Ğº Ğ½Ğ°Ğ±Ğ»ÑĞ´ĞµĞ½Ğ¸Ñ: Â«Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ñ€Ğ¾ÑĞ²Ğ»ÑÑ‚ÑŒÑÑÂ», Â«Ñ‡Ğ°ÑÑ‚Ğ¾ Ğ²Ñ‹Ğ³Ğ»ÑĞ´Ğ¸Ñ‚ Ñ‚Ğ°ĞºÂ», Ğ±ĞµĞ· Ğ´Ğ¸Ğ°Ğ³Ğ½Ğ¾Ğ·Ğ¾Ğ².",
        "",
        "7) Ğ˜Ñ‚Ğ¾Ğ³Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ¾Ñ€Ñ‚Ñ€ĞµÑ‚ (18â€“28 ÑÑ‚Ñ€Ğ¾Ğº):",
        "   - Ğ¾Ñ‡ĞµĞ½ÑŒ ÑĞ¸Ğ»ÑŒĞ½Ğ°Ñ ÑĞ±Ğ¾Ñ€ĞºĞ° Ğ»Ğ¸Ñ‡Ğ½Ğ¾ÑÑ‚Ğ¸: ĞºÑ‚Ğ¾ Ğ²Ñ‹, Ñ‡Ñ‚Ğ¾ Ğ²Ğ°Ğ¼ Ğ²Ğ°Ğ¶Ğ½Ğ¾, Ğ²Ğ°Ñˆ ÑÑ‚Ğ¸Ğ»ÑŒ ÑĞ¸Ğ»Ñ‹, Ğ²Ğ°ÑˆĞ° Ñ†ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ Ğ´Ğ»Ñ Ğ»ÑĞ´ĞµĞ¹, Ğ²Ğ°Ñˆ Â«Ñ„Ğ¸Ñ€Ğ¼ĞµĞ½Ğ½Ñ‹Ğ¹ ÑĞ¿Ğ¾ÑĞ¾Ğ± Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Â».",
        "",
        "ĞĞ“Ğ ĞĞĞ˜Ğ§Ğ•ĞĞ˜Ğ¯:",
        "- ĞĞ¸ĞºĞ°ĞºĞ¸Ñ… Â«ĞºÑ€Ğ¸ÑÑ‚Ğ°Ğ»Ğ»Ğ¾Ğ²/ĞºĞ°Ğ¼Ğ½ĞµĞ¹Â» â€” Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Â«Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»Â».",
        "- Ğ•ÑĞ»Ğ¸ Ğ² ĞºĞ°Ğ½Ğ¾Ğ½Ğµ Ğ¼Ğ°Ğ»Ğ¾ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… â€” Ñ‚Ğ°Ğº Ğ¸ Ğ¿Ğ¸ÑˆĞ¸Ñ‚Ğµ.",
    ]).strip()


def generate_extended_report(openai_client, model: str, profile: dict) -> str:
    """
    Ğ¡Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ ĞµĞ´Ğ¸Ğ½Ñ‹Ğ¹ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚:
    - Ğ¾Ğ±Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ğ’Ğ«
    - Ğ±ĞµĞ· Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ/Ğ‘
    - Ğ±ĞµĞ· Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ğ¹/Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
    - Ğ¾Ğ¿Ğ¾Ñ€Ğ° Ğ½Ğ° ĞºĞ°Ğ½Ğ¾Ğ½ 1â€“9 (7â€“9 = ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¾ + Ñ‡Ñ‚Ğ¾ ÑƒĞ¼ĞµĞ½ÑŒÑˆĞ¸Ñ‚ÑŒ)
    """
    f = (profile or {}).get("foundation", {}) or {}
    name = (f.get("name") or "ĞšĞ»Ğ¸ĞµĞ½Ñ‚").strip()
    matrix_raw = (f.get("potentials_table") or "").strip()

    if not matrix_raw:
        return "ĞÑˆĞ¸Ğ±ĞºĞ°: Ğ¼Ğ°Ñ‚Ñ€Ğ¸Ñ†Ğ° Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»Ğ¾Ğ² Ğ¿ÑƒÑÑ‚Ğ°Ñ. Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»Ñ‹ Ğ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚Ğµ Ğ¾ÑĞ½Ğ¾Ğ²Ñƒ."

    p9 = parse_potentials_9(matrix_raw)
    if len(p9) < 9:
        return (
            "ĞÑˆĞ¸Ğ±ĞºĞ°: Ğ½Ğµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ÑŒ 9 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»Ğ¾Ğ².\n\n"
            "Ğ’ÑÑ‚Ğ°Ğ²ÑŒÑ‚Ğµ 9 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»Ğ¾Ğ² (Ñ‡ĞµÑ€ĞµĞ· Ğ·Ğ°Ğ¿ÑÑ‚ÑƒÑ Ğ¸Ğ»Ğ¸ Ğ½ÑƒĞ¼ĞµÑ€Ğ°Ñ†Ğ¸ĞµĞ¹ 1â€“9)."
        )

    # Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·ÑƒĞµĞ¼ Ğ¸Ğ¼ĞµĞ½Ğ° (Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ÑĞ¾Ğ²Ğ¿Ğ°Ğ´Ğ°Ğ»Ğ¸ Ñ ĞºĞ»ÑÑ‡Ğ°Ğ¼Ğ¸ ĞºĞ°Ğ½Ğ¾Ğ½Ğ°)
    p9 = [_pot_key(x) for x in p9[:9]]

    matrix_md = build_matrix_md(p9)
    canon_texts_1_9 = build_canon_texts_1_9_from_p9(p9)

    sys = build_unified_report_system_prompt_strong()
    user = build_unified_report_user_prompt_strong(
        name=name,
        matrix_md=matrix_md,
        p9=p9,
        canon_texts_1_9=canon_texts_1_9,
    )

    resp = openai_client.chat.completions.create(
        model=model,
        messages=[
            {"role": "system", "content": sys},
            {"role": "user", "content": user},
        ],
        temperature=0.25,
    )
    return (resp.choices[0].message.content or "").strip()
# =========================

def _uniq(items: list[str]) -> list[str]:
    out, seen = [], set()
    for x in items or []:
        s = (str(x or "").strip())
        if not s:
            continue
        k = s.lower()
        if k in seen:
            continue
        seen.add(k)
        out.append(s)
    return out


def _uniq(xs):
    out, seen = [], set()
    for x in xs or []:
        s = str(x).strip()
        if not s:
            continue
        k = s.lower()
        if k not in seen:
            out.append(s)
            seen.add(k)
    return out

def get_hobby_suggestions_from_p9(p9: list[str]) -> dict:
    """
    Ğ‘ĞµÑ€Ñ‘Ğ¼ Ñ…Ğ¾Ğ±Ğ±Ğ¸ Ğ¿Ğ¾ 2 Ñ€ÑĞ´Ñƒ:
      - pos4 -> Ğ»Ğ¸Ñ‡Ğ½Ğ¾Ğµ (Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğµ/ÑÑĞ½Ğ¾ÑÑ‚ÑŒ)
      - pos5 -> Ğ¸Ğ½Ğ´Ğ¸Ğ²Ğ¸Ğ´ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¿Ñ€Ğ¾ÑĞ²Ğ»ĞµĞ½Ğ¸Ğµ (Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ¾Ğ´Ğ½Ğ¾Ğ¼Ñƒ)
      - pos6 -> ĞºĞ¾Ğ»Ğ»ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ (ÑĞ¾Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑĞ½ĞµÑ€Ğ³Ğ¸Ñ/Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚)
    + recovery, game_goal

    Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµĞ¼ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ğµ ÑĞ¿Ğ¸ÑĞºĞ¸ Ğ´Ğ»Ñ UI.
    """
    pos4 = (p9[3] or "").strip() if len(p9) > 3 else ""
    pos5 = (p9[4] or "").strip() if len(p9) > 4 else ""
    pos6 = (p9[5] or "").strip() if len(p9) > 5 else ""

    c4 = (POT_HOBBY_CANON or {}).get(pos4) or {}
    c5 = (POT_HOBBY_CANON or {}).get(pos5) or {}
    c6 = (POT_HOBBY_CANON or {}).get(pos6) or {}

    solo = _uniq(c4.get("pos4_personal", []))
    individual = _uniq(c5.get("pos5_solo_expression", []))
    collective = _uniq(c6.get("pos6_collective", []))

    recovery = _uniq((c4.get("recovery", []) + c5.get("recovery", []) + c6.get("recovery", [])))
    game_goal = _uniq((c4.get("game_goal", []) + c5.get("game_goal", []) + c6.get("game_goal", [])))

    return {
        "pos4": pos4, "pos5": pos5, "pos6": pos6,
        "solo": solo,
        "individual": individual,
        "collective": collective,
        "recovery": recovery,
        "game_goal": game_goal,
    }

def _safe_default(options: list[str], default: list[str]) -> list[str]:
    opt_set = set(options or [])
    return [x for x in (default or []) if x in opt_set]

def hobbies_tab(profile: dict):
    profile = ensure_profile_schema(profile)
    f = profile["foundation"]
    r = profile["realization"]

    st.markdown("## Ğ¥Ğ¾Ğ±Ğ±Ğ¸ â€” ÑĞ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ±Ğ»Ğ¾Ğº 2 Ñ€ÑĞ´Ğ°")
    if not (f.get("potentials_table") or "").strip():
        st.info("Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»Ñ‹ Ğ²Ğ¾ Ğ²ĞºĞ»Ğ°Ğ´ĞºĞµ Â«0) ĞÑĞ½Ğ¾Ğ²Ğ°Â».")
        return

    p9 = parse_potentials_9(f.get("potentials_table",""))
    sugg = get_hobby_suggestions_from_p9(p9)

    pos4 = sugg.get("pos4") or "â€”"
    pos5 = sugg.get("pos5") or "â€”"
    pos6 = sugg.get("pos6") or "â€”"
    st.caption(f"2 Ñ€ÑĞ´: Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ 4 = {pos4} Â· Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ 5 = {pos5} Â· Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ 6 = {pos6}")

    saved = r.get("hobbies_selected", []) or []

    c1, c2 = st.columns(2)

    with c1:
        st.markdown("### ğŸ§˜ Ğ›Ğ¸Ñ‡Ğ½Ğ¾Ğµ (Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ 4)")
        st.caption("Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ñ…Ğ¾Ğ±Ğ±Ğ¸ (Ğ¾Ğ½Ğ¸ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸Ñ‚Ñ‹Ğ²Ğ°ÑÑ‚ Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğµ/ÑÑĞ½Ğ¾ÑÑ‚ÑŒ)")
        solo_opts = [f"Ğ›Ğ¸Ñ‡Ğ½Ğ¾Ğµ: {x}" for x in sugg["solo"]]
        solo_def = [x for x in saved if isinstance(x,str) and x.startswith("Ğ›Ğ¸Ñ‡Ğ½Ğ¾Ğµ: ")]
        solo_sel = st.multiselect(
            "Ğ›Ğ¸Ñ‡Ğ½Ğ¾Ğµ",
            options=solo_opts,
            default=_safe_default(solo_opts, solo_def),
            label_visibility="collapsed",
        )

        st.markdown("### ğŸŒ¿ Ğ’Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ°Ğ½Ğ°Ğ»Ğ°")
        st.caption("Ğ§ĞµĞ¼ Ñ€Ğ°Ğ·Ğ³Ñ€ÑƒĞ¶Ğ°Ñ‚ÑŒ Ğ³Ğ¾Ğ»Ğ¾Ğ²Ñƒ/ĞºĞ°Ğ½Ğ°Ğ» (Ğ±ĞµĞ· Ğ´Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ)")
        rec_opts = [f"Ğ’Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ: {x}" for x in sugg["recovery"]]
        rec_def = [x for x in saved if isinstance(x,str) and x.startswith("Ğ’Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ: ")]
        rec_sel = st.multiselect(
            "Ğ’Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ",
            options=rec_opts,
            default=_safe_default(rec_opts, rec_def),
            label_visibility="collapsed",
        )

    with c2:
        st.markdown("### ğŸ­ Ğ˜Ğ½Ğ´Ğ¸Ğ²Ğ¸Ğ´ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğµ (Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ 5)")
        st.caption("ĞĞ´Ğ¸Ğ½Ğ¾Ñ‡Ğ½Ğ¾Ğµ Ñ…Ğ¾Ğ±Ğ±Ğ¸/Ğ¿Ñ€Ğ¾ÑĞ²Ğ»ĞµĞ½Ğ¸Ğµ (Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ¾Ğ´Ğ½Ğ¾Ğ¼Ñƒ)")
        ind_opts = [f"Ğ˜Ğ½Ğ´Ğ¸Ğ²Ğ¸Ğ´ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğµ: {x}" for x in sugg["individual"]]
        ind_def = [x for x in saved if isinstance(x,str) and x.startswith("Ğ˜Ğ½Ğ´Ğ¸Ğ²Ğ¸Ğ´ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğµ: ")]
        ind_sel = st.multiselect(
            "Ğ˜Ğ½Ğ´Ğ¸Ğ²Ğ¸Ğ´ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğµ",
            options=ind_opts,
            default=_safe_default(ind_opts, ind_def),
            label_visibility="collapsed",
        )

        st.markdown("### ğŸ‘¥ ĞšĞ¾Ğ»Ğ»ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ (Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ 6)")
        st.caption("ĞšĞ¾Ğ»Ğ»ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ñ…Ğ¾Ğ±Ğ±Ğ¸ (ÑĞ¾Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑĞ½ĞµÑ€Ğ³Ğ¸Ñ/Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚)")
        col_opts = [f"ĞšĞ¾Ğ»Ğ»ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ: {x}" for x in sugg["collective"]]
        col_def = [x for x in saved if isinstance(x,str) and x.startswith("ĞšĞ¾Ğ»Ğ»ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ: ")]
        col_sel = st.multiselect(
            "ĞšĞ¾Ğ»Ğ»ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ",
            options=col_opts,
            default=_safe_default(col_opts, col_def),
            label_visibility="collapsed",
        )

        st.markdown("### ğŸ¯ Ğ˜Ğ³Ñ€Ğ¾Ğ²Ğ°Ñ Ñ†ĞµĞ»ÑŒ (Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ)")
        st.caption("Ğ§Ñ‚Ğ¾ Ğ·Ğ°Ğ¶Ğ¸Ğ³Ğ°ĞµÑ‚ Ğ¸ Ñ‚ÑĞ½ĞµÑ‚ Â«Ñ…Ğ¾Ñ‡ÑƒÂ» (Ğ´Ğ²Ğ¸Ğ¶Ğ¾Ğº)")
        game_options = ["(Ğ½Ğµ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ¾)"] + [f"Ğ˜Ğ³Ñ€Ğ°: {x}" for x in sugg["game_goal"]]
        prev_game = [x for x in saved if isinstance(x,str) and x.startswith("Ğ˜Ğ³Ñ€Ğ°: ")]
        prev_val = prev_game[0] if prev_game else "(Ğ½Ğµ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ¾)"
        game_sel = st.selectbox("Ğ˜Ğ³Ñ€Ğ¾Ğ²Ğ°Ñ Ñ†ĞµĞ»ÑŒ", options=game_options, index=game_options.index(prev_val) if prev_val in game_options else 0)

    combined = _uniq(
        solo_sel
        + ind_sel
        + col_sel
        + rec_sel
        + ([] if game_sel == "(Ğ½Ğµ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ¾)" else [game_sel])
    )

    st.write("")
    st.caption("Ğ­Ñ‚Ğ¾ Ğ±ÑƒĞ´ĞµÑ‚ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒÑÑ Ğ² Â«Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½ÑÂ» ĞºĞ°Ğº Ñ€ĞµÑÑƒÑ€Ñ/Ğ½Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ.")
    if st.button("ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ñ…Ğ¾Ğ±Ğ±Ğ¸", use_container_width=True):
        r["hobbies_selected"] = combined
        st.session_state.profile = profile
        save_profile_state()
        st.success("Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¾ âœ…")

def inject_css():
    st.markdown(
        """
<style>
@import url('https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;600;700&family=Playfair+Display:wght@500;600;700&display=swap');

:root{
  --pp-border: rgba(17, 24, 39, 0.10);
  --pp-text: #111827;
  --pp-muted: rgba(17, 24, 39, 0.62);
  --pp-violet: #3b1a5a;
  --pp-shadow: 0 10px 24px rgba(17,24,39,0.08);
}

html, body, [class*="css"]  {
  font-family: Manrope, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif !important;
}
.main {
  background: radial-gradient(1200px 600px at 20% 0%, rgba(59,26,90,0.06), transparent 60%),
              radial-gradient(900px 500px at 85% 10%, rgba(255,159,74,0.05), transparent 60%),
              #ffffff;
}
h1, h2, h3 { font-family: "Playfair Display", serif !important; color: var(--pp-text); }
.pp-card{
  background: #fff; border: 1px solid var(--pp-border);
  border-radius: 16px; padding: 16px; margin: 10px 0; box-shadow: var(--pp-shadow);
}
.pp-chip{
  display:inline-block; padding: 6px 10px; border-radius: 999px;
  border: 1px solid var(--pp-border); background: rgba(59,26,90,0.05);
  color: var(--pp-violet); font-size: 12px; margin-right: 6px;
}
</style>
        """,
        unsafe_allow_html=True,
    )


def monday_of_week(d: date) -> date:
    return d.fromordinal(d.toordinal() - d.weekday())


def init_state():
    inject_css()
    st.session_state.setdefault("authed", False)
    st.session_state.setdefault("user", None)
    st.session_state.setdefault("profile", None)


def save_profile_state():
    if not st.session_state.get("authed") or not st.session_state.get("user") or not st.session_state.get("profile"):
        return
    db_upsert_profile(st.session_state["user"]["id"], st.session_state["profile"])


def header_bar():
    st.markdown(f"# {APP_TITLE}")
    st.write("")


def auth_screen():
    st.title(APP_TITLE)
    st.caption("ĞŸĞ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ° Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ñ‡ĞµÑ€ĞµĞ· Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»Ñ‹. ĞĞºĞºÑƒÑ€Ğ°Ñ‚Ğ½Ğ¾, ĞºÑ€Ğ°ÑĞ¸Ğ²Ğ¾, Ğ¿Ğ¾ Ğ´ĞµĞ»Ñƒ.")

    tab_login, tab_signup = st.tabs(["Ğ’Ğ¾Ğ¹Ñ‚Ğ¸", "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿"])

    with tab_login:
        with st.form("login_form", clear_on_submit=False):
            email = st.text_input("Email", key="login_email")
            pw = st.text_input("ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ", type="password", key="login_pw")
            ok = st.form_submit_button("Ğ’Ğ¾Ğ¹Ñ‚Ğ¸", use_container_width=True)

        if ok:
            u = db_get_user_by_email(email)
            if not u:
                st.error("ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½.")
                return
            if not verify_password(pw, u["salt"], u["pw_hash"]):
                st.error("ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ.")
                return

            st.session_state.authed = True
            st.session_state.user = u

            prof = db_get_profile(u["id"])
            if not prof:
                data = default_profile()
                db_upsert_profile(u["id"], data)
                st.session_state.profile = data
            else:
                st.session_state.profile = ensure_profile_schema(prof["data"])

            st.rerun()

    with tab_signup:
        with st.form("signup_form", clear_on_submit=False):
            email2 = st.text_input("Email (Ğ´Ğ»Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°)", key="su_email")
            pw2 = st.text_input("ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ (Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 8 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²)", type="password", key="su_pw")
            pw3 = st.text_input("ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ¸ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ", type="password", key="su_pw2")
            ok2 = st.form_submit_button("Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿", use_container_width=True)

        if ok2:
            if not email2 or "@" not in email2:
                st.error("Ğ’Ğ²ĞµĞ´Ğ¸ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ñ‹Ğ¹ email.")
            elif len(pw2) < 8:
                st.error("ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 8 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ².")
            elif pw2 != pw3:
                st.error("ĞŸĞ°Ñ€Ğ¾Ğ»Ğ¸ Ğ½Ğµ ÑĞ¾Ğ²Ğ¿Ğ°Ğ´Ğ°ÑÑ‚.")
            elif db_get_user_by_email(email2):
                st.error("Ğ¢Ğ°ĞºĞ¾Ğ¹ email ÑƒĞ¶Ğµ Ğ·Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½.")
            else:
                u = db_create_user(email2, pw2)
                data = default_profile()
                db_upsert_profile(u["id"], data)
                st.success("Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ âœ… Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ğ·Ğ°Ğ¹Ğ´Ğ¸ Ğ²Ğ¾ Ğ²ĞºĞ»Ğ°Ğ´ĞºÑƒ Â«Ğ’Ğ¾Ğ¹Ñ‚Ğ¸Â».")


def foundation_tab(profile: dict):
    profile = ensure_profile_schema(profile)
    f = profile["foundation"]
    r = profile["realization"]
    lib = profile["library"]

    st.markdown("## 0) ĞÑĞ½Ğ¾Ğ²Ğ°")
    st.caption("Ğ’ÑÑ‚Ğ°Ğ²ÑŒ 9 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»Ğ¾Ğ² Ğ»ÑĞ±Ñ‹Ğ¼ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¾Ğ¼. ĞĞ°Ğ¶Ğ¼Ğ¸ Â«Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒÂ». ĞÑ‚Ñ‡Ñ‘Ñ‚ Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ½Ğ¸Ğ¶Ğµ.")

    # form prevents typing-lag
    with st.form("foundation_form", clear_on_submit=False):
        name = st.text_input("Ğ˜Ğ¼Ñ (ĞºĞ°Ğº Ğ¾Ğ±Ñ€Ğ°Ñ‰Ğ°Ñ‚ÑŒÑÑ)", value=f.get("name",""))
        pots = st.text_area(
            "ĞŸĞ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»Ñ‹ (9 ÑˆÑ‚ÑƒĞº: Â«ĞĞ¼ĞµÑ‚Ğ¸ÑÑ‚, Ğ“Ñ€Ğ°Ğ½Ğ°Ñ‚, ...Â» Ğ¸Ğ»Ğ¸ Â«1. ĞĞ¼ĞµÑ‚Ğ¸ÑÑ‚ 2. Ğ“Ñ€Ğ°Ğ½Ğ°Ñ‚ ...Â»)",
            value=f.get("potentials_table",""),
            height=160
        )
        show = st.checkbox("ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ°Ğ²Ñ‚Ğ¾-Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñƒ 3Ã—3", value=False)
        saved = st.form_submit_button("ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ¾ÑĞ½Ğ¾Ğ²Ñƒ", use_container_width=True)

    if saved:
        f["name"] = (name or "").strip()
        f["potentials_table"] = (pots or "").strip()
        st.session_state.profile = profile
        save_profile_state()
        st.success("Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¾ âœ…")

    if show and (pots or "").strip():
        p9 = parse_potentials_9(pots)
        st.caption("ĞĞ²Ñ‚Ğ¾-Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° 3Ã—3:")
        st.markdown(build_matrix_md(p9))

    st.divider()
    st.subheader("ğŸ§  Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ (Ğ˜Ğ˜)")

    client = get_openai_client()
    if not client:
        st.warning("OpenAI Ğ½Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½ (Ğ½ĞµÑ‚ ĞºĞ»ÑÑ‡Ğ°) â€” Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ğ° Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ°.")
        return

    model = st.selectbox("ĞœĞ¾Ğ´ĞµĞ»ÑŒ", ["gpt-4o-mini", "gpt-4.1-mini", "gpt-4.1"], index=0)

    gen = st.button("Ğ¡Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚", use_container_width=True)
    if gen:
        if not f.get("potentials_table","").strip():
            st.error("Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸ Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»Ñ‹ Ğ¸ Ğ½Ğ°Ğ¶Ğ¼Ğ¸ Â«Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ¾ÑĞ½Ğ¾Ğ²ÑƒÂ».")
        else:
            try:
                text = generate_extended_report(client, model=model, profile=profile)
                lib["extended_report_md"] = text
                lib["extended_report_updated_at"] = datetime.utcnow().isoformat() + "Z"
                st.session_state.profile = profile
                save_profile_state()
                st.success("Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ âœ…")
            except Exception as e:
                st.error(f"ĞÑˆĞ¸Ğ±ĞºĞ° Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸: {e}")

    if (lib.get("extended_report_md") or "").strip():
        st.markdown("### Ğ¢Ğ²Ğ¾Ğ¹ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚")
        st.markdown(lib["extended_report_md"])

# =========================
#  SKELĞ•Ğ¢ + DUSHA (DROP-IN)
#  Ğ’ÑÑ‚Ğ°Ğ²ÑŒ Ğ­Ğ¢Ğ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ ÑÑ‚Ğ°Ñ€Ğ¾Ğ¹ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ñ„Ğ¾ĞºÑƒÑĞ¾Ğ² (Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Ñ‚Ğ²Ğ¾ĞµĞ¹ Ğ²ĞºĞ»Ğ°Ğ´ĞºĞ¸ "Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ")
# =========================


# ---------- 1) Ğ–ĞĞ¡Ğ¢ĞšĞĞ¯ ĞšĞ›ĞĞ¡Ğ¡Ğ˜Ğ¤Ğ˜ĞšĞĞ¦Ğ˜Ğ¯ (Ğ¡ĞšĞ•Ğ›Ğ•Ğ¢) ----------

def _norm(s: str) -> str:
    return (s or "").strip().lower()

def detect_goal_type(point_b: str) -> str:
    t = _norm(point_b)

    # ÑĞ°Ğ¼Ğ¾Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ / ÑĞ¼Ñ‹ÑĞ»
    if any(x in t for x in ["Ñ€ĞµĞ°Ğ»Ğ¸Ğ·", "ÑĞ²Ğ¾Ñ‘ Ğ´ĞµĞ»Ğ¾", "Ğ¿Ñ€ĞµĞ´Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡", "ÑĞ¼Ñ‹ÑĞ»", "Ğ½Ğ° ÑĞ²Ğ¾Ñ‘Ğ¼ Ğ¼ĞµÑÑ‚Ğµ", "Ğ´ĞµĞ»Ğ¾ Ğ¶Ğ¸Ğ·Ğ½Ğ¸"]):
        return "self_realization"

    # Ğ´ĞµĞ½ÑŒĞ³Ğ¸ / Ğ´Ğ¾Ñ…Ğ¾Ğ´
    if any(x in t for x in ["Ğ´ĞµĞ½ÑŒĞ³", "Ğ´Ğ¾Ñ…Ğ¾Ğ´", "Ğ·Ğ°Ñ€Ğ°Ğ±Ğ°Ñ‚", "Ğ¼Ğ¾Ğ½ĞµÑ‚Ğ¸Ğ·Ğ°Ñ†", "Ñ„Ğ¸Ğ½Ğ°Ğ½Ñ", "ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ´Ğ¾Ñ…Ğ¾Ğ´"]):
        return "money"

    # Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ / Ğ²Ğ»Ğ¸ÑĞ½Ğ¸Ğµ
    if any(x in t for x in ["Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€", "ÑÑ†ĞµĞ½Ğ°", "Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡", "ÑƒĞ·Ğ½Ğ°Ğ²Ğ°ĞµĞ¼", "Ğ²Ğ»Ğ¸ÑĞ½Ğ¸Ğµ", "Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ğ¸"]):
        return "visibility"

    # ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ / ÑĞ¿Ğ¾ĞºĞ¾Ğ¹ÑÑ‚Ğ²Ğ¸Ğµ
    if any(x in t for x in ["ÑĞ¿Ğ¾ĞºĞ¾Ğ¹ÑÑ‚Ğ²", "ÑÑ‚Ğ°Ğ±Ğ¸Ğ»", "ÑƒÑÑ‚Ğ¾Ğ¹Ñ‡Ğ¸Ğ²", "Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½", "Ğ¾Ğ¿Ğ¾Ñ€Ğ°", "ÑƒĞ²ĞµÑ€ĞµĞ½"]):
        return "stability"

    return "growth"


def detect_state_type(point_a: str) -> str:
    t = _norm(point_a)

    if any(x in t for x in ["Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ", "Ğ±ĞµĞ· Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹", "Ğ² Ğ¿Ğ¾Ğ¸ÑĞºĞµ"]):
        return "pause"

    if any(x in t for x in ["Ğ²Ñ‹Ğ³Ğ¾Ñ€", "ÑƒÑÑ‚Ğ°Ğ»", "Ğ½ĞµÑ‚ ÑĞ¸Ğ»", "Ğ°Ğ¿Ğ°Ñ‚", "Ğ½ĞµÑ‚ ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸"]):
        return "burnout"

    if any(x in t for x in ["Ñ…Ğ°Ğ¾Ñ", "Ğ½Ğµ Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°Ñ", "Ñ€Ğ°Ğ·Ğ±Ñ€Ğ¾Ğ´", "Ğ½Ğµ Ğ·Ğ½Ğ°Ñ ĞºÑƒĞ´Ğ°", "Ñ€Ğ°ÑÑ‚ĞµÑ€ÑĞ½"]):
        return "confusion"

    return "active"


def map_focus_titles(goal_type: str, top_potentials: list[str]) -> list[dict]:
    """
    Ğ’ĞĞ–ĞĞ: 3 Ñ„Ğ¾ĞºÑƒÑĞ° = 3 ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ¸ Ğ¼Ğ°Ñ‚Ñ€Ğ¸Ñ†Ñ‹:
      1) perception  â€” Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğµ/Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·/Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ
      2) motivation  â€” Ğ´Ğ²Ğ¸Ğ³Ğ°Ñ‚ĞµĞ»ÑŒ/Ñ‡Ñ‚Ğ¾ Ğ·Ğ°Ğ¶Ğ¸Ğ³Ğ°ĞµÑ‚
      3) instrument  â€” Ñ‡Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ (Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ)
    """

    p1 = top_potentials[0] if len(top_potentials) > 0 else "â€”"
    p2 = top_potentials[1] if len(top_potentials) > 1 else "â€”"
    p3 = top_potentials[2] if len(top_potentials) > 2 else "â€”"

    # ---- ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ñ Ñ„Ğ¾ĞºÑƒÑĞ¾Ğ² ĞŸĞ ĞšĞĞ›ĞĞĞšĞĞœ (Ñ€Ğ¾Ğ»ÑŒ + Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ») ----
    TITLES = {
        "perception": {  # ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ° 1
            "Ğ¯Ğ½Ñ‚Ğ°Ñ€ÑŒ": "Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¸ ÑÑĞ½Ğ¾ÑÑ‚ÑŒ Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸ĞºĞ¸ (Ğ¯Ğ½Ñ‚Ğ°Ñ€ÑŒ)",
            "Ğ¡Ğ°Ğ¿Ñ„Ğ¸Ñ€": "Ğ“Ğ»ÑƒĞ±Ğ¸Ğ½Ğ° ÑĞ¼Ñ‹ÑĞ»Ğ° Ğ¸ Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ñ (Ğ¡Ğ°Ğ¿Ñ„Ğ¸Ñ€)",
            "ĞĞ¼ĞµÑ‚Ğ¸ÑÑ‚": "Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ Ğ¸ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹ (ĞĞ¼ĞµÑ‚Ğ¸ÑÑ‚)",
            "Ğ“ĞµĞ»Ğ¸Ğ¾Ğ´Ğ¾Ñ€": "ĞŸĞ¾Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ° Ğ»ÑĞ´ĞµĞ¹ Ğ¸ Ğ¾Ñ‚ĞºĞ»Ğ¸ĞºĞ° (Ğ“ĞµĞ»Ğ¸Ğ¾Ğ´Ğ¾Ñ€)",
            "Ğ˜Ğ·ÑƒĞ¼Ñ€ÑƒĞ´": "Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ Ğ³Ğ°Ñ€Ğ¼Ğ¾Ğ½Ğ¸Ñ Ğ¸ Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ¾ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ° (Ğ˜Ğ·ÑƒĞ¼Ñ€ÑƒĞ´)",
            "Ğ“Ñ€Ğ°Ğ½Ğ°Ñ‚": "Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¹ Ğ¸ Ğ²Ğ¾Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ñ (Ğ“Ñ€Ğ°Ğ½Ğ°Ñ‚)",
            "Ğ ÑƒĞ±Ğ¸Ğ½": "Ğ§ÑƒĞ²ÑÑ‚Ğ²Ğ¾ Ğ´Ñ€Ğ°Ğ¹Ğ²Ğ° Ğ¸ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ½Ğ°Ğ¿Ñ€ÑĞ¶ĞµĞ½Ğ¸Ñ (Ğ ÑƒĞ±Ğ¸Ğ½)",
            "Ğ¨ÑƒĞ½Ğ³Ğ¸Ñ‚": "ĞŸÑ€Ğ°ĞºÑ‚Ğ¸Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ, Ñ„Ğ¾Ñ€Ğ¼Ğ° Ğ¸ Ñ‚ĞµĞ»ĞµÑĞ½Ğ°Ñ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ (Ğ¨ÑƒĞ½Ğ³Ğ¸Ñ‚)",
            "Ğ¦Ğ¸Ñ‚Ñ€Ğ¸Ğ½": "Ğ­Ñ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹ Ğ¸ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ² (Ğ¦Ğ¸Ñ‚Ñ€Ğ¸Ğ½)",
        },
        "motivation": {  # ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ° 2
            "Ğ¯Ğ½Ñ‚Ğ°Ñ€ÑŒ": "ĞœĞ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº Ğ¸ ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ (Ğ¯Ğ½Ñ‚Ğ°Ñ€ÑŒ)",
            "Ğ¡Ğ°Ğ¿Ñ„Ğ¸Ñ€": "ĞœĞ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· ÑĞ¼Ñ‹ÑĞ» Ğ¸ Ğ¸Ğ´ĞµÑ (Ğ¡Ğ°Ğ¿Ñ„Ğ¸Ñ€)",
            "ĞĞ¼ĞµÑ‚Ğ¸ÑÑ‚": "ĞœĞ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· Ğ·Ğ½Ğ°Ğ½Ğ¸Ñ Ğ¸ Ğ²Ğ»Ğ¸ÑĞ½Ğ¸Ğµ Ğ¼Ñ‹ÑĞ»ÑŒÑ (ĞĞ¼ĞµÑ‚Ğ¸ÑÑ‚)",
            "Ğ“ĞµĞ»Ğ¸Ğ¾Ğ´Ğ¾Ñ€": "ĞœĞ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°Ğ½Ğ¸Ğµ Ğ¸ Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ (Ğ“ĞµĞ»Ğ¸Ğ¾Ğ´Ğ¾Ñ€)",
            "Ğ˜Ğ·ÑƒĞ¼Ñ€ÑƒĞ´": "ĞœĞ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· ĞºÑ€Ğ°ÑĞ¾Ñ‚Ñƒ Ğ¸ Ğ³Ğ°Ñ€Ğ¼Ğ¾Ğ½Ğ¸Ñ (Ğ˜Ğ·ÑƒĞ¼Ñ€ÑƒĞ´)",
            "Ğ“Ñ€Ğ°Ğ½Ğ°Ñ‚": "ĞœĞ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· ÑĞ¼Ğ¾Ñ†Ğ¸Ñ, Ğ¾Ğ±Ñ€Ğ°Ğ· Ğ¸ ÑÑ†ĞµĞ½Ñƒ (Ğ“Ñ€Ğ°Ğ½Ğ°Ñ‚)",
            "Ğ ÑƒĞ±Ğ¸Ğ½": "ĞœĞ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· Ğ´Ñ€Ğ°Ğ¹Ğ² Ğ¸ Ğ²Ñ‹ÑĞ¾ĞºĞ¸Ğ¹ Ğ½Ğ°ĞºĞ°Ğ» (Ğ ÑƒĞ±Ğ¸Ğ½)",
            "Ğ¨ÑƒĞ½Ğ³Ğ¸Ñ‚": "ĞœĞ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ğ¸ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ (Ğ¨ÑƒĞ½Ğ³Ğ¸Ñ‚)",
            "Ğ¦Ğ¸Ñ‚Ñ€Ğ¸Ğ½": "ĞœĞ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· Ğ´ĞµĞ½ÑŒĞ³Ğ¸ Ğ¸ Ñ€Ğ¾ÑÑ‚ Ñ€ĞµÑÑƒÑ€ÑĞ° (Ğ¦Ğ¸Ñ‚Ñ€Ğ¸Ğ½)",
        },
        "instrument": {  # ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ° 3
            "Ğ¯Ğ½Ñ‚Ğ°Ñ€ÑŒ": "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚: ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¸ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ (Ğ¯Ğ½Ñ‚Ğ°Ñ€ÑŒ)",
            "Ğ¡Ğ°Ğ¿Ñ„Ğ¸Ñ€": "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚: Ğ¾Ğ±ÑŠÑÑĞ½ÑÑ‚ÑŒ Ğ¸ ÑĞ¾Ğ±Ğ¸Ñ€Ğ°Ñ‚ÑŒ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ (Ğ¡Ğ°Ğ¿Ñ„Ğ¸Ñ€)",
            "ĞĞ¼ĞµÑ‚Ğ¸ÑÑ‚": "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚: ÑƒĞ¿Ğ°ĞºĞ¾Ğ²ĞºĞ° Ğ¸Ğ´ĞµĞ¹ Ğ¸ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸ĞµĞ¼ (ĞĞ¼ĞµÑ‚Ğ¸ÑÑ‚)",
            "Ğ“ĞµĞ»Ğ¸Ğ¾Ğ´Ğ¾Ñ€": "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚: Ğ³Ğ¾Ğ»Ğ¾Ñ, ĞºĞ¾Ğ¼Ğ¼ÑƒĞ½Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ¸ Ñ€Ğ°ÑĞ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ (Ğ“ĞµĞ»Ğ¸Ğ¾Ğ´Ğ¾Ñ€)",
            "Ğ˜Ğ·ÑƒĞ¼Ñ€ÑƒĞ´": "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚: ÑÑÑ‚ĞµÑ‚Ğ¸ĞºĞ°, Ğ²ĞºÑƒÑ Ğ¸ Ğ°Ñ‚Ğ¼Ğ¾ÑÑ„ĞµÑ€Ğ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ° (Ğ˜Ğ·ÑƒĞ¼Ñ€ÑƒĞ´)",
            "Ğ“Ñ€Ğ°Ğ½Ğ°Ñ‚": "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚: Ğ¿Ğ¾Ğ´Ğ°Ñ‡Ğ°, Ñ€Ğ¾Ğ»ÑŒ Ğ¸ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ (Ğ“Ñ€Ğ°Ğ½Ğ°Ñ‚)",
            "Ğ ÑƒĞ±Ğ¸Ğ½": "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚: Ğ´Ñ€Ğ°Ğ¼Ğ°Ñ‚ÑƒÑ€Ğ³Ğ¸Ñ Ğ¸ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¼Ğ¾Ñ†Ğ¸ĞµĞ¹ (Ğ ÑƒĞ±Ğ¸Ğ½)",
            "Ğ¨ÑƒĞ½Ğ³Ğ¸Ñ‚": "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚: Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ°, Ñ‚ĞµĞ»ĞµÑĞ½Ñ‹Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ, ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ (Ğ¨ÑƒĞ½Ğ³Ğ¸Ñ‚)",
            "Ğ¦Ğ¸Ñ‚Ñ€Ğ¸Ğ½": "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚: Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ, Ğ´ĞµĞ½ÑŒĞ³Ğ¸, Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑÑ‹, Ğ´Ğ¸ÑÑ†Ğ¸Ğ¿Ğ»Ğ¸Ğ½Ğ° (Ğ¦Ğ¸Ñ‚Ñ€Ğ¸Ğ½)",
        }
    }

    def pick_title(role: str, pot: str) -> str:
        pot = (pot or "").strip()
        return TITLES.get(role, {}).get(pot, f"{role.capitalize()} ({pot or 'â€”'})")

    f1_title = pick_title("perception", p1)
    f2_title = pick_title("motivation", p2)
    f3_title = pick_title("instrument", p3)

    return [
        {"id": 1, "title": f1_title, "owner": p1, "role": "perception", "weight": 60},
        {"id": 2, "title": f2_title, "owner": p2, "role": "motivation", "weight": 30},
        {"id": 3, "title": f3_title, "owner": p3, "role": "instrument", "weight": 10},
    ]  


def build_focus_skeleton(point_a: str, point_b: str, top_potentials: list[str]) -> dict:
    goal_type = detect_goal_type(point_b)
    state_type = detect_state_type(point_a)

    focuses = map_focus_titles(goal_type, top_potentials)

    return {
        "point_a": point_a,
        "point_b": point_b,
        "goal_type": goal_type,
        "state_type": state_type,
        "focuses": focuses,
    }


# ---------- 2) LLM (Ğ”Ğ£Ğ¨Ğ) + Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ ĞĞ«Ğ™ Ğ’Ğ«Ğ¥ĞĞ” ----------

def call_llm(prompt: str, model: str = "gpt-4o-mini", temperature: float = 0.35) -> str:
    """
    Ğ ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ·Ğ¾Ğ² OpenAI. Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ¢ĞĞ›Ğ¬ĞšĞ Ñ‚ĞµĞºÑÑ‚ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸.
    ĞœÑ‹ Ğ¾Ğ¶Ğ¸Ğ´Ğ°ĞµĞ¼ ÑÑ‚Ñ€Ğ¾Ğ³Ğ¸Ğ¹ JSON, Ğ¿Ğ¾ÑÑ‚Ğ¾Ğ¼Ñƒ Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ñ‡Ğ¸ÑÑ‚Ğ¸Ğ¼ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ñ‹Ğµ ```...``` Ğ¾Ğ±Ñ‘Ñ€Ñ‚ĞºĞ¸.
    """
    client = get_openai_client()
    if not client:
        return ""

    try:
        resp = client.chat.completions.create(
            model=model,
            messages=[
                {"role": "system", "content": "Ğ’ĞµÑ€Ğ½Ğ¸ ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ JSON. Ğ‘ĞµĞ· markdown. Ğ‘ĞµĞ· Ğ¿Ğ¾ÑÑĞ½ĞµĞ½Ğ¸Ğ¹."},
                {"role": "user", "content": prompt},
            ],
            temperature=temperature,
        )
        text = (resp.choices[0].message.content or "").strip()

        # ĞµÑĞ»Ğ¸ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ğ²Ğ´Ñ€ÑƒĞ³ Ğ·Ğ°Ğ²ĞµÑ€Ğ½ÑƒĞ»Ğ° Ğ² ```json ... ```
        text = re.sub(r"^```(?:json)?\s*", "", text, flags=re.I).strip()
        text = re.sub(r"\s*```$", "", text).strip()

        return text

    except Exception:
        return ""

def build_actions_fallback(skeleton: dict) -> list[dict]:
    """
    Fallback Ğ±ĞµĞ· LLM: Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾ Ñ€Ğ¾Ğ»Ğ¸ ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ¸.
    role:
      - perception  (ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ° 1): Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·/Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ/ÑÑĞ½Ğ¾ÑÑ‚ÑŒ
      - motivation  (ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ° 2): Ğ´Ğ²Ğ¸Ğ³Ğ°Ñ‚ĞµĞ»ÑŒ/ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¸
      - instrument  (ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ° 3): ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ/Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ
    """

    state_type = skeleton.get("state_type", "active")

    ACTIONS = {
        "perception": {
            "default": [
                "Ğ¡Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ 1 Ğ³Ğ»Ğ°Ğ²Ğ½ÑƒÑ Ğ³Ğ¸Ğ¿Ğ¾Ñ‚ĞµĞ·Ñƒ: Ñ‡Ñ‚Ğ¾ Ğ¸Ğ¼ĞµĞ½Ğ½Ğ¾ Ğ²Ñ‹ ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚Ğµ Ğ¸ Ğ´Ğ»Ñ ĞºĞ¾Ğ³Ğ¾.",
                "Ğ Ğ°Ğ·Ğ»Ğ¾Ğ¶Ğ¸Ñ‚ÑŒ Ñ†ĞµĞ»ÑŒ Ğ½Ğ° 3â€“5 Ğ±Ğ»Ğ¾ĞºĞ¾Ğ² (Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚/ĞºĞ»Ğ¸ĞµĞ½Ñ‚/ĞºĞ°Ğ½Ğ°Ğ»/Ğ´ĞµĞ½ÑŒĞ³Ğ¸/Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ).",
                "Ğ’Ñ‹Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒ 1 ÑƒĞ·ĞºĞ¾Ğµ Ğ¼ĞµÑÑ‚Ğ¾, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğµ Ñ‚Ğ¾Ñ€Ğ¼Ğ¾Ğ·Ğ¸Ñ‚ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ ÑĞµĞ¹Ñ‡Ğ°Ñ."
            ],
            "Ğ¯Ğ½Ñ‚Ğ°Ñ€ÑŒ": [
                "Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ ÑÑ…ĞµĞ¼Ñƒ-Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼: ĞºĞ°Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ²Ğ°Ñˆ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚ (Ğ² 5â€“7 ÑˆĞ°Ğ³Ğ¾Ğ²).",
                "ĞĞ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ½ĞµĞ´ĞµĞ»Ğ¸: ĞºĞ¾Ğ³Ğ´Ğ° Ğ¸ Ñ‡Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°ĞµÑ‚ÑÑ (Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼).",
                "Ğ¡Ğ²ĞµÑÑ‚Ğ¸ Ğ²ÑÑ‘ Ğ² 1 Ğ¿Ğ¾Ğ½ÑÑ‚Ğ½ÑƒÑ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ: Ğ±Ğ»Ğ¾ĞºĞ¸ â†’ ÑˆĞ°Ğ³Ğ¸ â†’ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚."
            ],
            "ĞĞ¼ĞµÑ‚Ğ¸ÑÑ‚": [
                "Ğ¡Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ 1 ÑĞ´Ñ€Ğ¾ Ğ¸Ğ´ĞµĞ¸ Ğ¸ 3 Ñ‚ĞµĞ·Ğ¸ÑĞ° Ñ†ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸ (ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¾ Ğ¸ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾).",
                "Ğ’Ñ‹ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸ĞºÑƒ: Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° â†’ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ â†’ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ â†’ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ.",
                "ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ: Ñ‡Ñ‚Ğ¾ Ğ»Ğ¸ÑˆĞ½ĞµĞµ/Ñ‚ÑƒĞ¼Ğ°Ğ½Ğ½Ğ¾Ğµ â€” ÑƒĞ±Ñ€Ğ°Ñ‚ÑŒ, Ğ¾ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞ¸Ğ»ÑŒĞ½Ğ¾Ğµ."
            ],
            "Ğ¡Ğ°Ğ¿Ñ„Ğ¸Ñ€": [
                "Ğ¡Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²Ğ°ÑˆÑƒ ĞºĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ñ/Ğ¸Ğ´ĞµÑ ĞºĞ°Ğº ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ (1â€“2 Ğ°Ğ±Ğ·Ğ°Ñ†Ğ°).",
                "Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ 3 Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ğ°, Ğ½Ğ° ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ñ… Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ÑÑ Ğ²Ğ°Ñˆ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´.",
                "Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ 1 ÑÑ…ĞµĞ¼Ñƒ/Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ: ĞºĞ°Ğº Ğ²Ñ‹ Ğ¾Ğ±ÑŠÑÑĞ½ÑĞµÑ‚Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚."
            ],
            "Ğ“ĞµĞ»Ğ¸Ğ¾Ğ´Ğ¾Ñ€": [
                "Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº: Ñ‡Ñ‚Ğ¾ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ½Ğ¾ Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸ (10 Ñ‚ĞµĞ¼/Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²).",
                "Ğ’Ñ‹Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒ 3 Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Â«Ñ†ĞµĞ¿Ğ»ÑÑÑ‚Â» Ğ¸ Ğ¿Ğ¾Ğ½ÑÑ‚Ğ½Ñ‹ Ğ»ÑĞ´ÑĞ¼.",
                "ĞŸÑ€Ğ¾Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚ÑŒ Ğ¸Ğ´ĞµÑ Ğ²ÑĞ»ÑƒÑ… Ğ¸ Ğ·Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ, Ğ³Ğ´Ğµ Ğ·Ğ²ÑƒÑ‡Ğ¸Ñ‚ ÑĞ¸Ğ»ÑŒĞ½ĞµĞµ Ğ²ÑĞµĞ³Ğ¾."
            ],
        },

        "motivation": {
            "default": [
                "ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ 2â€“3 ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ, Ğ¿Ñ€Ğ¸ ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ñ… Ğ²Ğ°Ğ¼ Ğ»ĞµĞ³Ñ‡Ğµ Ğ²ÑĞµĞ³Ğ¾ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ñ‚ÑŒ.",
                "Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ 1 ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ğ¹ Ñ†Ğ¸ĞºĞ» (7 Ğ´Ğ½ĞµĞ¹), Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ğ¾Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ.",
                "ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¾Ğ´Ğ¸Ğ½ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ¹ Â«Ñ‚Ñ€Ğ¸Ğ³Ğ³ĞµÑ€ ÑÑ‚Ğ°Ñ€Ñ‚Ğ°Â» (Ñ‡Ñ‚Ğ¾ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ)."
            ],
            "Ğ¨ÑƒĞ½Ğ³Ğ¸Ñ‚": [
                "ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ 1 Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ»ĞµĞ³Ñ‡Ğµ Ğ²ÑĞµĞ³Ğ¾ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ñ‚ĞµĞ»Ğ¾Ğ¼/Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¾Ğ¹.",
                "ĞĞ°Ğ¹Ñ‚Ğ¸ 1 Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞºĞ°/Ğ¼Ğ¸Ğ½Ğ¸-Ğ³Ñ€ÑƒĞ¿Ğ¿Ñƒ Ğ´Ğ»Ñ Ñ€ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ğ¾ÑÑ‚Ğ¸ (ÑĞ¾Ğ·Ğ²Ğ¾Ğ½Ñ‹/Ğ²ÑÑ‚Ñ€ĞµÑ‡Ğ¸/Ñ‡Ğ°Ñ‚).",
                "Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Â«Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ğ¿Ğ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ¸Â»: Ğ¾Ğ´Ğ¸Ğ½ ÑˆĞ°Ğ³ Ğ² Ğ´ĞµĞ½ÑŒ."
            ],
            "Ğ¦Ğ¸Ñ‚Ñ€Ğ¸Ğ½": [
                "Ğ—Ğ°Ñ„Ğ¸ĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²ÑƒÑ Ñ†ĞµĞ»ÑŒ Ğ½Ğ° Ğ¼ĞµÑÑÑ† (Ñ€ĞµĞ°Ğ»Ğ¸ÑÑ‚Ğ¸Ñ‡Ğ½Ğ¾).",
                "ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ 1 Ğ´ĞµĞ½ĞµĞ¶Ğ½Ğ¾Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ğ² Ğ´ĞµĞ½ÑŒ (Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ°/ÑĞ¾Ğ·Ğ²Ğ¾Ğ½/Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ).",
                "Ğ¡Ğ²ĞµÑÑ‚Ğ¸ Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ Ğº Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ¼Ñƒ: Ñ‡Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°ĞµÑ‚Ğµ â†’ ĞºĞ°ĞºĞ¾Ğ¹ Ğ´Ğ¾Ñ…Ğ¾Ğ´ Ğ¾Ğ¶Ğ¸Ğ´Ğ°ĞµÑ‚Ğµ."
            ],
            "Ğ“ĞµĞ»Ğ¸Ğ¾Ğ´Ğ¾Ñ€": [
                "ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ, Ğ³Ğ´Ğµ Ğ²Ğ°Ğ¼ Ğ²Ğ°Ğ¶Ğ½Ğ° ÑÑ†ĞµĞ½Ğ°/Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ (ĞºĞ°ĞºĞ¾Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ğ¾ÑÑ‚Ğ¸).",
                "Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ 1 Ñ€ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğ¹ ĞºĞ°Ğ½Ğ°Ğ» Ğ³Ğ¾Ğ»Ğ¾ÑĞ° (Ğ²Ğ¸Ğ´ĞµĞ¾/Ğ°ÑƒĞ´Ğ¸Ğ¾/ÑÑ„Ğ¸Ñ€/ÑĞ¾Ğ·Ğ²Ğ¾Ğ½Ñ‹).",
                "Ğ¡Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Â«Ñ€Ğ°Ğ´Ğ¸ Ñ‡ĞµĞ³Ğ¾ Ğ²Ğ°Ñ Ğ±ÑƒĞ´ÑƒÑ‚ ÑĞ»ÑƒÑˆĞ°Ñ‚ÑŒÂ» Ğ² 1 Ñ„Ñ€Ğ°Ğ·Ğµ."
            ],
            "Ğ“Ñ€Ğ°Ğ½Ğ°Ñ‚": [
                "ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ Ğ¾Ğ±Ñ€Ğ°Ğ·/Ñ€Ğ¾Ğ»ÑŒ, Ğ² ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğ¹ Ğ²Ğ°Ğ¼ Ğ»ĞµĞ³ĞºĞ¾ Ğ¿Ñ€Ğ¾ÑĞ²Ğ»ÑÑ‚ÑŒÑÑ.",
                "Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚, Ğ³Ğ´Ğµ ĞµÑÑ‚ÑŒ ÑĞ¼Ğ¾Ñ†Ğ¸Ñ Ğ¸ Ğ²Ğ¾Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ (Ğ½Ğµ ÑÑƒÑ…Ğ¾).",
                "Ğ—Ğ°Ñ„Ğ¸ĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ 1 Ğ¿Ğ¾Ğ²Ğ¾Ğ´ Ğ² Ğ½ĞµĞ´ĞµĞ»Ñ Ğ´Ğ»Ñ Â«Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ° Ğ² ÑÑ†ĞµĞ½ÑƒÂ»."
            ],
        },

        "instrument": {
            "default": [
                "Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ 1 ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ ÑˆĞ°Ğ³ Ğ¿Ğ¾ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ñƒ (Ğ¼Ğ°ĞºĞµÑ‚/Ğ¿Ñ€Ğ¾Ñ‚Ğ¾Ñ‚Ğ¸Ğ¿/ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ÑƒÑĞ»ÑƒĞ³Ğ¸).",
                "Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ 1 ÑˆĞ°Ğ³ Ğ¿Ğ¾ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°Ğ¼ (ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚/Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²ÑŒÑ/ÑĞ¾Ğ·Ğ²Ğ¾Ğ½).",
                "Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ 1 ÑˆĞ°Ğ³ Ğ¿Ğ¾ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğµ/ÑƒĞ¿Ğ°ĞºĞ¾Ğ²ĞºĞµ (Ğ¾Ñ„Ñ„ĞµÑ€/ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°/Ğ¿Ğ¸Ñ‚Ñ‡)."
            ],
            "Ğ“ĞµĞ»Ğ¸Ğ¾Ğ´Ğ¾Ñ€": [
                "Ğ—Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ 1 ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¾Ğµ Ğ²Ğ¸Ğ´ĞµĞ¾/Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ¾Ğµ Ğ¾Ğ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ğµ Ğ¸Ğ´ĞµĞ¸ (60â€“90 ÑĞµĞº).",
                "ĞŸÑ€Ğ¾Ğ²ĞµÑÑ‚Ğ¸ 2 Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ° Ñ Ğ»ÑĞ´ÑŒĞ¼Ğ¸ Ğ¿Ñ€Ğ¾ Ğ¸Ğ´ĞµÑ/Ğ¿Ğ¾Ğ»ÑŒĞ·Ñƒ (ÑĞ¾Ğ·Ğ²Ğ¾Ğ½Ñ‹/ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ).",
                "Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ 1 Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ²Ñ‹Ñ…Ğ¾Ğ´: Ğ¿Ğ¾ÑÑ‚/ÑÑ‚Ğ¾Ñ€Ğ¸Ñ/Ğ¼Ğ¸Ğ½Ğ¸-ÑÑ„Ğ¸Ñ€/Ğ¿Ñ€ĞµĞ·ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ."
            ],
            "Ğ¯Ğ½Ñ‚Ğ°Ñ€ÑŒ": [
                "Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ¹ Ñ‚Ñ€ĞµĞºĞµÑ€ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ (Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°/Ğ»Ğ¸ÑÑ‚) Ğ½Ğ° 7 Ğ´Ğ½ĞµĞ¹.",
                "ĞŸĞ¾ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ 3 Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ÑÑÑ‰Ğ¸Ñ…ÑÑ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ½Ğ° Ğ½ĞµĞ´ĞµĞ»Ñ (Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼).",
                "Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒĞ½ÑƒÑ Ñ‚Ğ¾Ñ‡ĞºÑƒ: Ñ‡Ñ‚Ğ¾ ÑĞ´ĞµĞ»Ğ°Ğ½Ğ¾ â†’ Ñ‡Ñ‚Ğ¾ Ğ¼ĞµÑˆĞ°Ğ»Ğ¾ â†’ Ñ‡Ñ‚Ğ¾ Ğ¼ĞµĞ½ÑĞµĞ¼."
            ],
            "Ğ¦Ğ¸Ñ‚Ñ€Ğ¸Ğ½": [
                "Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¾Ñ„Ñ„ĞµÑ€ Ğ² 3 Ğ¿ÑƒĞ½ĞºÑ‚Ğ°: Ñ‡Ñ‚Ğ¾, ĞºĞ¾Ğ¼Ñƒ, Ğ·Ğ° ÑĞºĞ¾Ğ»ÑŒĞºĞ¾.",
                "Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ 5 Ğ¸ÑÑ…Ğ¾Ğ´ÑÑ‰Ğ¸Ñ… ĞºĞ°ÑĞ°Ğ½Ğ¸Ğ¹ (ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ/ÑĞ¾Ğ·Ğ²Ğ¾Ğ½Ñ‹/Ğ¿Ğ¸Ñ‚Ñ‡).",
                "Ğ—Ğ°Ñ„Ğ¸ĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ¸ ĞºĞ¾Ğ½Ğ²ĞµÑ€ÑĞ¸Ñ (Ñ‡Ñ‚Ğ¾ ÑÑ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ»Ğ¾)."
            ],
        }
    }

    out = []
    for f in skeleton.get("focuses", []):
        role = f.get("role")
        pot = (f.get("owner") or "").strip()

        acts = (ACTIONS.get(role, {}) or {}).get(pot)
        if not acts:
            acts = (ACTIONS.get(role, {}) or {}).get("default", [])

        # Ğ¼ÑĞ³Ñ‡Ğµ, ĞµÑĞ»Ğ¸ Ğ²Ñ‹Ğ³Ğ¾Ñ€Ğ°Ğ½Ğ¸Ğµ/Ğ¿Ğ°ÑƒĞ·Ğ°/Ñ€Ğ°ÑÑ‚ĞµÑ€ÑĞ½Ğ½Ğ¾ÑÑ‚ÑŒ
        if state_type in ["pause", "burnout", "confusion"]:
            acts = [
                "Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ¼Ğ¸ĞºÑ€Ğ¾-Ğ²ĞµÑ€ÑĞ¸Ñ: 15â€“20 Ğ¼Ğ¸Ğ½ÑƒÑ‚, Ğ±ĞµĞ· Ğ¿ĞµÑ€Ñ„ĞµĞºÑ†Ğ¸Ğ¾Ğ½Ğ¸Ğ·Ğ¼Ğ°.",
                acts[1] if len(acts) > 1 else "Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ¾Ğ´Ğ¸Ğ½ Ğ¼Ğ°Ğ»ĞµĞ½ÑŒĞºĞ¸Ğ¹ ÑˆĞ°Ğ³ Ğ±ĞµĞ· Ğ¿ĞµÑ€ĞµĞ³Ñ€ÑƒĞ·Ğ°.",
                acts[2] if len(acts) > 2 else "Ğ—Ğ°Ñ„Ğ¸ĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ¸ Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒÑÑ."
            ]

        out.append({
            "focus_id": f["id"],
            "focus_title": f["title"],
            "actions": acts[:3],
        })

    return out

def top3_from_p9(p9) -> list[str]:
    """
    ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹ parse_potentials_9:
    - dict: {"p1_name": "...", "p2_name": "...", "p3_name": "..."}
    - list/tuple: ["...", "...", "...", ...] Ğ¸Ğ»Ğ¸ [{"name":...}, ...]
    - None / ÑÑ‚Ñ€Ğ°Ğ½Ğ½Ñ‹Ğµ ÑĞ»ÑƒÑ‡Ğ°Ğ¸ -> Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ñ‹Ğ¹ fallback
    """
    if p9 is None:
        return []

    # dict
    if isinstance(p9, dict):
        out = []
        for k in ("p1_name", "p2_name", "p3_name"):
            v = (p9.get(k) or "").strip()
            if v:
                out.append(v)
        # fallback: ĞµÑĞ»Ğ¸ Ğ²Ğ´Ñ€ÑƒĞ³ ĞºĞ»ÑÑ‡Ğ¸ Ğ´Ñ€ÑƒĞ³Ğ¸Ğµ
        if len(out) < 3:
            # Ğ¿Ğ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞµĞ¼ Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğµ Ğ°Ğ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ñ‹
            for k in ("p1", "p2", "p3"):
                v = (p9.get(k) or "").strip() if isinstance(p9.get(k), str) else ""
                if v and v not in out:
                    out.append(v)
        return out[:3]

    # list / tuple
    if isinstance(p9, (list, tuple)):
        out = []
        for item in p9:
            if isinstance(item, str):
                s = item.strip()
                if s:
                    out.append(s)
            elif isinstance(item, dict):
                # Ğ¿Ğ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞµĞ¼ Ğ²Ñ‹Ñ‚Ğ°Ñ‰Ğ¸Ñ‚ÑŒ name/label/title
                for kk in ("name", "label", "title"):
                    if kk in item and isinstance(item[kk], str) and item[kk].strip():
                        out.append(item[kk].strip())
                        break
        return out[:3]

    # string â€” Ğ½Ğµ Ğ¾Ğ¶Ğ¸Ğ´Ğ°ĞµĞ¼, Ğ½Ğ¾ Ğ¿ÑƒÑÑ‚ÑŒ Ğ±ÑƒĞ´ĞµÑ‚ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾
    if isinstance(p9, str):
        # Ğ¿Ğ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞµĞ¼ Ğ²Ñ‹Ñ‚Ğ°Ñ‰Ğ¸Ñ‚ÑŒ Ğ¿ĞµÑ€Ğ²Ñ‹Ğµ 3 ÑÑ‚Ñ€Ğ¾ĞºĞ¸
        lines = [x.strip() for x in p9.splitlines() if x.strip()]
        return lines[:3]

    return []

def build_soul_and_actions(skeleton: dict) -> dict:
    """
    ĞŸÑ€Ğ¾ÑĞ¸Ğ¼ LLM:
    - ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¾Ğµ "Ğ¿Ğ¾Ğ¿Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ" (Ğ´ÑƒÑˆĞ°)
    - 3 Ñ„Ğ¾ĞºÑƒÑĞ° (Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¾ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ‚Ğµ Ğ¶Ğµ)
    - 9 Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹ (ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾ Ğ¿Ğ¾Ğ´ Ğ¢Ğ¾Ñ‡ĞºÑƒ Ğ/Ğ‘)
    Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°: JSON.
    """

    focuses_for_prompt = [
        {"id": f["id"], "title": f["title"], "role": f["role"], "weight": f["weight"], "owner": f["owner"]}
        for f in skeleton["focuses"]
    ]

    prompt = f"""
ROLE: Ğ’Ñ‹ â€” Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¾Ğ²Ñ‹Ğ¹ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³ Ğ¸ ĞºĞ¾ÑƒÑ‡ Ğ¿Ğ¾ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ (Ğ±ĞµĞ· Ñ‚ĞµÑ€Ğ°Ğ¿Ğ¸Ğ¸, Ğ±ĞµĞ· ÑĞ·Ğ¾Ñ‚ĞµÑ€Ğ¸ĞºĞ¸).

INPUT (ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾):
Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ: {skeleton['point_a']}
Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ‘: {skeleton['point_b']}
Ğ¢Ğ¸Ğ¿ Ñ†ĞµĞ»Ğ¸: {skeleton['goal_type']}
Ğ¢Ğ¸Ğ¿ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ: {skeleton['state_type']}
Ğ¤Ğ¾ĞºÑƒÑÑ‹-Ñ€Ğ°Ğ¼ĞºĞ¸ (3 ÑˆÑ‚, Ğ²ĞµÑĞ° 60/30/10 Ğ½Ğµ Ğ¼ĞµĞ½ÑÑ‚ÑŒ):
{json.dumps(focuses_for_prompt, ensure_ascii=False)}

RULES:
- Ğ¯Ğ·Ñ‹Ğº: Ñ€ÑƒÑÑĞºĞ¸Ğ¹. ĞĞ±Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ: Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ½Ğ° Â«Ğ²Ñ‹Â».
- ĞĞ¸ĞºĞ°ĞºĞ¸Ñ… Ğ¾Ğ±Ñ‰Ğ¸Ñ… ÑĞ¾Ğ²ĞµÑ‚Ğ¾Ğ² Ğ¸ Ğ»Ğ¾Ğ·ÑƒĞ½Ğ³Ğ¾Ğ².
- ĞšĞ°Ğ¶Ğ´Ğ¾Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ:
  1) Ğ½Ğ° 20â€“60 Ğ¼Ğ¸Ğ½ÑƒÑ‚,
  2) Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°Ñ‚ÑŒÑÑ Ñ Ğ³Ğ»Ğ°Ğ³Ğ¾Ğ»Ğ°,
  3) Ğ¸Ğ¼ĞµÑ‚ÑŒ Ğ¸Ğ·Ğ¼ĞµÑ€Ğ¸Ğ¼Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚/Ğ°Ñ€Ñ‚ĞµÑ„Ğ°ĞºÑ‚ (Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚/Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°/Ğ¿Ñ€Ğ¾Ñ‚Ğ¾Ñ‚Ğ¸Ğ¿/Ñ‡ĞµÑ€Ğ½Ğ¾Ğ²Ğ¸Ğº/ÑĞºÑ€Ğ¸Ğ¿Ñ‚/Ğ¿Ğ¾ÑÑ‚),
  4) Ğ±Ñ‹Ñ‚ÑŒ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ğ¼Ñ‹Ğ¼ Ğ¿Ñ€ÑĞ¼Ğ¾ ÑĞµĞ¹Ñ‡Ğ°Ñ Ğ±ĞµĞ· â€œĞ¿Ğ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ»ÑÑÑŒ Ğ¼ĞµÑÑÑ†â€.
- ĞĞµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸: Â«Ğ¸Ğ·ÑƒÑ‡Ğ¸Ñ‚Ğµ Ñ€Ñ‹Ğ½Ğ¾ĞºÂ», Â«Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ¹Ñ‚Ğµ Ğ¿Ğ»Ğ°Ğ½ Ğ½Ğ° 3 Ğ¼ĞµÑÑÑ†Ğ°Â», Â«ÑĞ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼ÑƒÂ», ĞµÑĞ»Ğ¸ Ğ½ĞµÑ‚ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ°Ñ€Ñ‚ĞµÑ„Ğ°ĞºÑ‚Ğ°.
- Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ±Ñ‹Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½Ñ‹ Ğº Ñ„Ğ¾ĞºÑƒÑÑƒ (Ğ½Ğµ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ÑÑ‚ÑŒÑÑ Ğ¼ĞµĞ¶Ğ´Ñƒ Ñ„Ğ¾ĞºÑƒÑĞ°Ğ¼Ğ¸).

Ğ’ĞĞ–ĞĞ: Ğ Ğ¾Ğ»Ğ¸ Ñ„Ğ¾ĞºÑƒÑĞ¾Ğ² = ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ¸ Ğ¼Ğ°Ñ‚Ñ€Ğ¸Ñ†Ñ‹.
- role=perception (ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ° 1): ÑÑ‚Ğ¾ Ğ¿Ñ€Ğ¾ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·/Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ/ÑÑĞ½Ğ¾ÑÑ‚ÑŒ Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ñ. ĞĞ• Ğ¿Ñ€Ğ¾ Ğ¿Ğ»Ğ°Ğ½Ñ‹/Ğ´Ğ¸ÑÑ†Ğ¸Ğ¿Ğ»Ğ¸Ğ½Ñƒ.
- role=motivation (ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ° 2): ÑÑ‚Ğ¾ Ğ¿Ñ€Ğ¾ Ğ´Ğ²Ğ¸Ğ³Ğ°Ñ‚ĞµĞ»ÑŒ/Ñ‡Ñ‚Ğ¾ Ğ·Ğ°Ğ¶Ğ¸Ğ³Ğ°ĞµÑ‚. ĞĞ• Ğ¿Ñ€Ğ¾ â€œĞ½Ğ°Ğ´Ğ¾/Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½â€.
- role=instrument (ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ° 3): ÑÑ‚Ğ¾ Ğ¿Ñ€Ğ¾ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ¸ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ. ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ ÑˆĞ°Ğ³Ğ¸/Ğ´ĞµĞ»Ğ°Ğ½Ğ¸Ñ.
ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ¾: Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ² ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼ Ñ„Ğ¾ĞºÑƒÑĞµ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ€Ğ¾Ğ»Ğ¸ ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ¸.

TASK:
1) "soul_text": 6â€“9 Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹. Ğ”Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ¿Ğ¾Ğ¿Ğ°Ğ´Ğ°Ñ‚ÑŒ Ğ² Ğ¢Ğ¾Ñ‡ĞºÑƒ Ğ/Ğ‘, Ğ±ĞµĞ· ĞºĞ»Ğ¸ÑˆĞµ, Ğ±ĞµĞ· Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ°Ñ„Ğ¾ÑĞ°.
2) Ğ”Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ñ„Ğ¾ĞºÑƒÑĞ° â€” 3 Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ (Ğ¸Ñ‚Ğ¾Ğ³Ğ¾ 9). Ğ£Ñ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°Ğ¹Ñ‚Ğµ Ñ‚Ğ¸Ğ¿ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ (ĞµÑĞ»Ğ¸ burnout/confusion/pause â€” Ğ´ĞµĞ»Ğ°Ğ¹Ñ‚Ğµ Ğ¼ÑĞ³Ñ‡Ğµ).

OUTPUT FORMAT: ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ JSON, Ğ±ĞµĞ· markdown, Ğ±ĞµĞ· Ğ¿Ğ¾ÑÑĞ½ĞµĞ½Ğ¸Ğ¹:
{{
  "soul_text": "...",
  "focuses": [
    {{"id": 1, "title": "...", "weight": 60, "actions": ["...", "...", "..."]}},
    {{"id": 2, "title": "...", "weight": 30, "actions": ["...", "...", "..."]}},
    {{"id": 3, "title": "...", "weight": 10, "actions": ["...", "...", "..."]}}
  ]
}}
"""

    model = st.session_state.get("focus_llm_model", "gpt-4o-mini")
    raw = call_llm(prompt, model=model, temperature=0.35)

    # Ğ•ÑĞ»Ğ¸ LLM Ğ½Ğµ Ğ²ĞµÑ€Ğ½ÑƒĞ» Ğ½Ğ¸Ñ‡ĞµĞ³Ğ¾ â€” fallback
    if not raw or len(raw.strip()) < 5:
        return {
            "soul_text": "",
            "focuses": [
                {
                    "id": f["id"],
                    "title": f["title"],
                    "weight": f["weight"],
                    "actions": build_actions_fallback(skeleton)[f["id"] - 1]["actions"],
                }
                for f in skeleton["focuses"]
            ]
        }
    # Ğ²Ñ‹Ñ‚Ğ°Ñ‰Ğ¸Ğ¼ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ JSON-Ğ¾Ğ±ÑŠĞµĞºÑ‚ Ğ´Ğ°Ğ¶Ğµ ĞµÑĞ»Ğ¸ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ğ»Ğ° Ñ‚ĞµĞºÑÑ‚
    m = re.search(r"\{.*\}", raw, flags=re.S)
    if m:
        raw = m.group(0).strip()
    # ĞŸĞ¾Ğ¿Ñ‹Ñ‚ĞºĞ° Ñ€Ğ°ÑĞ¿Ğ°Ñ€ÑĞ¸Ñ‚ÑŒ JSON
    try:
        data = json.loads(raw)
        # Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ
        if "focuses" not in data or not isinstance(data["focuses"], list) or len(data["focuses"]) != 3:
            raise ValueError("Invalid focuses")
        return data
    except Exception:
        # Ğ•ÑĞ»Ğ¸ LLM Ğ²ĞµÑ€Ğ½ÑƒĞ» Ğ¼ÑƒÑĞ¾Ñ€ â€” fallback
        fb = build_actions_fallback(skeleton)
        return {
            "soul_text": "",
            "focuses": [
                {
                    "id": f["focus_id"],
                    "title": f["focus_title"],
                    "weight": skeleton["focuses"][f["focus_id"] - 1]["weight"],
                    "actions": f["actions"],
                }
                for f in fb
            ]
        }


# ---------- 3) UI Ğ’Ğ¡Ğ¢ĞĞ’ĞšĞ (Ğ—ĞĞœĞ•ĞĞ¯Ğ•Ğ¢ Ğ¡Ğ¢ĞĞ Ğ£Ğ® Ğ“Ğ•ĞĞ•Ğ ĞĞ¦Ğ˜Ğ®) ----------

# ĞŸÑ€ĞµĞ´Ğ¿Ğ¾Ğ»Ğ°Ğ³Ğ°Ñ, Ñ‡Ñ‚Ğ¾ ÑÑ‚Ğ¸ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ñƒ Ñ‚ĞµĞ±Ñ ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ Ğ¸Ğ· Ñ„Ğ¾Ñ€Ğ¼Ñ‹:
# point_a = st.session_state.get("point_a", "") Ğ¸Ğ»Ğ¸ Ğ¸Ğ· st.text_area
# point_b = st.session_state.get("point_b", "")
# top_potentials = [...]  # Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ ["ĞĞ¼ĞµÑ‚Ğ¸ÑÑ‚", "Ğ“Ñ€Ğ°Ğ½Ğ°Ñ‚", "Ğ¦Ğ¸Ñ‚Ñ€Ğ¸Ğ½"]

# Ğ•ÑĞ»Ğ¸ Ñƒ Ñ‚ĞµĞ±Ñ Ğ¾Ğ½Ğ¸ Ğ½Ğ°Ğ·Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ Ğ¸Ğ½Ğ°Ñ‡Ğµ â€” Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ¿Ğ¾Ğ´ÑÑ‚Ğ°Ğ²ÑŒ ÑĞ²Ğ¾Ğ¸ Ğ¸Ğ¼ĞµĞ½Ğ° Ğ½Ğ¸Ğ¶Ğµ.

    if "point_a" not in st.session_state:
        st.session_state.point_a = ""
    if "point_b" not in st.session_state:
        st.session_state.point_b = ""
    if "top_potentials" not in st.session_state:
        st.session_state.top_potentials = []


# Ğ¢Ğ²Ğ¾Ğ¸ Ğ¿Ğ¾Ğ»Ñ (ĞµÑĞ»Ğ¸ Ğ¾Ğ½Ğ¸ ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ â€” ĞĞ• Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€ÑƒĞ¹, Ğ° Ğ¾ÑÑ‚Ğ°Ğ²ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ±Ğ»Ğ¾Ğº ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ½Ğ¸Ğ¶Ğµ)
# st.session_state.point_a = st.text_area("Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ (ÑĞµĞ¹Ñ‡Ğ°Ñ)", st.session_state.point_a)
# st.session_state.point_b = st.text_area("Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ‘ (ĞºĞ°Ğº Ñ…Ğ¾Ñ‡Ñƒ)", st.session_state.point_b)

# !!! Ğ’ĞĞ–ĞĞ: Ğ¾ÑÑ‚Ğ°Ğ²ÑŒ ÑĞ²Ğ¾Ğ¸ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğµ Ğ¿Ğ¾Ğ»Ñ Ğ²Ğ²Ğ¾Ğ´Ğ°. ĞĞ¸Ğ¶Ğµ â€” Ğ¸Ğ¼ĞµĞ½Ğ½Ğ¾ Ğ±Ğ»Ğ¾Ğº Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸/Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ°.

    if st.button("âœ¨ Ğ¡Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ 3 Ñ„Ğ¾ĞºÑƒÑĞ° (ÑĞºĞµĞ»ĞµÑ‚ + Ğ´ÑƒÑˆĞ°)", use_container_width=True):
        point_a = st.session_state.point_a
        point_b = st.session_state.point_b
        top_potentials = st.session_state.top_potentials

    # 1) Ğ¡ĞšĞ•Ğ›Ğ•Ğ¢
        skeleton = build_focus_skeleton(point_a, point_b, top_potentials)

    # 2) Ğ”Ğ£Ğ¨Ğ + 9 Ğ”Ğ•Ğ™Ğ¡Ğ¢Ğ’Ğ˜Ğ™
        result = build_soul_and_actions(skeleton)

    # Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ Ğ² session_state, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ğ»Ğ¾ Ğ´Ğ°Ğ»ÑŒÑˆĞµ "Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ñ„Ğ¾ĞºÑƒÑÑ‹"
        st.session_state.generated_skeleton = skeleton
        st.session_state.generated_result = result


# ĞÑ‚Ñ€Ğ¸ÑĞ¾Ğ²ĞºĞ° (ĞµÑĞ»Ğ¸ ÑƒĞ¶Ğµ ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ğ»Ğ¸)
    if "generated_result" in st.session_state:
        result = st.session_state.generated_result

    # Ğ”ÑƒÑˆĞ° (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
    if result.get("soul_text"):
        st.markdown("### âœ¨ ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ ÑÑ‚Ğ¾ Ğ²Ğ°Ñˆ Ğ¿ÑƒÑ‚ÑŒ")
        st.write(result["soul_text"])

    st.markdown("### ğŸ¯ 3 Ñ„Ğ¾ĞºÑƒÑĞ° Ğ¸ 9 Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹")

    for f in result["focuses"]:
        st.markdown(f"## Ğ¤Ğ¾ĞºÑƒÑ {f['id']}")
        st.text_input(f"Ğ¤Ğ¾ĞºÑƒÑ {f['id']}: Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ", value=f["title"], key=f"focus_{f['id']}_title")

        # 3 Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ
        for i, act in enumerate(f["actions"], start=1):
            st.text_input(
                f"Ğ¤Ğ¾ĞºÑƒÑ {f['id']}: Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ {i}",
                value=act,
                key=f"focus_{f['id']}_action_{i}"
            )

    # ĞšĞ½Ğ¾Ğ¿ĞºĞ° ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ (Ñ‚Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑˆÑŒ Ğ·Ğ°Ğ²ÑĞ·Ğ°Ñ‚ÑŒ Ğ½Ğ° ÑĞ²Ğ¾Ğ¹ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒ)
    if st.button("ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ñ„Ğ¾ĞºÑƒÑÑ‹", use_container_width=True):
        # Ğ—Ğ´ĞµÑÑŒ Ğ¿Ğ¾Ğ´Ñ†ĞµĞ¿Ğ¸ ÑĞ²Ğ¾Ğ¹ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹ save_to_db/save_to_file
        st.success("Ğ¤Ğ¾ĞºÑƒÑÑ‹ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ñ‹ (Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸ Ñ‚ÑƒÑ‚ ÑĞ²Ğ¾Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ).")

def realization_tab(profile: dict):

    profile = ensure_profile_schema(profile)
    f = profile["foundation"]
    r = profile["realization"]

    st.markdown("## 1) Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ")

    c1, c2 = st.columns(2)
    with c1:
        r["point_a"] = st.text_area(
            "Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ (ÑĞµĞ¹Ñ‡Ğ°Ñ)",
            value=r.get("point_a", ""),
            height=140,
            key="real_point_a"   # âœ… ĞºĞ»ÑÑ‡
        )
    with c2:
        r["point_b"] = st.text_area(
            "Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ‘ (ĞºĞ°Ğº Ñ…Ğ¾Ñ‡Ñƒ)",
            value=r.get("point_b", ""),
            height=140,
            key="real_point_b"   # âœ… ĞºĞ»ÑÑ‡
        )

    st.write("")
    cols = st.columns(2)

    with cols[0]:
        if st.button("ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ñ‚Ğ¾Ñ‡ĞºĞ¸", use_container_width=True, key="real_save_points"):  # âœ… ĞºĞ»ÑÑ‡
            st.session_state.profile = profile
            save_profile_state()
            st.success("Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¾ âœ…")

    st.session_state["llm_model"] = st.selectbox(
        "LLM Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ğ´Ğ»Ñ Ñ„Ğ¾ĞºÑƒÑĞ¾Ğ²",
        ["gpt-4o-mini", "gpt-4.1-mini", "gpt-4.1"],
        index=0,
        key="llm_model_select"
    )
    
    st.selectbox(
        "LLM Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ğ´Ğ»Ñ Ñ„Ğ¾ĞºÑƒÑĞ¾Ğ²",
        ["gpt-4o-mini", "gpt-4.1-mini", "gpt-4.1"],
        index=0,
        key="focus_llm_model"
    )
    
    with cols[1]:
        gen_focus = st.button(
            "âœ¨ Ğ¡Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ 3 Ñ„Ğ¾ĞºÑƒÑĞ° (ÑĞºĞµĞ»ĞµÑ‚ + Ğ´ÑƒÑˆĞ°)",
            use_container_width=True,
            key="real_gen_focus"  # âœ… ĞºĞ»ÑÑ‡
        )

    if gen_focus:
        if not (f.get("potentials_table") or "").strip():
            st.error("Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»Ñ‹ Ğ²Ğ¾ Ğ²ĞºĞ»Ğ°Ğ´ĞºĞµ Â«0) ĞÑĞ½Ğ¾Ğ²Ğ°Â».")
        else:
            p9 = parse_potentials_9(f.get("potentials_table", ""))

            top_potentials = top3_from_p9(p9)

            if len(top_potentials) < 3:
                st.error("ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ Ñ‚Ğ¾Ğ¿-3 Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»Ğ°. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»Ğ¾Ğ² Ğ²Ğ¾ Ğ²ĞºĞ»Ğ°Ğ´ĞºĞµ Â«0) ĞÑĞ½Ğ¾Ğ²Ğ°Â».")
                st.stop()

            point_a = r.get("point_a", "")
            point_b = r.get("point_b", "")

            skeleton = build_focus_skeleton(
                point_a=point_a,
                point_b=point_b,
                top_potentials=top_potentials
            )

            result = build_soul_and_actions(skeleton)

            focuses_out = {}
            for i, fcs in enumerate(result["focuses"], start=1):
                focuses_out[f"focus{i}"] = {
                    "title": fcs["title"],
                    "actions": fcs["actions"]
                }

            r["focuses"] = focuses_out
            r["soul_text"] = result.get("soul_text", "")

            st.session_state.profile = profile
            save_profile_state()
            st.success("Ğ¤Ğ¾ĞºÑƒÑÑ‹ ÑĞ¾Ğ±Ñ€Ğ°Ğ½Ñ‹ âœ…")

    st.divider()

    if r.get("soul_text"):
        st.markdown("### âœ¨ ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ ÑÑ‚Ğ¾ Ğ²Ğ°Ñˆ Ğ¿ÑƒÑ‚ÑŒ")
        st.write(r["soul_text"])

    st.subheader("ğŸ¯ 3 Ñ„Ğ¾ĞºÑƒÑĞ° Ğ¸ 9 Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹")

    focuses = r.get("focuses") or {}
    if not focuses or not (focuses.get("focus1") or {}).get("title"):
        st.info("ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Â«Ğ¡Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ 3 Ñ„Ğ¾ĞºÑƒÑĞ°Â», Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ğ±Ğ»Ğ¾Ğº.")
        return

    for key, label in [("focus1","Ğ¤Ğ¾ĞºÑƒÑ 1"), ("focus2","Ğ¤Ğ¾ĞºÑƒÑ 2"), ("focus3","Ğ¤Ğ¾ĞºÑƒÑ 3")]:
        block = focuses.get(key) or {"title":"", "actions":[]}

        st.markdown(f"### {label}")
        st.caption("ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ„Ğ¾ĞºÑƒÑĞ°")

        block["title"] = st.text_area(
            label=f"{label}: Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ",
            value=block.get("title", ""),
            height=70,
            key=f"real_{key}_title",
            label_visibility="collapsed"
        )

        st.markdown("**Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ (3):**")
        acts = block.get("actions") or []
        while len(acts) < 3:
            acts.append("")
        acts = acts[:3]

        acts[0] = st.text_area("", value=acts[0], height=90, key=f"real_{key}_a1")
        acts[1] = st.text_area("", value=acts[1], height=90, key=f"real_{key}_a2")
        acts[2] = st.text_area("", value=acts[2], height=90, key=f"real_{key}_a3")

        block["actions"] = acts
        focuses[key] = block

        st.divider()

    if st.button("ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ñ„Ğ¾ĞºÑƒÑÑ‹", use_container_width=True, key="real_save_focuses"):  # âœ… ĞºĞ»ÑÑ‡
        r["focuses"] = focuses
        st.session_state.profile = profile
        save_profile_state()
        st.success("Ğ¤Ğ¾ĞºÑƒÑÑ‹ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ñ‹ âœ…")
        
from datetime import date
import hashlib
import streamlit as st
import datetime as dt
from datetime import date
today_key = date.today().isoformat()

def today_tab(profile: dict):
    profile = ensure_profile_schema(profile)
    f = profile.get("foundation", {})
    r = profile.get("realization", {})

    st.markdown("## Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ")
    st.caption("Ğ”ĞµĞ½ÑŒ Ñ„Ğ¸ĞºÑĞ¸Ñ€ÑƒĞµÑ‚ Ñ„Ğ¾ĞºÑƒÑ, Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ¸ Ñ€ĞµÑÑƒÑ€Ñ. Ğ¥Ğ¾Ğ±Ğ±Ğ¸/Ñ€ĞµÑÑƒÑ€ÑÑ‹ Ğ¿Ğ¾Ğ´Ñ‚ÑĞ³Ğ¸Ğ²Ğ°ÑÑ‚ÑÑ Ğ¸Ğ· Ğ²ĞºĞ»Ğ°Ğ´ĞºĞ¸ Â«Ğ¥Ğ¾Ğ±Ğ±Ğ¸Â» Ğ¸/Ğ¸Ğ»Ğ¸ ĞºĞ°Ğ½Ğ¾Ğ½Ğ°.")

    # ----------------------------
    # 0) DAY STORAGE (Ğ½Ğ° ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ)
    # ----------------------------
    today_key = _dt.date.today().isoformat()

    # Ğ“Ğ´Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑÑ Ğ´ĞµĞ½ÑŒ: r["days"][today_key]
    days = r.get("days", {}) or {}
    day = days.get(today_key) or {}
    day.setdefault("resources", {})   # ÑÑĞ´Ğ° Ğ¿Ğ¸ÑˆĞµĞ¼ Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ñ€ĞµÑÑƒÑ€ÑĞ°
    day.setdefault("actions_done", [])  # Ğ½Ğ° Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞµ
    days[today_key] = day
    r["days"] = days
    profile["realization"] = r

    # ----------------------------
    # 1) Ğ¤ĞĞšĞ£Ğ¡ ĞĞ Ğ¡Ğ•Ğ“ĞĞ”ĞĞ¯
    # ----------------------------
    st.markdown("### ğŸ¯ Ğ¤Ğ¾ĞºÑƒÑ Ğ½Ğ° ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ")

    focuses = r.get("focuses", []) or []  # Ğ¾Ğ¶Ğ¸Ğ´Ğ°ĞµĞ¼ ÑĞ¿Ğ¸ÑĞ¾Ğº dict: {"id","title","actions":[...]} Ğ¸Ğ»Ğ¸ {"title","actions":[...]}

    if not focuses:
        st.info("Ğ¤Ğ¾ĞºÑƒÑÑ‹ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ñ‹. Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ/ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚Ğµ 3 Ñ„Ğ¾ĞºÑƒÑĞ° Ğ²Ğ¾ Ğ²ĞºĞ»Ğ°Ğ´ĞºĞµ Â«Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸ÑÂ».")
    else:
        # Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·ÑƒĞµĞ¼ Ğ² ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ¾Ğ¿Ñ†Ğ¸Ğ¹
        focus_options = []
        id_map = {}  # label -> focus_id
        for i, fx in enumerate(focuses):
            fx_id = fx.get("id") or f"fx_{i+1}"
            title = (fx.get("title") or fx.get("name") or f"Ğ¤Ğ¾ĞºÑƒÑ {i+1}").strip()
            label = f"{i+1}. {title}"
            focus_options.append(label)
            id_map[label] = fx_id

        # Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ„Ğ¾ĞºÑƒÑ Ğ´Ğ½Ñ
        cur_focus_id = day.get("focus_id", "")
        # Ğ½Ğ°Ğ¹Ğ´Ñ‘Ğ¼ Ğ¸Ğ½Ğ´ĞµĞºÑ Ğ¿Ğ¾ id
        idx = 0
        if cur_focus_id:
            for j, fx in enumerate(focuses):
                fx_id = fx.get("id") or f"fx_{j+1}"
                if fx_id == cur_focus_id:
                    idx = j
                    break

        chosen_label = st.selectbox(
            "Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ñ„Ğ¾ĞºÑƒÑ",
            options=focus_options,
            index=idx,
            key=f"today_focus_{today_key}",
        )

        day["focus_id"] = id_map.get(chosen_label, "")

        # Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ñ„Ğ¾ĞºÑƒÑĞ° (ĞµÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ)
        selected_fx = None
        for j, fx in enumerate(focuses):
            fx_id = fx.get("id") or f"fx_{j+1}"
            if fx_id == day["focus_id"]:
                selected_fx = fx
                break

        if selected_fx:
            actions = selected_fx.get("actions") or selected_fx.get("steps") or []
            if actions:
                st.caption("Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ¿Ğ¾ Ñ„Ğ¾ĞºÑƒÑÑƒ:")
                for k, a in enumerate(actions[:5], start=1):
                    st.write(f"{k}) {a}")
            else:
                st.caption("Ğ£ ÑÑ‚Ğ¾Ğ³Ğ¾ Ñ„Ğ¾ĞºÑƒÑĞ° Ğ¿Ğ¾ĞºĞ° Ğ½ĞµÑ‚ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹ (actions).")

    st.divider()

    # ----------------------------
    # 2) Ğ Ğ•Ğ¡Ğ£Ğ Ğ¡ ĞĞ Ğ¡Ğ•Ğ“ĞĞ”ĞĞ¯ (2 Ñ€ÑĞ´)
    # ----------------------------
    st.markdown("### ğŸŒ¿ Ğ ĞµÑÑƒÑ€Ñ Ğ½Ğ° ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ (Ğ¸Ğ· 2 Ñ€ÑĞ´Ğ°)")

    if not (f.get("potentials_table") or "").strip():
        st.info("Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»Ñ‹ Ğ²Ğ¾ Ğ²ĞºĞ»Ğ°Ğ´ĞºĞµ Â«0) ĞÑĞ½Ğ¾Ğ²Ğ°Â».")
    else:
        p9 = parse_potentials_9(f.get("potentials_table", ""))

        pos4 = (p9[3] or "").strip() if len(p9) > 3 else ""
        pos5 = (p9[4] or "").strip() if len(p9) > 4 else ""
        pos6 = (p9[5] or "").strip() if len(p9) > 5 else ""

        # ĞšĞ°Ğ½Ğ¾Ğ½ pos4
        d4 = (POT_4_CANON or {}).get(pos4) or {}
        solo_opts = [str(x).strip() for x in (d4.get("hobby") or []) if str(x).strip()]

        # ĞšĞ°Ğ½Ğ¾Ğ½ pos6
        d6 = (POT_6_CANON or {}).get(pos6) or {}
        col_opts = [str(x).strip() for x in (d6.get("collective_hobby") or []) if str(x).strip()]

        # pos5 + Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ + Ğ¸Ğ³Ñ€Ğ° â€” Ğ¸Ğ· pack (Ğ²ĞºĞ»Ğ°Ğ´ĞºĞ° "Ğ¥Ğ¾Ğ±Ğ±Ğ¸")
        pack = (r.get("hobbies_pack") or {})
        rec_opts  = [str(x).strip() for x in (pack.get("restore") or []) if str(x).strip()]
        ind_opts  = [str(x).strip() for x in (pack.get("individual") or []) if str(x).strip()]  # Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ 5
        game_opts = [str(x).strip() for x in (pack.get("game") or []) if str(x).strip()]

        # Ğ•ÑĞ»Ğ¸ Ñ…Ğ¾Ñ‡ĞµÑˆÑŒ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ pos5 Ğ¿Ğ¾Ğ´Ñ…Ğ²Ğ°Ñ‚Ñ‹Ğ²Ğ°Ğ»ÑÑ Ğ¸Ğ· ĞºĞ°Ğ½Ğ¾Ğ½Ğ° Ñ‚Ğ¾Ğ¶Ğµ â€” Ğ¿Ğ¾Ğ·Ğ¶Ğµ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ğ¼ POT_5_CANON
        # ĞŸĞ¾ĞºĞ° Ğ±ĞµÑ€Ñ‘Ğ¼ Ğ¸Ğ· hobbies_pack.

        def uniq(lst):
            out, seen = [], set()
            for x in lst:
                k = x.lower()
                if k not in seen:
                    out.append(x); seen.add(k)
            return out

        solo_opts = uniq(solo_opts)
        col_opts  = uniq(col_opts)
        rec_opts  = uniq(rec_opts)
        ind_opts  = uniq(ind_opts)
        game_opts = uniq(game_opts)

        res = day["resources"]

        def pick(label, opts, key, icon):
            options = ["(Ğ½Ğµ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ¾)"] + [f"{label}: {x}" for x in (opts or [])]
            cur = res.get(key, "")
            idx = options.index(cur) if cur in options else 0
            chosen = st.selectbox(
                f"{icon} {label}",
                options=options,
                index=idx,
                key=f"today_{today_key}_{key}",
            )
            res[key] = "" if chosen == "(Ğ½Ğµ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ¾)" else chosen

        pick("Ğ›Ğ¸Ñ‡Ğ½Ğ¾Ğµ (Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ 4)", solo_opts, "pos4", "ğŸ§˜")
        pick("Ğ’Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ°Ğ½Ğ°Ğ»Ğ°", rec_opts, "restore", "ğŸŒ¿")
        pick("Ğ˜Ğ½Ğ´Ğ¸Ğ²Ğ¸Ğ´ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğµ (Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ 5)", ind_opts, "pos5", "ğŸ­")
        pick("ĞšĞ¾Ğ»Ğ»ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ (Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ 6)", col_opts, "pos6", "ğŸ‘¥")
        pick("Ğ˜Ğ³Ñ€Ğ¾Ğ²Ğ°Ñ Ñ†ĞµĞ»ÑŒ (Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ)", game_opts, "game", "ğŸ¯")

    st.divider()

    # ----------------------------
    # 3) Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ´Ğ½Ñ
    # ----------------------------
    col1, col2 = st.columns(2)
    with col1:
        if st.button("ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ´ĞµĞ½ÑŒ", use_container_width=True, key=f"save_day_{today_key}"):
            # Ğ·Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµĞ¼ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾ Ğ² Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ
            r["days"][today_key] = day
            profile["realization"] = r
            st.session_state.profile = profile
            save_profile_state()
            st.success("Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¾ âœ…")

    with col2:
        if st.button("ğŸ§¹ Ğ¡Ğ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ´Ğ½Ñ", use_container_width=True, key=f"reset_day_{today_key}"):
            day["focus_id"] = ""
            day["resources"] = {}
            r["days"][today_key] = day
            profile["realization"] = r
            st.session_state.profile = profile
            save_profile_state()
            st.success("Ğ¡Ğ±Ñ€Ğ¾ÑˆĞµĞ½Ğ¾ âœ…")

def progress_tab(profile: dict):
    profile = ensure_profile_schema(profile)
    t = profile.get("today", {}).get("by_date", {}) or {}

    st.markdown("## ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ")

    if not t:
        st.info("ĞŸĞ¾ĞºĞ° Ğ½ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…. ĞÑ‚Ğ¼ĞµÑ‡Ğ°Ğ¹Ñ‚Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ²Ğ¾ Ğ²ĞºĞ»Ğ°Ğ´ĞºĞµ Â«Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½ÑÂ».")
        return

    # Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ 14 Ğ´Ğ½ĞµĞ¹
    keys = sorted(t.keys(), reverse=True)[:14]

    rows = []
    for k in keys:
        day = t.get(k) or {}
        actions = day.get("actions") or {}
        done = sum(1 for v in actions.values() if v)
        total = len(actions)
        hobby = day.get("hobby") or ""
        rows.append((k, done, total, hobby))

    st.caption("ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ Ğ´Ğ½Ğ¸ (Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¾ / Ğ²ÑĞµĞ³Ğ¾ + Ñ…Ğ¾Ğ±Ğ±Ğ¸):")
    for (k, done, total, hobby) in rows:
        st.write(f"- {k}: **{done}/{total}**" + (f" Â· {hobby}" if hobby else ""))

def settings_tab():
    st.markdown("## ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸")
    if st.session_state.get("user"):
        st.code(f"Email: {st.session_state.user.get('email')}")
    if st.button("ğŸšª Ğ’Ñ‹Ğ¹Ñ‚Ğ¸", use_container_width=True):
        st.session_state.authed = False
        st.session_state.user = None
        st.session_state.profile = None
        st.rerun()


# =========================
# MAIN
# =========================
init_state()

if not st.session_state.authed:
    auth_screen()
    st.stop()

# load profile once
if not st.session_state.profile:
    prof = db_get_profile(st.session_state.user["id"])
    if prof and prof.get("data"):
        st.session_state.profile = ensure_profile_schema(prof["data"])
    else:
        data = default_profile()
        db_upsert_profile(st.session_state.user["id"], data)
        st.session_state.profile = data

profile = st.session_state.profile

header_bar()

tabs = st.tabs(["0) ĞÑĞ½Ğ¾Ğ²Ğ°", "1) Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ", "Ğ¥Ğ¾Ğ±Ğ±Ğ¸", "2) Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ", "ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ", "ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸"])

with tabs[0]:
    foundation_tab(profile)

with tabs[1]:
    realization_tab(profile)

with tabs[2]:
    hobbies_tab(profile)

with tabs[3]:
    today_tab(profile)

with tabs[4]:
    progress_tab(profile)

with tabs[5]:
    settings_tab()
    
    